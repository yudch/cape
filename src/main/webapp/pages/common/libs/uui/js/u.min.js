function AbstractMasker(){}function AbstractSplitMasker(){}function AddressMasker(a){this.update(a)}function NumberMasker(a){this.update(a)}function CurrencyMasker(a){this.update(a)}function DateTimeMasker(a){this.update(a)}function DateMasker(a){this.update(a)}function TimeMasker(a){this.update(a)}function PrecentMasker(){}function toColorfulString(a){var b;return a?null==a.color?a.value:(b=a.color,'<font color="'+b+'">'+a.value+"</font>"):""}function StringElement(a){this.value=a}function FormatResult(a,b){this.value=a,this.color=b}+function(a){"use strict";var b="1.0.0",c="i_theme",d="i_locale",e="i_languages",f="usercode",g=-480,h="contextpath",i={version:b};window.getCookie||(window.getCookie=function(a){var b="(?:; )?"+a+"=([^;]*);?",c=new RegExp(b);return c.test(document.cookie)?decodeURIComponent(RegExp.$1):null}),window.createShellObject=function(a){var b=function(){};return b.prototype=a,new b},function(){var b={},k={},l={},m={"float":{precision:2},datetime:{format:"yyyy-MM-dd hh:mm:ss",metaType:"DateTimeFormatMeta",speratorSymbol:"-"},time:{format:"hh:mm:ss"},date:{format:"yyyy-MM-dd"},currency:{precision:2,curSymbol:"ï¿¥"}},n={};n.getEnvironment=function(){return createShellObject(b)},n.getClientAttributes=function(){return createShellObject(k)},n.setContextPath=function(a){return b[h]=a},n.getContextPath=function(){return b[h]},n.setClientAttribute=function(a,b){k[a]=b},n.getSessionAttributes=function(){return createShellObject(l)},n.setSessionAttribute=function(a,b){l[a]=b,setCookie("ISES_"+a,b)},n.removeClientAttribute=function(a){k[a]=null,execIgnoreError(function(){delete k[a]})},n.getRootComponent=function(){return this.rootComponet},n.setRootComponent=function(a){this.rootComponet=a},n.getTheme=function(){return this.getEnvironment().theme},n.getLocale=function(){return this.getEnvironment().locale},n.getLanguages=function(){return this.getEnvironment().languages},n.collectEnvironment=function(){var a=this.getEnvironment(),b=this.getSessionAttributes();for(var c in k)b[c]=k[c];return a.clientAttributes=b,a},n.changeTheme=function(d){b.theme=d,setCookie(c,d),a(document).trigger("themeChange")},n.changeLocale=function(c){b.locale=c,setCookie(d,c),a(document).trigger("localeChange")},n.setMaskerMeta=function(a,b){if(m[a])if("object"!=typeof b)m[a]=b;else for(var c in b)m[a][c]=b[c];else m[a]=b},n.getMaskerMeta=function(a){return m[a]},n.registerSystemTimeZoneOffset=function(a){g=a},n.getSystemTimeZoneOffset=function(){return g};var o={Android:function(){return/Android/i.test(navigator.userAgent)},BlackBerry:function(){return/BlackBerry/i.test(navigator.userAgent)},iOS:function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},Windows:function(){return/IEMobile/i.test(navigator.userAgent)},any:function(){return this.Android()||this.BlackBerry()||this.iOS()||this.Windows()},pc:function(){return!this.any()},Screen:{size:j,direction:j}};n.getDevice=function(){return o},b.theme=getCookie(c),b.locale=getCookie(d),b.languages=getCookie(e)?getCookie(e).split(","):["ZH"],b.timezoneOffset=(new Date).getTimezoneOffset(),b.usercode=getCookie(f),document.cookie.replace(/ISES_(\w*)=([^;]*);?/gi,function(a,b,c){l[b]=c});var p=function(){};p.prototype=n,i.Core=new p}(),function(){var a,b=getCookie(f);if("undefined"!=typeof Log4js){a=new Log4js.Logger("iweb"),a.setLevel(Log4js.Level.ERROR);var c=new Log4js.ConsoleAppender(a,!0);a.addAppender(c)}else a={LEVEL_MAP:{OFF:Number.MAX_VALUE,ERROR:4e4,WARN:3e4,INFO:2e4,DEBUG:1e4,TRACE:5e3,ALL:1},level:4e4,setLevel:function(a){if(a){var b=this.LEVEL_MAP[a.toUpperCase()];b&&(this.level=b)}},isDebugEnabled:function(){return this.LEVEL_MAP.DEBUG>=this.level&&console},isTraceEnabled:function(){return this.LEVEL_MAP.TRACE>=this.level&&console},isInfoEnabled:function(){return this.LEVEL_MAP.INFO>=this.level&&console},isWarnEnabled:function(){return this.LEVEL_MAP.WARN>=this.level&&console},isErrorEnabled:function(){return this.LEVEL_MAP.ERROR>=this.level&&console},debug:function(){this.isDebugEnabled()&&console.debug.call(console,arguments)},warn:function(){this.isWarnEnabled()&&console.debug.call(console,arguments)},info:function(){this.isInfoEnabled()&&console.debug.call(console,arguments)},trace:function(){this.isTraceEnabled()&&console.debug.call(console,arguments)},error:function(){this.isErrorEnabled()&&console.debug.call(console,arguments)}};a.setLevel(b),i.log=a,i.debugMode=!1}(),window.iweb=i;var j=function(){}}($),+function(a){"use strict";function b(){var a=document,b={},c=+new Date,d=/((?:http|https|file):\/\/.*?\/[^:]+)(?::\d+)?:\d+/,e=-1===(""+a.querySelector).indexOf("[native code]");if(a.currentScript)return a.currentScript.src;var f;try{b.b()}catch(g){f=g.fileName||g.sourceURL||g.stack||g.stacktrace}if(f){var h=d.exec(f)[1];if(h)return h}for(var i,j=a.scripts,k=j.length-1;i=j[k--];)if(i.className!==c&&"interactive"===i.readyState)return i.className=c,e?i.getAttribute("src",4):i.src}if(a.i18n||window.i18n){var c=b(),d=c.substr(0,c.lastIndexOf("/")),e=d.substr(0,d.lastIndexOf("/"));window.uuii18n=a.uuii18n=a.extend(!0,{},a.i18n||window.i18n),a.uuii18n.init({getAsync:!1,fallbackLng:!1,ns:{namespaces:["uui-trans"]},resGetPath:e+"/locales/__lng__/__ns__.json"})}window.trans=a.trans=function(b,c){return a.i18n?a.i18n.t("uui-trans:"+b):c}}($),!function(){function a(a){var c=$(this);if(c.hasClass("accordion-item-toggle")||c.hasClass("item-link")&&c.parent().hasClass("accordion-item")){var d=c.parent(".accordion-item");0===d.length&&(d=c.parents(".accordion-item")),0===d.length&&(d=c.parents("li")),b.accordionToggle(d)}if(c.hasClass("close-picker")){var e=$(".picker-modal.modal-in");e.length>0?b.closeModal(e):(e=$(".popover.modal-in .picker-modal"),e.length>0&&b.closeModal(e.parents(".popover")))}if(c.hasClass("refer_prev")){var f=$(".refer_select").parents(" fieldset[enable='true']");if(f.length>0){var g=f.prev("fieldset[enable='true']").find("[data-provide='datetimepicker'] div");if(g.length>0)return void g.triggerHandler("touchend");var h=f.prev("fieldset[enable='true']").find("input");h&&h.triggerHandler("touchend")}}if(c.hasClass("refer_next")){var f=$(".refer_select").parents("fieldset[enable='true']");if(f.length>0){var g=f.next("fieldset[enable='true']").find("[data-provide='datetimepicker'] div");if(g.length>0)return void g.triggerHandler("touchend");var h=f.next("fieldset[enable='true']").find("input");h&&h.triggerHandler("toucend")}}if(c.hasClass("refer_input")){a.preventDefault();var i=$(".picker-modal.modal-in");i.addClass("refer_modal"),c.focus()}}if(navigator.userAgent.match(/iPhone|iPod|Android|ios|iPad/i)){$.fn.extend({transform:function(a){for(var b=0;b<this.length;b++){var c=this[b].style;c.webkitTransform=c.MsTransform=c.msTransform=c.MozTransform=c.OTransform=c.transform=a}return this},transition:function(a){"string"!=typeof a&&(a+="ms");for(var b=0;b<this.length;b++){var c=this[b].style;c.webkitTransitionDuration=c.MsTransitionDuration=c.msTransitionDuration=c.MozTransitionDuration=c.OTransitionDuration=c.transitionDuration=a}return this},transitionEnd:function(a){function b(f){if(f.target===this)for(a.call(this,f),c=0;c<d.length;c++)e.off(d[c],b)}var c,d=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],e=this;if(a)for(c=0;c<d.length;c++)e.on(d[c],b);return this}}),$.app={};var b=$.app;b.btn=!0,b.openModal=function(a){a=$(a);var c=a.hasClass("modal");if($(".modal.modal-in:not(.modal-out)").length&&b.params.modalStack&&c)return void b.modalStack.push(function(){b.openModal(a)});var d=(a.hasClass("popover"),a.hasClass("popup")),e=a.hasClass("login-screen"),f=a.hasClass("picker-modal");c&&(a.show(),a.css({marginTop:-Math.round(a.outerHeight()/2)+"px"}));var g;e||f||(0!==$(".modal-overlay").length||d||$("body").append('<div class="modal-overlay"></div>'),0===$(".popup-overlay").length&&d&&$("body").append('<div class="popup-overlay"></div>'),g=$(d?".popup-overlay":".modal-overlay"));a[0].clientLeft;return a.trigger("open"),f&&$("body").addClass("with-picker-modal"),e||f||g.addClass("modal-overlay-visible"),a.removeClass("modal-out").addClass("modal-in").transitionEnd(function(){a.trigger(a.hasClass("modal-out")?"closed":"opened")}),!0},b.pickerModal=function(a,b){if("undefined"==typeof b&&(b=!1),"string"==typeof a&&a.indexOf("<")>=0){if(a=$(a),!(a.length>0))return!1;b&&a.addClass("remove-on-close"),$("body").append(a[0])}return a=$(a),0===a.length?!1:a[0]},b.closeModal=function(a){if(a.find(".refer_input").blur(),a.removeClass("refer_modal"),a=$(a||".modal-in"),"undefined"==typeof a||0!==a.length){var c=a.hasClass("modal"),d=a.hasClass("popover"),e=a.hasClass("popup"),f=a.hasClass("login-screen"),g=a.hasClass("picker-modal"),h=a.hasClass("remove-on-close"),i=$(e?".popup-overlay":".modal-overlay");return e?a.length===$(".popup.modal-in").length&&i.removeClass("modal-overlay-visible"):g||i.removeClass("modal-overlay-visible"),a.trigger("close").css("display","none"),g&&($("body").removeClass("with-picker-modal"),$("html").removeClass("hidden_srocll"),$("body").addClass("picker-modal-closing")),d?(a.removeClass("modal-in modal-out").trigger("closed").hide(),h&&a.remove()):(a.removeClass("modal-in").addClass("modal-out").transitionEnd(function(){a.trigger(a.hasClass("modal-out")?"closed":"opened"),g&&($("body").removeClass("picker-modal-closing"),$("html").removeClass("hidden_srocll")),e||f||g?(a.removeClass("modal-out"),h&&a.length>0&&a.remove()):a.remove()}),c&&b.params.modalStack&&b.modalStackClearQueue()),$(".refer_select").removeClass("refer_select"),b.btn=!0,!0}},b.accordionToggle=function(a){a=$(a),0!==a.length&&(a.hasClass("accordion-item-expanded")?b.accordionClose(a):b.accordionOpen(a))},b.accordionOpen=function(a){a=$(a);var c=a.parents(".accordion-list").eq(0),d=a.children(".accordion-item-content");0===d.length&&(d=a.find(".accordion-item-content"));var e=c.length>0&&a.parent().children(".accordion-item-expanded");e.length>0&&b.accordionClose(e),d.css("height",d[0].scrollHeight+"px").transitionEnd(function(){if(a.hasClass("accordion-item-expanded")){d.transition(0),d.css("height","auto");{d[0].clientLeft}d.transition(""),a.trigger("opened")}else d.css("height",""),a.trigger("closed")}),a.trigger("open"),a.addClass("accordion-item-expanded")},b.accordionClose=function(a){a=$(a);var b=a.children(".accordion-item-content");0===b.length&&(b=a.find(".accordion-item-content")),a.removeClass("accordion-item-expanded"),b.transition(0),b.css("height",b[0].scrollHeight+"px");b[0].clientLeft;b.transition(""),b.css("height","").transitionEnd(function(){if(a.hasClass("accordion-item-expanded")){b.transition(0),b.css("height","auto");{b[0].clientLeft}b.transition(""),a.trigger("opened")}else b.css("height",""),a.trigger("closed")}),a.trigger("close")},b.support=function(){var a={touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)};return a}(),b.mobile=function(){var a=navigator.userAgent.match(/iPhone|iPod|Android|ios|iPad/i)?!0:!1;return a}(),$.getTranslate=function(a,b){var c,d,e,f;return"undefined"==typeof b&&(b="x"),e=window.getComputedStyle(a,null),window.WebKitCSSMatrix?f=new WebKitCSSMatrix("none"===e.webkitTransform?"":e.webkitTransform):(f=e.MozTransform||e.OTransform||e.MsTransform||e.msTransform||e.transform||e.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),c=f.toString().split(",")),"x"===b&&(d=window.WebKitCSSMatrix?f.m41:parseFloat(16===c.length?c[12]:c[4])),"y"===b&&(d=window.WebKitCSSMatrix?f.m42:parseFloat(16===c.length?c[13]:c[5])),d||0},$.requestAnimationFrame=function(a){return window.requestAnimationFrame?window.requestAnimationFrame(a):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(a):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(a):window.setTimeout(a,1e3/60)},$.cancelAnimationFrame=function(a){return window.cancelAnimationFrame?window.cancelAnimationFrame(a):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(a):window.mozCancelAnimationFrame?window.mozCancelAnimationFrame(a):window.clearTimeout(a)},$(document).on("touchend",".refer_prev, .refer_next, .accordion-item-toggle, .close-picker",a),$(document).on("focus",".refer_input",a),$(document).on("touchstart",function(a){return 0===$(a.target).parents(".picker-modal").length?($(".modal-out").length>0&&b.closeModal($(".modal-out")),void($(".modal-in").length>0&&b.closeModal($(".modal-in")))):0===$(a.target).parents(".est").length&&0===$(a.target).parents(".toolbar-inner").length?void a.preventDefault():void 0});var c=function(a){function c(){var a=!1;return h.params.convertToPopover||h.params.onlyInPopover?(!h.inline&&h.params.input&&(h.params.onlyInPopover?a=!0:b.device.ios?a=b.device.ipad?!0:!1:$(window).width()>=768&&(a=!0)),a):a}function d(){return h.opened&&h.container&&h.container.length>0&&h.container.parents(".popover").length>0?!0:!1}function e(){if(h.opened)for(var a=0;a<h.cols.length;a++)h.cols[a].divider||(h.cols[a].calcSize(),h.cols[a].setValue(h.cols[a].value,0,!1))}function f(a){if("false"!==$(h.input).find("input").attr("h7picker")&&!h.opened){if(h.value=$(h.input).find("input").data("dd"),h.value||(h.value=h.params.value),h.modalNumber)return $(".modal-out").length>0&&b.closeModal($(".modal-out")),$(".modal-in").length>0&&b.closeModal($(".modal-in")),$(h.container).css({top:$(h.input).offset().top+50}).addClass("picker-iframe").show(),b.openModal($(h.container)),h.params.refer||h.datestart||(h.container.find(".picker-items-col").each(function(){var a=!0;(!h.initialized&&h.params.value||h.initialized&&h.value)&&(a=!1),h.initPickerCol(this,a)}),h.initialized?h.value&&h.setValue(h.value,0):h.params.value&&h.setValue(h.params.value,0)),h.input.parents(".input-group").addClass("refer_select"),h.datestart=!1,h.opened=!0,void(h.initialized=!0);if(h.open(a),$(a.target).attr("load","ready"),h.params.scrollToInput&&!c()){var d=h.input.parents(".page-content");if(0===d.length)return;var e,f=parseInt(d.css("padding-top"),10),g=parseInt(d.css("padding-bottom"),10),i=d[0].offsetHeight-f-h.container.height(),j=d[0].scrollHeight-f-h.container.height(),k=h.input.offset().top-f+h.input[0].offsetHeight;if(k>i){var l=d.scrollTop()+k-i;l+i>j&&(e=l+i-j+g,i===j&&(e=h.container.height()),d.css({"padding-bottom":e+"px"})),d.scrollTop(l,300)}}}}function g(){h.opened=!1,h.input&&h.input.length>0&&h.input.parents(".page-content").css({"padding-bottom":""}),h.params.onClose&&h.params.onClose(h)}var h=this,i={updateValuesOnMomentum:!1,updateValuesOnTouchmove:!0,rotateEffect:!1,momentumRatio:7,freeMode:!1,scrollToInput:!0,inputReadOnly:!0,convertToPopover:!0,onlyInPopover:!1,toolbar:!0,toolbarCloseText:"DONE",toolbarTemplate:'<div class="toolbar"><div class="toolbar-inner"><div class="left"><a href="#" class="link refer_prev">PREV</a><a href="#"   class="link refer_next">NEXT</a><input style="margin-left:30px" class="refer_input" type="text"></div><div class="right"><a href="#" class="link close-picker">{{closeText}}</a></div></div></div>'};a=a||{};for(var j in i)"undefined"==typeof a[j]&&(a[j]=i[j]);h.touchEvents={start:b.support.touch?"touchstart":"mousedown",move:b.support.touch?"touchmove":"mousemove",end:b.support.touch?"touchend":"mouseup"},h.params=a,h.cols=[],h.initialized=!1,h.inline=h.params.container?!0:!1;var k=!0;return h.setValue=function(a,b){for(var c=0,d=0;d<h.cols.length;d++)h.cols[d]&&!h.cols[d].divider&&(h.cols[d].setValue(a[c],b),c++)},h.updateValue=function(){for(var a=[],b=[],c=0;c<h.cols.length;c++)h.cols[c].divider||(a.push(h.cols[c].value),b.push(h.cols[c].displayValue));a.indexOf(void 0)>=0||(h.value=a,h.displayValue=b,h.params.onChange&&h.params.onChange(h,h.value,h.displayValue),h.input&&h.input.length>0&&$(h.input).find("input").data("dd",h.value).val(h.params.formatValue?h.params.formatValue(h,h.value,h.displayValue):h.value.join(" ")))},h.initPickerCol=function(a,b){function c(){r=$.requestAnimationFrame(function(){l.updateItems(void 0,void 0,0),c()})}function d(a){t||s||(a.preventDefault(),s=!0,u=v="touchstart"===a.type?a.originalEvent.targetTouches[0].pageY:a.pageY,w=(new Date).getTime(),E=!0,y=A=$.getTranslate(l.wrapper[0],"y"))}function e(a){if(s){a.preventDefault(),E=!1,v="touchmove"===a.type?a.originalEvent.targetTouches[0].pageY:a.pageY,t||($.cancelAnimationFrame(r),t=!0,y=A=$.getTranslate(l.wrapper[0],"y"),l.wrapper.transition(0)),a.preventDefault();var b=v-u;A=y+b,z=void 0,p>A&&(A=p-Math.pow(p-A,.8),z="min"),A>q&&(A=q+Math.pow(A-q,.8),z="max"),l.wrapper.transform("translate3d(0,"+A+"px,0)"),l.updateItems(void 0,A,0,h.params.updateValuesOnTouchmove),C=A-B||A,D=(new Date).getTime(),B=A}}function f(){if(!s||!t)return void(s=t=!1);s=t=!1,l.wrapper.transition(""),z&&l.wrapper.transform("min"===z?"translate3d(0,"+p+"px,0)":"translate3d(0,"+q+"px,0)"),x=(new Date).getTime();var a,b;x-w>300?b=A:(a=Math.abs(C/(x-D)),b=A+C*h.params.momentumRatio),b=Math.max(Math.min(b,q),p);var d=-Math.floor((b-q)/n);h.params.freeMode||(b=-d*n+q),l.wrapper.transform("translate3d(0,"+parseInt(b,10)+"px,0)"),l.updateItems(d,b,"",!0),h.params.updateValuesOnMomentum&&(c(),l.wrapper.transitionEnd(function(){$.cancelAnimationFrame(r)})),setTimeout(function(){E=!0},100)}function g(){if(E){$.cancelAnimationFrame(r);var a=$(this).attr("data-picker-value");l.setValue(a)}}var i=$(a),j=i.index(),l=h.cols[j];if(!l.divider){l.container=i,l.wrapper=l.container.find(".picker-items-col-wrapper"),l.items=l.wrapper.find(".picker-item");var m,n,o,p,q;l.replaceValues=function(a,b){l.destroyEvents(),l.values=a,l.displayValues=b;var c=h.columnHTML(l,!0);l.wrapper.html(c),l.items=l.wrapper.find(".picker-item"),l.calcSize(),l.setValue(l.values[0],0,!0),l.initEvents()},l.calcSize=function(){h.params.rotateEffect&&(l.container.removeClass("picker-items-col-absolute"),l.width||l.container.css({width:""}));var a,b;a=0,b=l.container[0].offsetHeight,m=l.wrapper[0].offsetHeight,n=l.items[0].offsetHeight,o=n*l.items.length,p=b/2-o+n/2,q=b/2-n/2,l.width&&(a=l.width,parseInt(a,10)===a&&(a+="px"),l.container.css({width:a})),h.params.rotateEffect&&(l.width||(l.items.each(function(){var b=$(this);b.css({width:"auto"}),a=Math.max(a,b[0].offsetWidth),b.css({width:""})}),l.container.css({width:a+2+"px"})),l.container.addClass("picker-items-col-absolute"))},l.calcSize(),l.wrapper.transform("translate3d(0,"+q+"px,0)").transition(0);var r;l.setValue=function(a,b,d){"undefined"==typeof b&&(b="");var e=l.wrapper.find('.picker-item[data-picker-value="'+a+'"]').index();if("undefined"!=typeof e&&-1!==e){var f=-e*n+q;l.wrapper.transition(b),l.wrapper.transform("translate3d(0,"+f+"px,0)"),h.params.updateValuesOnMomentum&&l.activeIndex&&l.activeIndex!==e&&($.cancelAnimationFrame(r),l.wrapper.transitionEnd(function(){$.cancelAnimationFrame(r)}),c()),l.updateItems(e,f,b,d)}},l.updateItems=function(a,b,c,d){"undefined"==typeof b&&(b=$.getTranslate(l.wrapper[0],"y")),"undefined"==typeof a&&(a=-Math.round((b-q)/n)),0>a&&(a=0),a>=l.items.length&&(a=l.items.length-1);var e=l.activeIndex;l.activeIndex=a,l.wrapper.find(".picker-selected, .picker-after-selected, .picker-before-selected").removeClass("picker-selected picker-after-selected picker-before-selected"),l.items.transition(c);{var f=l.items.eq(a).addClass("picker-selected").transform("");f.prevAll().addClass("picker-before-selected"),f.nextAll().addClass("picker-after-selected")}if((d||"undefined"==typeof d)&&(l.value=f.attr("data-picker-value"),l.displayValue=l.displayValues?l.displayValues[a]:l.value,e!==a&&(l.onChange&&l.onChange(h,l.value,l.displayValue),h.updateValue())),h.params.rotateEffect){{(b-(Math.floor((b-q)/n)*n+q))/n}l.items.each(function(){var a=$(this),c=a.index()*n,d=q-b,e=c-d,f=e/n,g=Math.ceil(l.height/n/2)+1,h=-18*f;h>180&&(h=180),-180>h&&(h=-180),Math.abs(f)>g?a.addClass("picker-item-far"):a.removeClass("picker-item-far"),a.transform("translate3d(0, "+(-b+q)+"px, "+(k?-110:0)+"px) rotateX("+h+"deg)")})}},b&&l.updateItems(0,q,0);var s,t,u,v,w,x,y,z,A,B,C,D,E=!0;l.initEvents=function(a){var b=a?"off":"on";l.container[b](h.touchEvents.start,d),l.container[b](h.touchEvents.move,e),l.container[b](h.touchEvents.end,f),l.items[b]("click",g)},l.destroyEvents=function(){l.initEvents(!0)},l.container[0].f7DestroyPickerCol=function(){l.destroyEvents()},l.initEvents()}},h.destroyPickerCol=function(a){a=$(a),"f7DestroyPickerCol"in a[0]&&a[0].f7DestroyPickerCol()},$(window).on("resize",e),h.columnHTML=function(a,b){var c="",d="";if(a.divider)d+='<div class="picker-items-col picker-items-col-divider '+(a.textAlign?"picker-items-col-"+a.textAlign:"")+" "+(a.cssClass||"")+'">'+a.content+"</div>";else{for(var e=0;e<a.values.length;e++)c+='<div class="picker-item" data-picker-value="'+a.values[e]+'">'+(a.displayValues?a.displayValues[e]:a.values[e])+"</div>";d+='<div class="picker-items-col '+(a.textAlign?"picker-items-col-"+a.textAlign:"")+" "+(a.cssClass||"")+'"><div class="picker-items-col-wrapper">'+c+"</div></div>"}return b?c:d},h.layout=function(){var a,b="",c="",d="modal"+Math.floor(1001*Math.random());h.cols=[];var e="";for(a=0;a<h.params.cols.length;a++){var f=h.params.cols[a];e+=h.columnHTML(h.params.cols[a]),h.cols.push(f)}c="picker-modal picker-columns "+d+" "+(h.params.cssClass||"")+(h.params.rotateEffect?" picker-3d":""),b=h.params.refer?'<div class="'+c+'">'+(h.params.toolbar?h.params.toolbarTemplate.replace(/{{closeText}}/g,h.params.toolbarCloseText):"")+'<div class="picker-modal-inner picker-items">'+h.params.refer+"</div></div>":'<div class="'+c+'">'+(h.params.toolbar?h.params.toolbarTemplate.replace(/{{closeText}}/g,h.params.toolbarCloseText):"")+'<div class="picker-modal-inner picker-items">'+e+'<div class="picker-center-highlight"></div></div></div>',h.modalNumber="."+d,h.pickerHTML=b},h.params.input&&(h.input=$(h.params.input),h.input.length>0&&(h.params.inputReadOnly&&h.input.prop("readOnly",!0),h.inline||h.input.on("touchend",f),h.params.inputReadOnly&&h.input.on("focus mousedown",function(a){a.preventDefault()}))),h.opened=!1,h.open=function(){var a=c();h.opened||(h.layout(),a?(h.pickerHTML='<div class="popover popover-picker-columns"><div class="popover-inner">'+h.pickerHTML+"</div></div>",h.popover=b.popover(h.pickerHTML,h.params.input,!0),h.container=$(h.popover).find(".picker-modal"),$(h.popover).on("close",function(){g()})):h.inline?(h.container=$(h.pickerHTML),h.container.addClass("picker-modal-inline"),$(h.params.container).append(h.container)):(h.container=$(b.pickerModal(h.pickerHTML)),$(h.container).on("close",function(){g()})),h.container[0].f7Picker=h),h.opened=!1,h.initialized=!1,h.params.onOpen&&h.params.onOpen(h)},h.close=function(){return h.opened&&!h.inline?d()?void b.closeModal(h.popover):void b.closeModal(h.container):void 0},h.destroy=function(){h.close(),h.params.input&&h.input.length>0&&h.input.off("touchend focus",f),$(window).off("resize",e)},h.inline&&h.open(),h.input.triggerHandler("touchend"),h};$.app.picker_mobile=function(a){return new c(a)}}}(),!function(){$.swtich_mobile=function(){$.app?$(".mobile_swtich").wrap("<label class='label-switch'></label>").after("<div class='checkbox'></div>"):$(".mobile_swtich").css("display","block")},$.swtich_mobile()}(),function(a){function b(a,b,c){switch(arguments.length){case 2:return null!=a?a:b;case 3:return null!=a?a:null!=b?b:c;default:throw new Error("Implement me")}}function c(a,b){return Bb.call(a,b)}function d(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function e(a){vb.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function f(a,b){var c=!0;return o(function(){return c&&(e(a),c=!1),b.apply(this,arguments)},b)}function g(a,b){sc[a]||(e(b),sc[a]=!0)}function h(a,b){return function(c){return r(a.call(this,c),b)}}function i(a,b){return function(c){return this.localeData().ordinal(a.call(this,c),b)}}function j(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function k(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function l(){}function m(a,b){b!==!1&&H(a),p(this,a),this._d=new Date(+a._d),uc===!1&&(uc=!0,vb.updateOffset(this),uc=!1)}function n(a){var b=A(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=vb.localeData(),this._bubble()}function o(a,b){for(var d in b)c(b,d)&&(a[d]=b[d]);return c(b,"toString")&&(a.toString=b.toString),c(b,"valueOf")&&(a.valueOf=b.valueOf),a}function p(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=b._pf),"undefined"!=typeof b._locale&&(a._locale=b._locale),Kb.length>0)for(c in Kb)d=Kb[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function q(a){return 0>a?Math.ceil(a):Math.floor(a)}function r(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function s(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function t(a,b){var c;return b=M(b,a),a.isBefore(b)?c=s(a,b):(c=s(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function u(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(g(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=vb.duration(c,d),v(this,e,a),this}}function v(a,b,c,d){var e=b._milliseconds,f=b._days,g=b._months;d=null==d?!0:d,e&&a._d.setTime(+a._d+e*c),f&&pb(a,"Date",ob(a,"Date")+f*c),g&&nb(a,ob(a,"Month")+g*c),d&&vb.updateOffset(a,f||g)}function w(a){return"[object Array]"===Object.prototype.toString.call(a)}function x(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function y(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&C(a[d])!==C(b[d]))&&g++;return g+f}function z(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=lc[a]||mc[b]||b}return a}function A(a){var b,d,e={};for(d in a)c(a,d)&&(b=z(d),b&&(e[b]=a[d]));return e}function B(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}vb[b]=function(e,f){var g,h,i=vb._locale[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=vb().utc().set(d,a);return i.call(vb._locale,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function C(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function D(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function E(a,b,c){return jb(vb([a,11,31+b-c]),b,c).week}function F(a){return G(a)?366:365}function G(a){return a%4===0&&a%100!==0||a%400===0}function H(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[Db]<0||a._a[Db]>11?Db:a._a[Eb]<1||a._a[Eb]>D(a._a[Cb],a._a[Db])?Eb:a._a[Fb]<0||a._a[Fb]>24||24===a._a[Fb]&&(0!==a._a[Gb]||0!==a._a[Hb]||0!==a._a[Ib])?Fb:a._a[Gb]<0||a._a[Gb]>59?Gb:a._a[Hb]<0||a._a[Hb]>59?Hb:a._a[Ib]<0||a._a[Ib]>999?Ib:-1,a._pf._overflowDayOfYear&&(Cb>b||b>Eb)&&(b=Eb),a._pf.overflow=b)}function I(b){return null==b._isValid&&(b._isValid=!isNaN(b._d.getTime())&&b._pf.overflow<0&&!b._pf.empty&&!b._pf.invalidMonth&&!b._pf.nullInput&&!b._pf.invalidFormat&&!b._pf.userInvalidated,b._strict&&(b._isValid=b._isValid&&0===b._pf.charsLeftOver&&0===b._pf.unusedTokens.length&&b._pf.bigHour===a)),b._isValid}function J(a){return a?a.toLowerCase().replace("_","-"):a}function K(a){for(var b,c,d,e,f=0;f<a.length;){for(e=J(a[f]).split("-"),b=e.length,c=J(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=L(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&y(e,c,!0)>=b-1)break;b--}f++}return null}function L(a){var b=null;if(!Jb[a]&&Lb)try{b=vb.locale(),require("./locale/"+a),vb.locale(b)}catch(c){}return Jb[a]}function M(a,b){var c,d;return b._isUTC?(c=b.clone(),d=(vb.isMoment(a)||x(a)?+a:+vb(a))-+c,c._d.setTime(+c._d+d),vb.updateOffset(c,!1),c):vb(a).local()}function N(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function O(a){var b,c,d=a.match(Pb);for(b=0,c=d.length;c>b;b++)d[b]=rc[d[b]]?rc[d[b]]:N(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function P(a,b){return a.isValid()?(b=Q(b,a.localeData()),nc[b]||(nc[b]=O(b)),nc[b](a)):a.localeData().invalidDate()}function Q(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Qb.lastIndex=0;d>=0&&Qb.test(a);)a=a.replace(Qb,c),Qb.lastIndex=0,d-=1;return a}function R(a,b){var c,d=b._strict;switch(a){case"Q":return _b;case"DDDD":return bc;case"YYYY":case"GGGG":case"gggg":return d?cc:Tb;case"Y":case"G":case"g":return ec;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?dc:Ub;case"S":if(d)return _b;case"SS":if(d)return ac;case"SSS":if(d)return bc;case"DDD":return Sb;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Wb;case"a":case"A":return b._locale._meridiemParse;case"x":return Zb;case"X":return $b;case"Z":case"ZZ":return Xb;case"T":return Yb;case"SSSS":return Vb;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?ac:Rb;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Rb;case"Do":return d?b._locale._ordinalParse:b._locale._ordinalParseLenient;default:return c=new RegExp($(Z(a.replace("\\","")),"i"))}}function S(a){a=a||"";var b=a.match(Xb)||[],c=b[b.length-1]||[],d=(c+"").match(jc)||["-",0,0],e=+(60*d[1])+C(d[2]);return"+"===d[0]?e:-e}function T(a,b,c){var d,e=c._a;switch(a){case"Q":null!=b&&(e[Db]=3*(C(b)-1));break;case"M":case"MM":null!=b&&(e[Db]=C(b)-1);break;case"MMM":case"MMMM":d=c._locale.monthsParse(b,a,c._strict),null!=d?e[Db]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[Eb]=C(b));break;case"Do":null!=b&&(e[Eb]=C(parseInt(b.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=C(b));break;case"YY":e[Cb]=vb.parseTwoDigitYear(b);break;case"YYYY":case"YYYYY":case"YYYYYY":e[Cb]=C(b);break;case"a":case"A":c._meridiem=b;break;case"h":case"hh":c._pf.bigHour=!0;case"H":case"HH":e[Fb]=C(b);break;case"m":case"mm":e[Gb]=C(b);break;case"s":case"ss":e[Hb]=C(b);break;case"S":case"SS":case"SSS":case"SSSS":e[Ib]=C(1e3*("0."+b));break;case"x":c._d=new Date(C(b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=S(b);break;case"dd":case"ddd":case"dddd":d=c._locale.weekdaysParse(b),null!=d?(c._w=c._w||{},c._w.d=d):c._pf.invalidWeekday=b;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":a=a.substr(0,1);case"gggg":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=C(b));break;case"gg":case"GG":c._w=c._w||{},c._w[a]=vb.parseTwoDigitYear(b)}}function U(a){var c,d,e,f,g,h,i;c=a._w,null!=c.GG||null!=c.W||null!=c.E?(g=1,h=4,d=b(c.GG,a._a[Cb],jb(vb(),1,4).year),e=b(c.W,1),f=b(c.E,1)):(g=a._locale._week.dow,h=a._locale._week.doy,d=b(c.gg,a._a[Cb],jb(vb(),g,h).year),e=b(c.w,1),null!=c.d?(f=c.d,g>f&&++e):f=null!=c.e?c.e+g:g),i=kb(d,e,f,h,g),a._a[Cb]=i.year,a._dayOfYear=i.dayOfYear}function V(a){var c,d,e,f,g=[];if(!a._d){for(e=X(a),a._w&&null==a._a[Eb]&&null==a._a[Db]&&U(a),a._dayOfYear&&(f=b(a._a[Cb],e[Cb]),a._dayOfYear>F(f)&&(a._pf._overflowDayOfYear=!0),d=fb(f,0,a._dayOfYear),a._a[Db]=d.getUTCMonth(),a._a[Eb]=d.getUTCDate()),c=0;3>c&&null==a._a[c];++c)a._a[c]=g[c]=e[c];
for(;7>c;c++)a._a[c]=g[c]=null==a._a[c]?2===c?1:0:a._a[c];24===a._a[Fb]&&0===a._a[Gb]&&0===a._a[Hb]&&0===a._a[Ib]&&(a._nextDay=!0,a._a[Fb]=0),a._d=(a._useUTC?fb:eb).apply(null,g),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[Fb]=24)}}function W(a){var b;a._d||(b=A(a._i),a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],V(a))}function X(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function Y(b){if(b._f===vb.ISO_8601)return void ab(b);b._a=[],b._pf.empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,j=0;for(e=Q(b._f,b._locale).match(Pb)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(R(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&b._pf.unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),j+=d.length),rc[f]?(d?b._pf.empty=!1:b._pf.unusedTokens.push(f),T(f,d,b)):b._strict&&!d&&b._pf.unusedTokens.push(f);b._pf.charsLeftOver=i-j,h.length>0&&b._pf.unusedInput.push(h),b._pf.bigHour===!0&&b._a[Fb]<=12&&(b._pf.bigHour=a),b._a[Fb]=k(b._locale,b._a[Fb],b._meridiem),V(b),H(b)}function Z(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function $(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function _(a){var b,c,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(0/0));for(f=0;f<a._f.length;f++)g=0,b=p({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._pf=d(),b._f=a._f[f],Y(b),I(b)&&(g+=b._pf.charsLeftOver,g+=10*b._pf.unusedTokens.length,b._pf.score=g,(null==e||e>g)&&(e=g,c=b));o(a,c||b)}function ab(a){var b,c,d=a._i,e=fc.exec(d);if(e){for(a._pf.iso=!0,b=0,c=hc.length;c>b;b++)if(hc[b][1].exec(d)){a._f=hc[b][0]+(e[6]||" ");break}for(b=0,c=ic.length;c>b;b++)if(ic[b][1].exec(d)){a._f+=ic[b][0];break}d.match(Xb)&&(a._f+="Z"),Y(a)}else a._isValid=!1}function bb(a){ab(a),a._isValid===!1&&(delete a._isValid,vb.createFromInputFallback(a))}function cb(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function db(b){var c,d=b._i;d===a?b._d=new Date:x(d)?b._d=new Date(+d):null!==(c=Mb.exec(d))?b._d=new Date(+c[1]):"string"==typeof d?bb(b):w(d)?(b._a=cb(d.slice(0),function(a){return parseInt(a,10)}),V(b)):"object"==typeof d?W(b):"number"==typeof d?b._d=new Date(d):vb.createFromInputFallback(b)}function eb(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function fb(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function gb(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function hb(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function ib(a,b,c){var d=vb.duration(a).abs(),e=Ab(d.as("s")),f=Ab(d.as("m")),g=Ab(d.as("h")),h=Ab(d.as("d")),i=Ab(d.as("M")),j=Ab(d.as("y")),k=e<oc.s&&["s",e]||1===f&&["m"]||f<oc.m&&["mm",f]||1===g&&["h"]||g<oc.h&&["hh",g]||1===h&&["d"]||h<oc.d&&["dd",h]||1===i&&["M"]||i<oc.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,hb.apply({},k)}function jb(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=vb(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function kb(a,b,c,d,e){var f,g,h=fb(a,0,1).getUTCDay();return h=0===h?7:h,c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:F(a-1)+g}}function lb(b){var c,d=b._i,e=b._f;return b._locale=b._locale||vb.localeData(b._l),null===d||e===a&&""===d?vb.invalid({nullInput:!0}):("string"==typeof d&&(b._i=d=b._locale.preparse(d)),vb.isMoment(d)?new m(d,!0):(e?w(e)?_(b):Y(b):db(b),c=new m(b),c._nextDay&&(c.add(1,"d"),c._nextDay=a),c))}function mb(a,b){var c,d;if(1===b.length&&w(b[0])&&(b=b[0]),!b.length)return vb();for(c=b[0],d=1;d<b.length;++d)b[d][a](c)&&(c=b[d]);return c}function nb(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),D(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function ob(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function pb(a,b,c){return"Month"===b?nb(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)}function qb(a,b){return function(c){return null!=c?(pb(this,a,c),vb.updateOffset(this,b),this):ob(this,a)}}function rb(a){return 400*a/146097}function sb(a){return 146097*a/400}function tb(a){vb.duration.fn[a]=function(){return this._data[a]}}function ub(a){"undefined"==typeof ender&&(wb=zb.moment,zb.moment=a?f("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",vb):vb)}for(var vb,wb,xb,yb="2.9.0",zb="undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,Ab=Math.round,Bb=Object.prototype.hasOwnProperty,Cb=0,Db=1,Eb=2,Fb=3,Gb=4,Hb=5,Ib=6,Jb={},Kb=[],Lb="undefined"!=typeof module&&module&&module.exports,Mb=/^\/?Date\((\-?\d+)/i,Nb=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ob=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Pb=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Qb=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Rb=/\d\d?/,Sb=/\d{1,3}/,Tb=/\d{1,4}/,Ub=/[+\-]?\d{1,6}/,Vb=/\d+/,Wb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Xb=/Z|[\+\-]\d\d:?\d\d/gi,Yb=/T/i,Zb=/[\+\-]?\d+/,$b=/[\+\-]?\d+(\.\d{1,3})?/,_b=/\d/,ac=/\d\d/,bc=/\d{3}/,cc=/\d{4}/,dc=/[+-]?\d{6}/,ec=/[+-]?\d+/,fc=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,gc="YYYY-MM-DDTHH:mm:ssZ",hc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ic=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],jc=/([\+\-]|\d\d)/gi,kc=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),lc={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},mc={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},nc={},oc={s:45,m:45,h:22,d:26,M:11},pc="DDD w W M D d".split(" "),qc="M D H h m s w W".split(" "),rc={M:function(){return this.month()+1},MMM:function(a){return this.localeData().monthsShort(this,a)},MMMM:function(a){return this.localeData().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.localeData().weekdaysMin(this,a)},ddd:function(a){return this.localeData().weekdaysShort(this,a)},dddd:function(a){return this.localeData().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return r(this.year()%100,2)},YYYY:function(){return r(this.year(),4)},YYYYY:function(){return r(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+r(Math.abs(a),6)},gg:function(){return r(this.weekYear()%100,2)},gggg:function(){return r(this.weekYear(),4)},ggggg:function(){return r(this.weekYear(),5)},GG:function(){return r(this.isoWeekYear()%100,2)},GGGG:function(){return r(this.isoWeekYear(),4)},GGGGG:function(){return r(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return C(this.milliseconds()/100)},SS:function(){return r(C(this.milliseconds()/10),2)},SSS:function(){return r(this.milliseconds(),3)},SSSS:function(){return r(this.milliseconds(),3)},Z:function(){var a=this.utcOffset(),b="+";return 0>a&&(a=-a,b="-"),b+r(C(a/60),2)+":"+r(C(a)%60,2)},ZZ:function(){var a=this.utcOffset(),b="+";return 0>a&&(a=-a,b="-"),b+r(C(a/60),2)+r(C(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},sc={},tc=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],uc=!1;pc.length;)xb=pc.pop(),rc[xb+"o"]=i(rc[xb],xb);for(;qc.length;)xb=qc.pop(),rc[xb+xb]=h(rc[xb],2);rc.DDDD=h(rc.DDD,3),o(l.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=vb.utc([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=vb([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.apply(b,[c]):d},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(a){return a},postformat:function(a){return a},week:function(a){return jb(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"",invalidDate:function(){return this._invalidDate}}),vb=function(b,c,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=b,g._f=c,g._l=e,g._strict=f,g._isUTC=!1,g._pf=d(),lb(g)},vb.suppressDeprecationWarnings=!1,vb.createFromInputFallback=f("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),vb.min=function(){var a=[].slice.call(arguments,0);return mb("isBefore",a)},vb.max=function(){var a=[].slice.call(arguments,0);return mb("isAfter",a)},vb.utc=function(b,c,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=b,g._f=c,g._strict=f,g._pf=d(),lb(g).utc()},vb.unix=function(a){return vb(1e3*a)},vb.duration=function(a,b){var d,e,f,g,h=a,i=null;return vb.isDuration(a)?h={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(h={},b?h[b]=a:h.milliseconds=a):(i=Nb.exec(a))?(d="-"===i[1]?-1:1,h={y:0,d:C(i[Eb])*d,h:C(i[Fb])*d,m:C(i[Gb])*d,s:C(i[Hb])*d,ms:C(i[Ib])*d}):(i=Ob.exec(a))?(d="-"===i[1]?-1:1,f=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*d},h={y:f(i[2]),M:f(i[3]),d:f(i[4]),h:f(i[5]),m:f(i[6]),s:f(i[7]),w:f(i[8])}):null==h?h={}:"object"==typeof h&&("from"in h||"to"in h)&&(g=t(vb(h.from),vb(h.to)),h={},h.ms=g.milliseconds,h.M=g.months),e=new n(h),vb.isDuration(a)&&c(a,"_locale")&&(e._locale=a._locale),e},vb.version=yb,vb.defaultFormat=gc,vb.ISO_8601=function(){},vb.momentProperties=Kb,vb.updateOffset=function(){},vb.relativeTimeThreshold=function(b,c){return oc[b]===a?!1:c===a?oc[b]:(oc[b]=c,!0)},vb.lang=f("moment.lang is deprecated. Use moment.locale instead.",function(a,b){return vb.locale(a,b)}),vb.locale=function(a,b){var c;return a&&(c="undefined"!=typeof b?vb.defineLocale(a,b):vb.localeData(a),c&&(vb.duration._locale=vb._locale=c)),vb._locale._abbr},vb.defineLocale=function(a,b){return null!==b?(b.abbr=a,Jb[a]||(Jb[a]=new l),Jb[a].set(b),vb.locale(a),Jb[a]):(delete Jb[a],null)},vb.langData=f("moment.langData is deprecated. Use moment.localeData instead.",function(a){return vb.localeData(a)}),vb.localeData=function(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return vb._locale;if(!w(a)){if(b=L(a))return b;a=[a]}return K(a)},vb.isMoment=function(a){return a instanceof m||null!=a&&c(a,"_isAMomentObject")},vb.isDuration=function(a){return a instanceof n};for(xb=tc.length-1;xb>=0;--xb)B(tc[xb]);vb.normalizeUnits=function(a){return z(a)},vb.invalid=function(a){var b=vb.utc(0/0);return null!=a?o(b._pf,a):b._pf.userInvalidated=!0,b},vb.parseZone=function(){return vb.apply(null,arguments).parseZone()},vb.parseTwoDigitYear=function(a){return C(a)+(C(a)>68?1900:2e3)},vb.isDate=x,o(vb.fn=m.prototype,{clone:function(){return vb(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=vb(this).utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():P(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):P(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return I(this)},isDSTShifted:function(){return this._a?this.isValid()&&y(this._a,(this._isUTC?vb.utc(this._a):vb(this._a)).toArray())>0:!1},parsingFlags:function(){return o({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(a){return this.utcOffset(0,a)},local:function(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(a){var b=P(this,a||vb.defaultFormat);return this.localeData().postformat(b)},add:u(1,"add"),subtract:u(-1,"subtract"),diff:function(a,b,c){var d,e,f=M(a,this),g=6e4*(f.utcOffset()-this.utcOffset());return b=z(b),"year"===b||"month"===b||"quarter"===b?(e=j(this,f),"quarter"===b?e/=3:"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:q(e)},from:function(a,b){return vb.duration({to:this,from:a}).locale(this.locale()).humanize(!b)},fromNow:function(a){return this.from(vb(),a)},calendar:function(a){var b=a||vb(),c=M(b,this).startOf("day"),d=this.diff(c,"days",!0),e=-6>d?"sameElse":-1>d?"lastWeek":0>d?"lastDay":1>d?"sameDay":2>d?"nextDay":7>d?"nextWeek":"sameElse";return this.format(this.localeData().calendar(e,this,vb(b)))},isLeapYear:function(){return G(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=gb(a,this.localeData()),this.add(a-b,"d")):b},month:qb("Month",!0),startOf:function(a){switch(a=z(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(b){return b=z(b),b===a||"millisecond"===b?this:this.startOf(b).add(1,"isoWeek"===b?"week":b).subtract(1,"ms")},isAfter:function(a,b){var c;return b=z("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=vb.isMoment(a)?a:vb(a),+this>+a):(c=vb.isMoment(a)?+a:+vb(a),c<+this.clone().startOf(b))},isBefore:function(a,b){var c;return b=z("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=vb.isMoment(a)?a:vb(a),+a>+this):(c=vb.isMoment(a)?+a:+vb(a),+this.clone().endOf(b)<c)},isBetween:function(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)},isSame:function(a,b){var c;return b=z(b||"millisecond"),"millisecond"===b?(a=vb.isMoment(a)?a:vb(a),+this===+a):(c=+vb(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))},min:f("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(a){return a=vb.apply(null,arguments),this>a?this:a}),max:f("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(a){return a=vb.apply(null,arguments),a>this?this:a}),zone:f("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}),utcOffset:function(a,b){var c,d=this._offset||0;return null!=a?("string"==typeof a&&(a=S(a)),Math.abs(a)<16&&(a=60*a),!this._isUTC&&b&&(c=this._dateUtcOffset()),this._offset=a,this._isUTC=!0,null!=c&&this.add(c,"m"),d!==a&&(!b||this._changeInProgress?v(this,vb.duration(a-d,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,vb.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?d:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(S(this._i)),this},hasAlignedHourOffset:function(a){return a=a?vb(a).utcOffset():0,(this.utcOffset()-a)%60===0},daysInMonth:function(){return D(this.year(),this.month())},dayOfYear:function(a){var b=Ab((vb(this).startOf("day")-vb(this).startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=jb(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")},isoWeekYear:function(a){var b=jb(this,1,4).year;return null==a?b:this.add(a-b,"y")},week:function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")},isoWeek:function(a){var b=jb(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")},weekday:function(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return E(this.year(),1,4)},weeksInYear:function(){var a=this.localeData()._week;return E(this.year(),a.dow,a.doy)},get:function(a){return a=z(a),this[a]()},set:function(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else a=z(a),"function"==typeof this[a]&&this[a](b);return this},locale:function(b){var c;return b===a?this._locale._abbr:(c=vb.localeData(b),null!=c&&(this._locale=c),this)},lang:f("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(b){return b===a?this.localeData():this.locale(b)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),vb.fn.millisecond=vb.fn.milliseconds=qb("Milliseconds",!1),vb.fn.second=vb.fn.seconds=qb("Seconds",!1),vb.fn.minute=vb.fn.minutes=qb("Minutes",!1),vb.fn.hour=vb.fn.hours=qb("Hours",!0),vb.fn.date=qb("Date",!0),vb.fn.dates=f("dates accessor is deprecated. Use date instead.",qb("Date",!0)),vb.fn.year=qb("FullYear",!0),vb.fn.years=f("years accessor is deprecated. Use year instead.",qb("FullYear",!0)),vb.fn.days=vb.fn.day,vb.fn.months=vb.fn.month,vb.fn.weeks=vb.fn.week,vb.fn.isoWeeks=vb.fn.isoWeek,vb.fn.quarters=vb.fn.quarter,vb.fn.toJSON=vb.fn.toISOString,vb.fn.isUTC=vb.fn.isUtc,o(vb.duration.fn=n.prototype,{_bubble:function(){var a,b,c,d=this._milliseconds,e=this._days,f=this._months,g=this._data,h=0;g.milliseconds=d%1e3,a=q(d/1e3),g.seconds=a%60,b=q(a/60),g.minutes=b%60,c=q(b/60),g.hours=c%24,e+=q(c/24),h=q(rb(e)),e-=q(sb(h)),f+=q(e/30),e%=30,h+=q(f/12),f%=12,g.days=e,g.months=f,g.years=h},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return q(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*C(this._months/12)},humanize:function(a){var b=ib(this,!a,this.localeData());return a&&(b=this.localeData().pastFuture(+this,b)),this.localeData().postformat(b)},add:function(a,b){var c=vb.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=vb.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=z(a),this[a.toLowerCase()+"s"]()},as:function(a){var b,c;if(a=z(a),"month"===a||"year"===a)return b=this._days+this._milliseconds/864e5,c=this._months+12*rb(b),"month"===a?c:c/12;switch(b=this._days+Math.round(sb(this._months/12)),a){case"week":return b/7+this._milliseconds/6048e5;case"day":return b+this._milliseconds/864e5;case"hour":return 24*b+this._milliseconds/36e5;case"minute":return 24*b*60+this._milliseconds/6e4;case"second":return 24*b*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*b*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+a)}},lang:vb.fn.lang,locale:vb.fn.locale,toIsoString:f("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),vb.duration.fn.toString=vb.duration.fn.toISOString;for(xb in kc)c(kc,xb)&&tb(xb.toLowerCase());vb.duration.fn.asMilliseconds=function(){return this.as("ms")},vb.duration.fn.asSeconds=function(){return this.as("s")},vb.duration.fn.asMinutes=function(){return this.as("m")},vb.duration.fn.asHours=function(){return this.as("h")},vb.duration.fn.asDays=function(){return this.as("d")},vb.duration.fn.asWeeks=function(){return this.as("weeks")},vb.duration.fn.asMonths=function(){return this.as("M")},vb.duration.fn.asYears=function(){return this.as("y")},vb.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===C(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),function(a){a(vb)}(function(a){return a.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(a){return/^nm$/i.test(a)},meridiem:function(a,b,c){return 12>a?c?"vm":"VM":c?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[MÃ´re om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(a){return a+(1===a||8===a||a>=20?"ste":"de")},week:{dow:1,doy:4}})}),function(a){a(vb)}(function(a){return a.defineLocale("zh-cn",{months:"ä¸æ_äºæ_ä¸æ_åæ_äºæ_å­æ_ä¸æ_å«æ_ä¹æ_åæ_åä¸æ_åäºæ".split("_"),monthsShort:"1æ_2æ_3æ_4æ_5æ_6æ_7æ_8æ_9æ_10æ_11æ_12æ".split("_"),weekdays:"æææ¥_ææä¸_ææäº_ææä¸_ææå_ææäº_ææå­".split("_"),weekdaysShort:"å¨æ¥_å¨ä¸_å¨äº_å¨ä¸_å¨å_å¨äº_å¨å­".split("_"),weekdaysMin:"æ¥_ä¸_äº_ä¸_å_äº_å­".split("_"),longDateFormat:{LT:"Ahç¹mm",LTS:"Ahç¹måsç§",L:"YYYY-MM-DD",LL:"YYYYå¹´MMMDæ¥",LLL:"YYYYå¹´MMMDæ¥LT",LLLL:"YYYYå¹´MMMDæ¥ddddLT",l:"YYYY-MM-DD",ll:"YYYYå¹´MMMDæ¥",lll:"YYYYå¹´MMMDæ¥LT",llll:"YYYYå¹´MMMDæ¥ddddLT"},meridiemParse:/åæ¨|æ©ä¸|ä¸å|ä¸­å|ä¸å|æä¸/,meridiemHour:function(a,b){return 12===a&&(a=0),"åæ¨"===b||"æ©ä¸"===b||"ä¸å"===b?a:"ä¸å"===b||"æä¸"===b?a+12:a>=11?a:a+12},meridiem:function(a,b){var c=100*a+b;return 600>c?"åæ¨":900>c?"æ©ä¸":1130>c?"ä¸å":1230>c?"ä¸­å":1800>c?"ä¸å":"æä¸"},calendar:{sameDay:function(){return 0===this.minutes()?"[ä»å¤©]Ah[ç¹æ´]":"[ä»å¤©]LT"},nextDay:function(){return 0===this.minutes()?"[æå¤©]Ah[ç¹æ´]":"[æå¤©]LT"},lastDay:function(){return 0===this.minutes()?"[æ¨å¤©]Ah[ç¹æ´]":"[æ¨å¤©]LT"},nextWeek:function(){var b,c;return b=a().startOf("week"),c=this.unix()-b.unix()>=604800?"[ä¸]":"[æ¬]",0===this.minutes()?c+"dddAhç¹æ´":c+"dddAhç¹mm"},lastWeek:function(){var b,c;return b=a().startOf("week"),c=this.unix()<b.unix()?"[ä¸]":"[æ¬]",0===this.minutes()?c+"dddAhç¹æ´":c+"dddAhç¹mm"},sameElse:"LL"},ordinalParse:/\d{1,2}(æ¥|æ|å¨)/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"æ¥";case"M":return a+"æ";case"w":case"W":return a+"å¨";default:return a}},relativeTime:{future:"%så",past:"%så",s:"å ç§",m:"1åé",mm:"%dåé",h:"1å°æ¶",hh:"%då°æ¶",d:"1å¤©",dd:"%då¤©",M:"1ä¸ªæ",MM:"%dä¸ªæ",y:"1å¹´",yy:"%då¹´"},week:{dow:1,doy:4}})}),vb.locale("en"),Lb?module.exports=vb:"function"==typeof define&&define.amd?(define(function(a,b,c){return c.config&&c.config()&&c.config().noGlobal===!0&&(zb.moment=wb),vb}),ub(!0)):ub()}.call(this),+function(a){"use strict";a.showMessage=function(b){var c=a('<div class="alert alert-'+b.type+' alert-dismissible"></div>'),d=a('<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>');c.append(d).append(b.msg),c.css({position:"fixed",display:"block"}),b.pos?b.pos.top&&b.pos.left?c.css({top:b.pos.top,left:b.pos.left}):b.pos.top&&b.pos.right?c.css({top:b.pos.top,right:b.pos.right}):b.pos.bottom&&b.pos.left?c.css({bottom:b.pos.bottom,left:b.pos.left}):b.pos.bottom&&b.pos.right?c.css({bottom:b.pos.bottom,right:b.pos.right}):b.pos.top?c.css({left:b.pos.left,top:10}):b.pos.bottom?c.css({bottom:b.pos.bottom,left:10}):b.pos.left?c.css({left:b.pos.left,top:10}):b.pos.right&&c.css({right:b.pos.right,top:10}):c.css({bottom:10,right:10}),c.css("z-index",99),setTimeout(function(){c.fadeOut("slow")},3e3),a(document.body).append(c)},a.dialog=function(b){function c(){f.css({margin:"0px",left:(window.innerWidth-p)/2,top:(window.innerHeight-q)/2,right:(window.innerWidth-p)/2,bottom:(window.innerHeight-q)/2})}function d(){f.css({width:f[0].offsetWidth,height:f[0].offsetHeight})}function e(){f.css({width:"auto",height:"auto",left:f.offset().left,top:f.offset().top,right:window.innerWidth-f.offset().left-p,bottom:window.innerHeight-f.offset().top-q})}var f=a('<div class="move-dialog "><div class="move-alert alert alert-'+b.type+' alert-dismissible"></div></div>'),g=a('<button type="button" class="close"  aria-label="Close"><span aria-hidden="true">&times;</span></button>'),h=a("<h4>"+trans("dialog.info_dialog","æç¤ºçªå£")+"</h4>");if(b.url)var i=a('<p class="dialog_p"><iframe class="dialog_iframe" src='+b.url+"></iframe></p>");else{var i=a('<p style="position: absolute;top: 50px;bottom: 20px;overflow: auto;left: 30px;right: 25px;"></p>');i.append(b.msg)}var j,k,l,m,n,o,p,q;(b.width||b.height)&&f.css({width:b.width,height:b.height}),f.find(".alert").append(g).append(h).append(i).append(j),f.wrap("<div style='padding:5px'></div>"),b.backdrop&&(a(document.body).append('<div class="alert-backdrop" role="alert-dialog-backdrop"></div>'),f.on("close.bs.alert",function(){a('.alert-backdrop[role="alert-dialog-backdrop"]').remove()})),f.find('[data-role="okbtn"]').on("click.alert.ok",b.okfn),b.cancelfn&&"function"==typeof b.cancelfn&&(f.find('[data-role="cancelbtn"]').on("click",b.cancelfn),f.find('[aria-hidden="true"]').on("click",b.cancelfn)),f.css("z-index",99),a(document.body).append(f),p=f[0].offsetWidth,q=f[0].offsetHeight,c(),g.on("click",function(){var b;(b=f).length&&b.remove(),(b=a(".alert-backdrop")).length&&b.remove()}),b.movable&&(f.on("mousedown",function(a){l=a.clientX-f.position().left,m=a.clientY-f.position().top,11>n&&12>o?(e(),k=9,f.css({cursor:"se-resize"})):n>p-20&&o>q-10?(e(),k=8,f.css({cursor:"se-resize"})):11>n&&o>q-10?(e(),k=7,f.css({cursor:"ne-resize"})):n>p-20&&12>o?(e(),k=6,f.css({cursor:"ne-resize"})):12>n?(e(),k=5,f.css({cursor:"e-resize"})):n>p-20?(e(),k=4,f.css({cursor:"e-resize"})):11>o?(k=3,e(),f.css({cursor:"n-resize"})):o>q-10?(k=2,e(),f.css({cursor:"n-resize"})):(k=1,d(),f.css({cursor:"auto"}))}),a(document).on("mousemove",function(a){return n=a.clientX-f.position().left,o=a.clientY-f.position().top,1==k?void f.css({left:a.clientX-l,top:a.clientY-m,cursor:"all-scroll"}):2==k?void f.css({bottom:window.innerHeight-a.clientY-20}):3==k?void f.css({top:a.clientY-20}):4==k?void f.css({right:window.innerWidth-a.clientX-20}):5==k?void f.css({left:a.clientX-20}):6==k?void f.css({top:a.clientY-20,right:window.innerWidth-a.clientX-20}):7==k?void f.css({left:a.clientX-20,bottom:window.innerHeight-a.clientY-20}):8==k?void f.css({bottom:window.innerHeight-a.clientY-20,right:window.innerWidth-a.clientX-20}):9==k?void f.css({top:a.clientY-20,left:a.clientX-20}):void f.css(11>n&&12>o||n>p-20&&o>q-10?{cursor:"se-resize"}:11>n&&o>q-10||n>p-20&&12>o?{cursor:"ne-resize"}:12>n||n>p-20?{cursor:"e-resize"}:11>o||o>q-10?{cursor:"n-resize"}:{cursor:"auto"})
}),a(document).off("mouseup").on("mouseup",function(){k=!1,f.css({cursor:"auto"}),p=f[0].offsetWidth,q=f[0].offsetHeight}))},a.showMessageDialog=function(b){if(b.type)var c=a('<div class="alert alert-'+b.type+' alert-dismissible alert-dialog"></div>');else{b.type="warning";var c=a('<div class="alert alert-'+b.type+' alert-dismissible alert-dialog"></div>')}var d=a('<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>');if(b.title)var e=a("<h4>"+b.title+"</h4>");else var e=a("<h4>æç¤º</h4>");var f,g=a('<div class="alert-content"><p>'+b.msg+"</p></div>");f=a("danger"==b.type||"warning"==b.type?'<div class="alert-dialog-footer"><div class="col-md-4 diag_detail" ></div><div class="col-md-4" ><button type="button" data-role="okbtn" data-dismiss="alert" class="btn btn-danger btn-block">ç¡®å®</button></div><div class="col-md-4"><button type="button" data-dismiss="alert" data-role="cancelbtn" class="btn btn-default btn-block">åæ¶</button></div></div>':'<div class="alert-dialog-footer"><div class="col-md-4"  ></div><div class="col-md-4 diag_detail" ></div><div class="col-md-4" ><button type="button" data-role="okbtn" data-dismiss="alert" class="btn btn-danger btn-block">ç¡®å®</button></div>'),c.append(d).append(e).append(g).append(f),b.detail&&(a(c).find(".diag_detail").append('<button type="button"  class="btn btn-block">è¯¦ç»</button>'),c.on("click",".diag_detail",function(){a(".detail_p").length>0?a(".detail_p").remove():c.append("<p class='detail_p'>"+b.detail+"</p>")})),b.backdrop&&(a(document.body).append('<div class="alert-backdrop" role="alert-dialog-backdrop"></div>'),c.on("close.bs.alert",function(){a('.alert-backdrop[role="alert-dialog-backdrop"]').remove()})),c.find('[data-role="okbtn"]').on("click.alert.ok",b.okfn),b.cancelfn&&"function"==typeof b.cancelfn&&(c.find('[data-role="cancelbtn"]').on("click",b.cancelfn),c.find('[aria-hidden="true"]').on("click",b.cancelfn)),c.css("z-index",99),a(document.body).append(c)},a.showWaiting=function(){a(document.body).append('<div class="alert alert-waiting"><i class="fa fa-spinner fa-spin"></i></div>').append('<div class="alert-backdrop" role="waiting-backdrop"></div>')},a.removeWaiting=function(){var b;(b=a(".alert.alert-waiting")).length&&b.remove(),(b=a('.alert-backdrop[role="waiting-backdrop"]')).length&&b.remove()}}(jQuery),+function(a){"use strict";function b(a){for(var b=a.offsetLeft||0,c=a.offsetTop||0;a=a.offsetParent;)b+=a.offsetLeft,c+=a.offsetTop;return{x:b,y:c}}function c(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return c;return-1}function d(b){if(1==this.length){var c=a(this),d=c.data("u.autocomplete"),f="object"==typeof b&&b;return d||c.data("u.autocomplete",d=new e(this,f)),d}}var e=function(b,c){this.$input=a(b),this.options=a.extend({},e.DEFAULTS,c),this.requestIndex=0,this.pending=0;var d=this;this.options.inputClass&&this.$input.addClass(this.options.inputClass);var f=document.createElement("div");this.$results=a(f),this.$results.hide().addClass(this.options.resultsClass).css("position","absolute"),this.options.width>0&&this.$results.css("width",this.options.width),a("body").append(f),this.timeout=null,this.prev="",this.active=-1,this.cache={},this.keyb=!1,this.hasFocus=!1,this.lastKeyPressCode=null,this._initSource(),this.$input.keydown(function(a){switch(d.lastKeyPressCode=a.keyCode,a.keyCode){case 38:a.preventDefault(),d.moveSelect(-1);break;case 40:a.preventDefault(),d.moveSelect(1);break;case 9:case 13:d.selectCurrent()&&(d.$input.get(0).blur(),a.preventDefault());break;default:d.active=-1,d.timeout&&clearTimeout(d.timeout),d.timeout=setTimeout(function(){d.onChange()},d.options.delay)}}).focus(function(){d.hasFocus=!0}).blur(function(){d.hasFocus=!1,d.hideResults()}),this.hideResultsNow()};e.DEFAULTS={inputClass:"ac_input",resultsClass:"ac_results",lineSeparator:"\n",cellSeparator:"|",minChars:1,delay:400,matchCase:0,matchSubset:1,matchContains:0,cacheLength:1,mustMatch:0,extraParams:{},loadingClass:"ac_loading",selectFirst:!1,selectOnly:!1,maxItemsToShow:-1,autoFill:!1,width:0,source:null,select:null},e.fn=e.prototype,e.fn.flushCache=function(){this.cache={},this.cache.data={},this.cache.length=0},e.fn._initSource=function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(a,c){c(d.filterData(a.term,b))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort(),d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},e.fn._response=function(){var b=++this.requestIndex;return a.proxy(function(a){b===this.requestIndex&&this.__response(a),this.pending--,!this.pending},this)},e.fn.__response=function(a){a&&this.receiveData2(a),this.showResults()},e.fn.onChange=function(){if(46==this.lastKeyPressCode||this.lastKeyPressCode>8&&this.lastKeyPressCode<32)return this.$results.hide();var a=this.$input.val();a!=this.prev&&(this.prev=a,a.length>=this.options.minChars?(this.$input.addClass(this.options.loadingClass),this.pending++,this.source({term:a},this._response())):(this.$input.removeClass(this.options.loadingClass),this.$results.hide()))},e.fn.moveSelect=function(b){var c=a("li",this.$results[0]);c&&(this.active+=b,this.active<0?this.active=0:this.active>=c.size()&&(this.active=c.size()-1),c.removeClass("ac_over"),a(c[this.active]).addClass("ac_over"))},e.fn.selectCurrent=function(){var b=a("li.ac_over",this.$results[0])[0];if(!b){var c=a("li",this.$results[0]);this.options.selectOnly?1==c.length&&(b=c[0]):this.options.selectFirst&&(b=c[0])}return b?(this.selectItem(b),!0):!1},e.fn.selectItem=function(b){var c=this;b||(b=document.createElement("li"),b.selectValue="");var d=a.trim(b.selectValue?b.selectValue:b.innerHTML);this.lastSelected=d,this.prev=d,this.$results.html(""),this.$input.val(d),this.hideResultsNow(),this.options.select&&setTimeout(function(){c.options.select(b._item)},1)},e.fn.createSelection=function(a,b){var c=this.$input.get(0);if(c.createTextRange){var d=c.createTextRange();d.collapse(!0),d.moveStart("character",a),d.moveEnd("character",b),d.select()}else c.setSelectionRange?c.setSelectionRange(a,b):c.selectionStart&&(c.selectionStart=a,c.selectionEnd=b);c.focus()},e.fn.autoFill=function(a){8!=this.lastKeyPressCode&&(this.$input.val(this.$input.val()+a.substring(this.prev.length)),this.createSelection(this.prev.length,a.length))},e.fn.showResults=function(){var a=b(this.$input[0]),c=this.options.width>0?this.options.width:this.$input.width();"100%"===this.options.width?this.$results.css({top:a.y+this.$input[0].offsetHeight+"px",left:a.x+"px"}).show():this.$results.css({width:parseInt(c)+"px",top:a.y+this.$input[0].offsetHeight+"px",left:a.x+"px"}).show()},e.fn.hideResults=function(){var a=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){a.hideResultsNow()},200)},e.fn.hideResultsNow=function(){if(this.timeout&&clearTimeout(this.timeout),this.$input.removeClass(this.options.loadingClass),this.$results.hide(),this.options.mustMatch){var a=this.$input.val();a!=this.lastSelected&&this.selectItem(null)}},e.fn.receiveData=function(a,b){if(b){if(this.$input.removeClass(this.options.loadingClass),this.$results.html(""),!this.hasFocus||0==b.length)return this.hideResultsNow();this.$results.append(this.dataToDom(b)),this.options.autoFill&&this.$input.val().toLowerCase()==a.toLowerCase()&&this.autoFill(b[0][0]),this.showResults()}else this.hideResultsNow()},e.fn.filterData=function(a,b){if(!a)return b;for(var c=[],d=0,e=b.length;e>d;d++){var f=b[d].label;0==f.indexOf(a)&&c.push(b[d])}return c},e.fn.receiveData2=function(a){if(a){if(this.$input.removeClass(this.options.loadingClass),this.$results.html(""),!this.hasFocus||0==a.length)return this.hideResultsNow();this.$results.append(this.dataToDom2(a)),this.showResults()}else this.hideResultsNow()},e.fn.dataToDom2=function(b){var d=document.createElement("ul"),e=b.length,f=this;this.options.maxItemsToShow>0&&this.options.maxItemsToShow<e&&(e=this.options.maxItemsToShow);for(var g=0;e>g;g++){var h=b[g];if(h){var i=document.createElement("li");i.innerHTML=this.options.formatItem?this.options.formatItem(h,g,e):h.label,i.selectValue=h.label,i._item=h,d.appendChild(i),a(i).hover(function(){a("li",d).removeClass("ac_over"),a(this).addClass("ac_over"),f.active=c(a("li",d),a(this).get(0))},function(){a(this).removeClass("ac_over")}).mousedown(function(a){a.preventDefault(),a.stopPropagation(),f.selectItem(this)})}}return d},e.fn.parseData=function(b){if(!b)return null;for(var c=[],d=b.split(this.options.lineSeparator),e=0;e<d.length;e++){var f=a.trim(d[e]);f&&(c[c.length]=f.split(this.options.cellSeparator))}return c},e.fn.dataToDom=function(b){var d=document.createElement("ul"),e=b.length,f=this;this.options.maxItemsToShow>0&&this.options.maxItemsToShow<e&&(e=this.options.maxItemsToShow);for(var g=0;e>g;g++){var h=b[g];if(h){var i=document.createElement("li");this.options.formatItem?(i.innerHTML=this.options.formatItem(h,g,e),i.selectValue=h[0]):(i.innerHTML=h[0],i.selectValue=h[0]);var j=null;if(h.length>1){j=[];for(var k=1;k<h.length;k++)j[j.length]=h[k]}i.extra=j,d.appendChild(i),a(i).hover(function(){a("li",d).removeClass("ac_over"),a(this).addClass("ac_over"),f.active=c(a("li",d),a(this).get(0))},function(){a(this).removeClass("ac_over")}).click(function(a){a.preventDefault(),a.stopPropagation(),f.selectItem(this)})}}return d},e.fn.requestData=function(b){var c=this;this.options.matchCase||(b=b.toLowerCase());var d=this.options.cacheLength?this.loadFromCache(b):null;d?this.receiveData(b,d):"string"==typeof this.options.url&&this.options.url.length>0?a.get(this.makeUrl(b),function(a){a=c.parseData(a),c.addToCache(b,a),c.receiveData(b,a)}):this.$input.removeClass(this.options.loadingClass)},e.fn.makeUrl=function(a){var b=this.options.url+"?q="+encodeURI(a);for(var c in this.options.extraParams)b+="&"+c+"="+encodeURI(this.options.extraParams[c]);return b},e.fn.loadFromCache=function(a){if(!a)return null;if(this.cache.data[a])return this.cache.data[a];if(this.options.matchSubset)for(var b=a.length-1;b>=this.options.minChars;b--){var c=a.substr(0,b),d=this.cache.data[c];if(d){for(var e=[],f=0;f<d.length;f++){var g=d[f],h=g[0];this.matchSubset(h,a)&&(e[e.length]=g)}return e}}return null},e.fn.matchSubset=function(a,b){this.options.matchCase||(a=a.toLowerCase());var c=a.indexOf(b);return-1==c?!1:0==c||this.options.matchContains},e.fn.addToCache=function(a,b){b&&a&&this.options.cacheLength&&(!this.cache.length||this.cache.length>this.options.cacheLength?(this.flushCache(),this.cache.length++):this.cache[a]||this.cache.length++,this.cache.data[a]=b)};var f=a.fn.autocomplete;a.fn.autocomplete=d,a.fn.autocomplete.Constructor=e,a.fn.autocomplete.noConflict=function(){return a.fn.autocomplete=f,this}}($),+function(a){"use strict";function b(b){if(1==this.length){var d=a(this),e=d.data("u.backtop"),f="object"==typeof b&&b;return e||d.data("u.backtop",e=new c(this,f)),e}}var c=function(b,d){var e=this;this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),a(window).scroll(function(){a(document).scrollTop()>e.options.toggleHeight?e.$element.addClass("active"):e.$element.removeClass("active")}),this.$element.click(function(){a(document).scrollTop(0)})};c.DEFAULTS={toggleHeight:100},c.fn=c.prototype;var d=a.fn.backtop;a.fn.backtop=b,a.fn.backtop.Constructor=c,a.fn.backtop.noConflict=function(){return a.fn.backtop=d,this}}(jQuery),+function(a,b){"use strict";function c(a){this.precision=a}function d(a){this.pattern=a}c.prototype.update=function(a){this.precision=a},c.prototype.format=function(b){if(!a.isNumeric(b))return"";for(;"0"==(b+"").charAt(0)&&b.length>1;)b=b.substring(1);var c=b;if(a.isNumeric(this.precision)){var d=parseFloat(b);if(c=(Math.round(d*Math.pow(10,this.precision))/Math.pow(10,this.precision)).toFixed(this.precision),"NaN"==c)return""}return c},d.prototype.update=function(a){this.pattern=a},d.prototype.format=function(a){return b(a).format(this.pattern)},window.DataPlugins=window.DataPlugins?window.DataPlugins:{},window.DataPlugins.formater={getter:function(){},setter:function(b,e){var f=JSON.parse(a(this).attr("data-plugin")),g=window.DataPlugins.formater[b.type];"number"==b.type?g=g?g.update(f.formater.precision):new c(f.formater.precision):"date"==b.type&&(g=g?g.update(f.formater.pattern):new d(f.formater.pattern)),this.showValue=g.format(e),this.trueValue=this.showValue}},a.NumberFormater=c,a.DateFormater=d}($,moment),+function(a){"use strict";function b(a){return a.toString().length>1?a.toString():"0"+a.toString()}String.prototype.trim=function(){return this.replace(/^\s*(\b.*\b|)\s*$/,"$1")},String.prototype.replaceStr=function(a,b){var c=this.split(a);return new String(c.join(b))},String.prototype.lengthb=function(){var a=this.replace(/[^\x00-\xff]/g,"**");return a.length},String.prototype.replaceAll=function(a,b){var c=new RegExp(a,"g");return this.replace(c,b)},String.prototype.substrCH=function(a){for(var b=0,c=0;a>b&&c<this.length;){var d=this.charCodeAt(c);if(d>256&&b==a-1)break;b+=d>256?2:1,c+=1}return this.substr(0,c)},String.prototype.startWith=function(a){return 0==this.indexOf(a)},String.prototype.endWith=function(a){var b=this.indexOf(a);return-1==b?void 0:b==this.length-a.length},String.prototype.format=function(a){if(null!=a){var b=this;for(var c in a){var d=new RegExp("\\<\\#\\="+c+"\\#\\>","gi");b=b.replace(d,a[c]?"null"==a[c]?"":a[c]:"")}}return b},Date.prototype.format=function(a){var c=this.getFullYear(),d=this.getMonth()+1,e=this.getDate(),f=this.getHours(),g=this.getMinutes(),h=this.getSeconds();return a=a||"yyyy-MM-dd hh:mm:ss",a.replace(/yyyy/,c).replace(/yy/,c.toString().substr(2,2)).replace(/MM/,b(d)).replace(/M/,d).replace(/dd/,b(e)).replace(/d/,e).replace(/hh/,b(f)).replace(/h/,f).replace(/mm/,b(g)).replace(/m/,g).replace(/ss/,b(h)).replace(/s/,h)},Date.prototype.getAAAAMMJJ=function(){var a=this.getDate();10>a&&(a="0"+a);var b=this.getMonth()+1;10>b&&(b="0"+b);var c=this.getYear();return c+""+b+a},Date.prototype.getFomatDate=function(){var a=this.getFullYear(),b=this.getMonth()+1;10>b&&(b="0"+b);var c=this.getDate();return 10>c&&(c="0"+c),a+"-"+b+"-"+c},Date.prototype.getFomatDateTime=function(){var a=this.getFullYear(),b=this.getMonth()+1;10>b&&(b="0"+b);var c=this.getDate();10>c&&(c="0"+c);var d=this.getHours();10>d&&(d="0"+d);var e=this.getMinutes();10>e&&(e="0"+e);var f=this.getSeconds();return 10>f&&(f="0"+f),a+"-"+b+"-"+c+" "+d+":"+e+":"+f},Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return b;return-1},Array.prototype.remove=function(a){return 0>a||a>this.length?void alert("index out of bound"):void this.splice(a,1)},Array.prototype.removeEle=function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]==a)return void this.splice(b,1)},Math.UUID=function(){return((new Date).getTime()+"").substr(9)},String.UUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},Array.prototype.insert=function(a,b){return 0>a||a>this.length?void alert("index out of bound"):void this.splice(a,0,b)},Array.prototype.values=function(a){if(null==a)return null;for(var b=new Array,c=0;c<a.length;c++)b.push(this[a[c]]);return b},Array.prototype.clear=function(){this.splice(0,this.length)},window.getRequest=function(a){a||(a=document.location.search);var b=new Object;if(-1!=a.indexOf("?"))for(var c=a.substring(a.indexOf("?")+1),d=c.split("&"),e=0;e<d.length;e++)b[d[e].split("=")[0]]=unescape(d[e].split("=")[1]);return b},window.setCookie=function(a,b,c,d,e,f){var g=a+"="+encodeURIComponent(b);c&&(g+="; expires="+c.toGMTString()),d&&(g+="; path="+d),e&&(g+="; domain="+e),f&&(g+="; secure="+f),document.cookie=g},window.getCookie=function(a){var b="(?:; )?"+a+"=([^;]*);?",c=new RegExp(b);return c.test(document.cookie)?decodeURIComponent(RegExp.$1):null},window.deleteCookie=function(a,b,c){setCookie(a,"",new Date(0),b,c)},window.execIgnoreError=function(a,b,c){try{a.call(b,c)}catch(d){}},window.encodeBase64=function(a){for(var b,c,d,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,g=a.length,h="";g>f;){if(b=255&a[f++],f==g){h+=e.charAt(b>>2),h+=e.charAt((3&b)<<4),h+="==";break}if(c=a[f++],f==g){h+=e.charAt(b>>2),h+=e.charAt((3&b)<<4|(240&c)>>4),h+=e.charAt((15&c)<<2),h+="=";break}d=a[f++],h+=e.charAt(b>>2),h+=e.charAt((3&b)<<4|(240&c)>>4),h+=e.charAt((15&c)<<2|(192&d)>>6),h+=e.charAt(63&d)}return h},a.getFunction=function(b,c){if(!c)return c;if("function"==typeof b[c])return b[c];if("function"==typeof window[c])return window[c];if(-1!=c.indexOf(".")){var d=a.getJSObject(b,c);if("function"==typeof d)return d;if(d=a.getJSObject(window,c),"function"==typeof d)return d}return c},a.getJSObject=function(a,b){if(b){if("object"==typeof b)return b;for(var c=b.split("."),d=a,e=0;e<c.length;e++)if(d=d[c[e]],!d)return null;return d}}}($),AbstractMasker.prototype.format=function(a){if(null==a)return null;var b=this.formatArgument(a);return this.innerFormat(b)},AbstractMasker.prototype.formatArgument=function(){},AbstractMasker.prototype.innerFormat=function(){},AbstractSplitMasker.prototype=new AbstractMasker,AbstractSplitMasker.prototype.elements=new Array,AbstractSplitMasker.prototype.format=function(a){if(null==a)return null;var b=this.formatArgument(a);return this.innerFormat(b)},AbstractSplitMasker.prototype.formatArgument=function(a){return a},AbstractSplitMasker.prototype.innerFormat=function(a){if(null==a||""==a)return new FormatResult(a);this.doSplit();var b="";return b=this.getElementsValue(this.elements,a),new FormatResult(b)},AbstractSplitMasker.prototype.getElementsValue=function(a,b){var c="";if(a instanceof Array)for(var d=0;d<a.length;d++)c+=this.getElementsValue(a[d],b);else a.getValue&&(c=a.getValue(b));return c},AbstractSplitMasker.prototype.getExpress=function(){},AbstractSplitMasker.prototype.doSplit=function(){var a=this.getExpress();(null==this.elements||0==this.elements.length)&&(this.elements=this.doQuotation(a,this.getSeperators(),this.getReplaceds(),0))},AbstractSplitMasker.prototype.doQuotation=function(a,b,c,d){if(0==a.length)return null;var e,f=new Array,g=new RegExp('".*?"',"g"),h=0;do if(e=g.exec(a),null!=e){var i=e.index,j=g.lastIndex;if(i!=j&&i>h){var k=this.doSeperator(a.substring(h,i),b,c,d);null!=k&&k.length>0&&f.push(k)}f.push(new StringElement(a.substring(i+1,j-1))),h=j}while(null!=e);if(h<a.length){var k=this.doSeperator(a.substring(h,a.length),b,c,d);null!=k&&k.length>0&&f.push(k)}return f},AbstractSplitMasker.prototype.doSeperator=function(a,b,c,d){if(d>=b.length){var e=new Array;return e.push(this.getVarElement(a)),e}if(0==a.length)return null;var f,g=0,e=new Array,h=new RegExp(b[d],"g");do if(f=h.exec(a),null!=f){var i=f.index,j=h.lastIndex;if(i!=j){if(i>g){var k=this.doSeperator(a.substring(g,i),b,c,d+1);null!=k&&k.length>0&&e.push(k)}e.push(null!=c[d]?new StringElement(c[d]):new StringElement(a.substring(i,j))),g=j}}while(null!=f);if(g<a.length){var k=this.doSeperator(a.substring(g,a.length),b,c,d+1);null!=k&&k.length>0&&e.push(k)}return e},AddressMasker.prototype=new AbstractSplitMasker,AddressMasker.prototype.update=function(a){this.formatMeta=$.extend({},AddressMasker.DefaultFormatMeta,a)},AddressMasker.prototype.getExpress=function(){return this.formatMeta.express},AddressMasker.prototype.getReplaceds=function(){return[this.formatMeta.separator]},AddressMasker.prototype.getSeperators=function(){return["(\\s)+?"]},AddressMasker.prototype.getVarElement=function(a){var b={};return"C"==a&&(b.getValue=function(a){return a.country}),"S"==a&&(b.getValue=function(a){return a.state}),"T"==a&&(b.getValue=function(a){return a.city}),"D"==a&&(b.getValue=function(a){return a.section}),"R"==a&&(b.getValue=function(a){return a.road}),"P"==a&&(b.getValue=function(a){return a.postcode}),void 0==typeof b.getValue?new StringElement(a):b},AddressMasker.prototype.formatArgument=function(a){return a},NumberMasker.prototype=new AbstractMasker,NumberMasker.prototype.formatMeta=null,NumberMasker.prototype.update=function(a){this.formatMeta=$.extend({},NumberMasker.DefaultFormatMeta,a)},NumberMasker.prototype.innerFormat=function(a){var b,c,d,e;b=a.value,b>0?(c=this.formatMeta.positiveFormat,e=b+""):0>b?(c=this.formatMeta.negativeFormat,e=(b+"").substr(1,(b+"").length-1)):(c=this.formatMeta.positiveFormat,e=b+""),d=e.indexOf("."),e=this.setTheSeperator(e,d),e=this.setTheMark(e,d);var f=null;return 0>b&&this.formatMeta.isNegRed&&(f="FF0000"),new FormatResult(c.replaceAll("n",e),f)},NumberMasker.prototype.setTheMark=function(a,b){var c,d,e;if(!this.formatMeta.isMarkEnable)return a;for(0>=b&&(b=a.length),d=a.charCodeAt(0),c=0,45==d&&(c=1),e=b-3;e>c;)a=a.substr(0,e-0)+this.formatMeta.markSymbol+a.substr(e,a.length-e),e-=3;return a},NumberMasker.prototype.setTheSeperator=function(a,b){var c;return b>0&&(c=NumberMasker.toCharArray(a),c[b]=this.formatMeta.pointSymbol,a=c.join("")),a},NumberMasker.toCharArray=function(a){for(var a=a.split(""),b=new Array,c=0;c<a.length;c++)b.push(a[c]);return b},NumberMasker.prototype.formatArgument=function(a){var b={};return b.value=a,b},CurrencyMasker.prototype=new NumberMasker,CurrencyMasker.prototype.formatMeta=null,CurrencyMasker.prototype.update=function(a){this.formatMeta=$.extend({},CurrencyMasker.DefaultFormatMeta,a)},CurrencyMasker.prototype.innerFormat=function(a){if(!a.value)return{value:""};var b=new NumberMasker(this.formatMeta).innerFormat(a);return b.value=this.formatMeta.curSymbol+b.value,b},DateTimeMasker.prototype=new AbstractSplitMasker,DateTimeMasker.prototype.formatMeta=null,DateTimeMasker.prototype.update=function(a){this.formatMeta=$.extend({},DateTimeMasker.DefaultFormatMeta,a)},DateTimeMasker.enShortMonth=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DateTimeMasker.enLongMonth=["January","February","March","April","May","June","July","August","September","October","November","December"],DateTimeMasker.prototype.doOne=function(a){if(0==a.length)return new"";var b=new Object;return"yyyy"==a&&(b.getValue=function(a){return DateTimeMasker.getyyyy(a)}),"yy"==a&&(b.getValue=function(a){return DateTimeMasker.getyy(a)}),"MMMM"==a&&(b.getValue=function(a){return DateTimeMasker.getMMMM(a)}),"MMM"==a&&(b.getValue=function(a){return DateTimeMasker.getMMM(a)}),"MM"==a&&(b.getValue=function(a){return DateTimeMasker.getMM(a)}),"M"==a&&(b.getValue=function(a){return DateTimeMasker.getM(a)}),"dd"==a&&(b.getValue=function(a){return DateTimeMasker.getdd(a)}),"d"==a&&(b.getValue=function(a){return DateTimeMasker.getd(a)}),"hh"==a&&(b.getValue=function(a){return DateTimeMasker.gethh(a)}),"h"==a&&(b.getValue=function(a){return DateTimeMasker.geth(a)}),"mm"==a&&(b.getValue=function(a){return DateTimeMasker.getmm(a)}),"m"==a&&(b.getValue=function(a){return DateTimeMasker.getm(a)}),"ss"==a&&(b.getValue=function(a){return DateTimeMasker.getss(a)}),"s"==a&&(b.getValue=function(a){return DateTimeMasker.gets(a)}),"HH"==a&&(b.getValue=function(a){return DateTimeMasker.getHH(a)}),"H"==a&&(b.getValue=function(a){return DateTimeMasker.getH(a)}),"t"==a&&(b.getValue=function(a){return DateTimeMasker.gett(a)}),"st"==a&&(b.getValue=function(a){return DateTimeMasker.gets(a)+DateTimeMasker.gett(a)}),"mt"==a&&(b.getValue=function(a){return DateTimeMasker.getm(a)+DateTimeMasker.gett(a)}),"yyyyMMdd"==a&&(b.getValue=function(a){return DateTimeMasker.getyyyy(a)+DateTimeMasker.getMM(a)+DateTimeMasker.getdd(a)}),"undefined"==typeof b.getValue&&(b.getValue=function(a){return DateTimeMasker.getyyyy(a)+"-"+DateTimeMasker.getMM(a)+"-"+DateTimeMasker.getdd(a)}),b},DateTimeMasker.getyyyy=function(a){return a.getFullYear()},DateTimeMasker.getyy=function(a){return(""+a.getFullYear()).substring(2)},DateTimeMasker.getM=function(a){return""+(a.getMonth()+1)},DateTimeMasker.getMM=function(a){var b=a.getMonth()+1;return 10>b?"0"+b:b},DateTimeMasker.getMMM=function(a){return this.enShortMonth[a.getMonth()]},DateTimeMasker.getMMMM=function(a){return this.enLongMonth[a.getMonth()]},DateTimeMasker.getdd=function(a){var b=a.getDate();return 10>b?"0"+b:a.getDate()+""},DateTimeMasker.getd=function(a){return a.getDate()+""},DateTimeMasker.gethh=function(a){var b=a.getHours();return 10>b?"0"+b:a.getHours()+""},DateTimeMasker.geth=function(a){return a.getHours()+""},DateTimeMasker.getHH=function(a){var b=a.getHours();return b>=12&&(b-=12),10>b?"0"+b:b+""},DateTimeMasker.getH=function(a){var b=a.getHours();return b>=12&&(b-=12),b+""},DateTimeMasker.getmm=function(a){var b=a.getMinutes();return 10>b?"0"+b:a.getMinutes()+""},DateTimeMasker.getm=function(a){return""+a.getMinutes()},DateTimeMasker.getss=function(a){var b=a.getSeconds();return 10>b?"0"+b:b+""},DateTimeMasker.gets=function(a){return a.getSeconds()+""},DateTimeMasker.gett=function(a){var b=a.getHours();return 12>=b?"AM":"PM"},DateTimeMasker.prototype.getExpress=function(){return this.formatMeta.format},DateTimeMasker.prototype.getReplaceds=function(){return[" ",this.formatMeta.speratorSymbol,":"]},DateTimeMasker.prototype.getSeperators=function(){return["(\\s)+?","-",":"]},DateTimeMasker.prototype.getVarElement=function(a){return this.doOne(a)},DateTimeMasker.prototype.formatArgument=function(a){if(0==a)return"";if(null==a||""==a)return a;if("string"==typeof a){var b=a.split(" ");if(b.length>0){var c=b[0].split("-"),d=new Date;if(d.setDate(1),d.setFullYear(parseInt(c[0],10)),d.setMonth(parseInt(c[1],10)-1),d.setDate(parseInt(c[2],10)),2==b.length&&void 0!=b[1]){var e=b[1].split(":");d.setHours(parseInt(e[0],10)),d.setMinutes(parseInt(e[1],10)),d.setSeconds(parseInt(e[2],10)),e.length>3&&d.setMilliseconds(parseInt(e[3],10))}}return d}return a},DateMasker.prototype=new DateTimeMasker,DateMasker.DefaultFormatMeta=$.extend({},DateTimeMasker.DefaultFormatMeta,{format:"yyyy-MM-dd"}),DateMasker.prototype.update=function(a){this.formatMeta=$.extend({},DateMasker.DefaultFormatMeta,a)},TimeMasker.prototype=new DateTimeMasker,TimeMasker.DefaultFormatMeta=$.extend({},DateTimeMasker.DefaultFormatMeta,{format:"hh:mm:ss"}),TimeMasker.prototype.update=function(a){this.formatMeta=$.extend({},TimeMasker.DefaultFormatMeta,a)},PrecentMasker.prototype=new AbstractMasker,PrecentMasker.prototype.formatArgument=function(a){return a},PrecentMasker.prototype.innerFormat=function(a){var b="";if(""!=a){var c=String(a),d=c.length-c.indexOf(".")-1,e=d-2;0>e&&(e=0),b=100*parseFloat(a),b=(b*Math.pow(10,e)/Math.pow(10,e)).toFixed(e),b+="%"}return{value:b}},StringElement.prototype=new Object,StringElement.prototype.value="",StringElement.prototype.getValue=function(){return this.value},FormatResult.prototype=new Object,NumberMasker.DefaultFormatMeta={isNegRed:!0,isMarkEnable:!0,markSymbol:",",pointSymbol:".",positiveFormat:"n",negativeFormat:"-n"},CurrencyMasker.DefaultFormatMeta=$.extend({},NumberMasker.DefaultFormatMeta,{positiveFormat:"n",negativeFormat:"-n"}),AddressMasker.defaultFormatMeta={express:"C S T R P",separator:" "},DateTimeMasker.DefaultFormatMeta={format:"yyyy-MM-dd hh:mm:ss",speratorSymbol:"-"}+function(a){"use strict";function b(){var a,b={},c=navigator.userAgent.toLowerCase();return(a=c.match(/rv:([\d.]+)\) like gecko/))?b.ie=parseInt(a[1]):(a=c.match(/msie ([\d.]+)/))?b.ie=a[1]:(a=c.match(/firefox\/([\d.]+)/))?b.firefox=a[1]:(a=c.match(/chrome\/([\d.]+)/))?b.chrome=a[1]:(a=c.match(/opera.([\d.]+)/))?b.opera=a[1]:(a=c.match(/version\/([\d.]+).*safari/))?b.safari=a[1]:0,b}function c(a,b){b.browser.ie&&b.browser.ie<9?a.show():a.css("transition","all 300ms").css("transform","translate3d(0,0,0)")}function d(a,b,c){b.browser.ie&&b.browser.ie<9?a.hide():a.css("transition","all 300ms").css("transform","translate3d("+c+"px,0,0)")}function e(b){if(1==this.length){var c=a(this),d=c.data("u.mdlayout"),e="object"==typeof b&&b;return d||c.data("u.mdlayout",d=new f(this,e)),d}}var f=function(c,d){this.browser=b();var e=this;this.$element=a(c),this.options=a.extend({},f.DEFAULTS,d),this.$element.css("position","relative").css("width","100%").css("height","100%").css("overflow","hidden"),this.$master=this.$element.find('[data-role="master"]'),this.$detail=this.$element.find('[data-role="detail"]'),this.$master.css("float","left").css("height","100%"),this.$detail.css("height","100%").css("overflow","hidden").css("position","relative"),this.masterWidth=this.$master.width(),this.detailWidth=this.$detail.width(),e.browser.ie&&e.browser.ie<9?(this.$master.find('[data-role="page"]').css("position","absolute").css("height","100%").css("width","100%").hide().eq(0).show(),this.$detail.find('[data-role="page"]').css("position","absolute").css("height","100%").css("width","100%").hide().eq(0).show()):(this.$master.find('[data-role="page"]').css("position","absolute").css("transform","translate3d("+this.masterWidth+"px,0,0)").css("height","100%").css("width","100%").eq(0).css("transform","translate3d(0,0,0)"),this.$detail.find('[data-role="page"]').css("position","absolute").css("left","0px").css("transform","translate3d("+this.detailWidth+"px,0,0)").css("height","100%").css("width","100%").eq(0).css("transform","translate3d(0,0,0)")),this.current_m_pageId=this.$master.find('[data-role="page"]').eq(0).attr("id"),this.current_d_pageId=this.$detail.find('[data-role="page"]').eq(0).attr("id"),this.mHistory=[],this.dHistory=[],this.isNarrow=null,this.response(),a(window).resize(function(){e.response()})};f.DEFAULTS={minWidth:480,afterNarrow:function(){},afterUnNarrow:function(){},afterMasterGo:function(){},afterMasterBack:function(){},afterDetailGo:function(){},afterDetailBack:function(){}},f.fn=f.prototype,f.fn.response=function(){var a=this.$element.width();a<this.options.minWidth?((null==this.isNarrow||0==this.isNarrow)&&(this.isNarrow=!0),this.hideMaster(),this.options.afterNarrow()):((null==this.isNarrow||1==this.isNarrow)&&(this.isNarrow=!1),this.showMaster(),this.options.afterUnNarrow()),this.calcWidth()},f.fn.calcWidth=function(){(!this.browser.ie||this.browser.ie>8)&&(this.detailWidth=this.$detail.width(),this.masterWidth=this.$master.width(),this.$detail.find('[data-role="page"]').css("transform","translate3d("+this.detailWidth+"px,0,0)"),this.$detail.find("#"+this.current_d_pageId).css("transform","translate3d(0,0,0)"))},f.fn.mGo=function(a){this.current_m_pageId!=a&&(this.mHistory.push(this.current_m_pageId),d(this.$master.find("#"+this.current_m_pageId),this,"-"+this.masterWidth),this.current_m_pageId=a,c(this.$master.find("#"+this.current_m_pageId),this),this.options.afterMasterGo(a))},f.fn.mBack=function(){0!=this.mHistory.length&&(d(this.$master.find("#"+this.current_m_pageId),this,this.masterWidth),this.current_m_pageId=this.mHistory.pop(),c(this.$master.find("#"+this.current_m_pageId),this),this.options.afterMasterBack(this.current_d_pageId))},f.fn.dGo=function(a){this.current_d_pageId!=a&&(this.dHistory.push(this.current_d_pageId),d(this.$detail.find("#"+this.current_d_pageId),this,"-"+this.detailWidth),this.current_d_pageId=a,c(this.$detail.find("#"+this.current_d_pageId),this),this.options.afterDetailGo(a))},f.fn.dBack=function(){0!=this.dHistory.length&&(d(this.$detail.find("#"+this.current_d_pageId),this,this.detailWidth),this.current_d_pageId=this.dHistory.pop(),c(this.$detail.find("#"+this.current_d_pageId),this),this.options.afterDetailBack(this.current_d_pageId))},f.fn.showMaster=function(){this.browser.ie&&this.browser.ie<9?this.$master.show():this.$master.css("transform","translate3d(0,0,0)").css("transition","all 300ms"),this.isNarrow||this.$master.css("position","relative")},f.fn.hideMaster=function(){this.browser.ie&&this.browser.ie<9?this.$master.hide():this.$master.css("transform","translate3d(-"+this.masterWidth+"px,0,0)").css("transition","all 300ms"),this.$master.css("position","absolute").css("z-index",5),this.calcWidth()};var g=a.fn.mdlayout;a.fn.mdlayout=e,a.fn.mdlayout.Constructor=f,a.fn.mdlayout.noConflict=function(){return a.fn.mdlayout=g,this}}(jQuery),+function(a){"use strict";
function b(b){var c=a(this),d=c.data("u.pagination"),f="object"==typeof b&&b;return d?d.update(f):c.data("u.pagination",d=new e(this,f)),d}var c=function(a,b){this.isCurrent=function(){return b==a.currentPage},this.isFirst=function(){return 1==b},this.isLast=function(){return b==a.totalPages},this.isPrev=function(){return b==a.currentPage-1},this.isNext=function(){return b==a.currentPage+1},this.isLeftOuter=function(){return b<=a.outerWindow},this.isRightOuter=function(){return a.totalPages-b<a.outerWindow},this.isInsideWindow=function(){return a.currentPage<a.innerWindow+1?b<=2*a.innerWindow+1:a.currentPage>a.totalPages-a.innerWindow?a.totalPages-b<=2*a.innerWindow:Math.abs(a.currentPage-b)<=a.innerWindow},this.number=function(){return b},this.pageSize=function(){return a.pageSize}},d={firstPage:function(b,c,d){var e=a("<li>").append(a('<a href="#"></a>').html(c.first).bind("click.bs-pagin",function(){return c.currentPage<=1?void 0:(b.$element.trigger("pageChange",1),b.firstPage(),!1)}));return d.isFirst()&&e.addClass("disabled"),e},prevPage:function(b,c,d){var e=a("<li>").append(a('<a href="#"></a>').attr("rel","prev").html(c.prev).bind("click.bs-pagin",function(){return c.currentPage<=1?void 0:(b.$element.trigger("pageChange",c.currentPage-1),b.prevPage(),!1)}));return d.isFirst()&&e.addClass("disabled"),e},nextPage:function(b,c,d){var e=a("<li>").append(a('<a href="#"></a>').attr("rel","next").html(c.next).bind("click.bs-pagin",function(){return c.currentPage+1>c.totalPages?void 0:(b.$element.trigger("pageChange",c.currentPage+1),b.nextPage(),!1)}));return d.isLast()&&e.addClass("disabled"),e},lastPage:function(b,c,d){var e=a("<li>").append(a('<a href="#"></a>').html(c.last).bind("click.bs-pagin",function(){return c.currentPage!=c.totalPages?(b.$element.trigger("pageChange",c.totalPages),b.lastPage(),!1):void 0}));return d.isLast()&&e.addClass("disabled"),e},gap:function(b,c){return a("<li>").addClass("disabled").append(a('<a href="#"></a>').html(c.gap))},page:function(b,c,d){var e=a("<li>").append(function(){var e=a('<a href="#"></a>');return d.isNext()&&e.attr("rel","next"),d.isPrev()&&e.attr("rel","prev"),e.html(d.number()),e.bind("click.bs-pagin",function(){var a=b.$element.find(".page_z").val()?b.$element.find(".page_z").val():c.pageSize;return b.page(d.number(),c.totalPages,a),b.$element.trigger("pageChange",d.number()),!1}),e});return d.isCurrent()&&e.addClass("active"),e}},e=function(b,c){this.$element=a(b),this.options=a.extend({},e.DEFAULTS,c),this.$ul=this.$element,this.render()};e.DEFAULTS={currentPage:1,totalPages:1,pageSize:20,innerWindow:2,outerWindow:0,first:"&laquo;",prev:"&lsaquo;",next:"&rsaquo;",last:"&raquo;",gap:"..",totalText:"åè®¡:",truncate:!1,page:function(){return!0}},e.prototype.update=function(b){this.$ul.empty(),this.options=a.extend({},this.options,b),this.render()},e.prototype.render=function(){var b=this.options;if(!b.totalPages)return void this.$element.hide();this.$element.show();var e=new c(b,b.currentPage);e.isFirst()&&b.truncate||(b.first&&this.$ul.append(d.firstPage(this,b,e)),b.prev&&this.$ul.append(d.prevPage(this,b,e)));for(var f=!1,g=1,h=b.totalPages;h>=g;g++){var i=new c(b,g);i.isLeftOuter()||i.isRightOuter()||i.isInsideWindow()?(this.$ul.append(d.page(this,b,i)),f=!1):!f&&b.outerWindow>0&&(this.$ul.append(d.gap(this,b)),f=!0)}if(e.isLast()&&b.truncate||(b.next&&this.$ul.append(d.nextPage(this,b,e)),b.last&&this.$ul.append(d.lastPage(this,b,e))),b.totalCount>0){var j='<li><a style="cursor:default;background-color:#FFF;">'+b.totalText+b.totalCount+"</a></li>";this.$ul.append(j)}if(b.jumppage||b.pageSize){var k="<li><a><i class='jump_page fa fa-arrow-circle-right' style='margin-left: 8px; cursor: pointer;'></i></a></li>";this.$ul.append(k),b.jumppage&&this.$ul.find(".jump_page").before('<input class="page_j" style="margin-right: 6px;width: 32px;border: 1px solid #ddd; height: 20px; padding-left: 2px; border-radius: 3px;" value='+b.currentPage+">é¡µ&nbsp;&nbsp;"),b.pageSize&&this.$ul.find(".jump_page").before('æ¾ç¤º<input  class="page_z"  style="margin:0px 6px;width: 32px;border: 1px solid #ddd; height: 20px; padding-left: 2px; border-radius: 3px;" value='+b.pageSize+">æ¡&nbsp;&nbsp;");var l=this;a(".jump_page").off("click").on("click",function(){var c,d;return c=a(this).siblings(".page_j").val()?a(this).siblings(".page_j").val():b.currentPage,d=a(this).siblings(".page_z").val()?a(this).siblings(".page_z").val():b.pageSize,l.page(c,b.totalPages,d),l.$element.trigger("pageChange",c),!1})}},e.prototype.page=function(a,b,c){var d=this.options;return void 0===b&&(b=d.totalPages),void 0===c&&(c=d.pageSize),a>0&&b>=a&&d.page(a)&&(this.$ul.empty(),d.pageSize=c,d.currentPage=a,d.totalPages=b,this.render()),!1},e.prototype.firstPage=function(){return this.page(1)},e.prototype.lastPage=function(){return this.page(this.options.totalPages)},e.prototype.nextPage=function(){return this.page(this.options.currentPage+1)},e.prototype.prevPage=function(){return this.page(this.options.currentPage-1)};var f=a.fn.pagination;a.fn.pagination=b,a.fn.pagination.Constructor=e,a.fn.pagination.noConflict=function(){return a.fn.pagination=f,this}}(jQuery),+function(){var a=function(b){var c=b.contentId;if($.isEmptyObject(c))throw new Error("contentId is null");this.options=$.extend({},a.DEFAULTS,b),this.params=this.options.params,this.create()};a.DEFAULTS={isPOPMode:!1,searchInput:null,contentId:null,okId:"okBtn",cancelId:"cancelBtn",width:null,height:null,title:"åç§",setVal:function(){},onOk:function(){},onCancel:function(){}},a.fn=a.prototype,a.fn.create=function(){var a=this;a.setVal=this.options.setVal,a.searchInput=this.options.searchInput;var b=this.options.contentId.replace(/[^\w\s]/gi,"\\$&");if(this.options.isPOPMode){var c=$("#"+b);if(0==c.length){a.isDefaultDialog=!0;var d=document.createElement("DIV");d.innerHTML='<div class="modal" id="'+b+'"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h4 class="modal-title">Modal title</h4></div><div class="modal-body"></div><div class="modal-footer"><button   type="button" class="btn btn-primary okBtn">ç¡®å®</button><button  type="button" class="btn btn-default cancelBtn" data-dismiss="modal">åæ¶</button></div></div></div></div>',document.body.appendChild(d),c=$("#"+b)}this.$contentEle=c.find(".modal-body"),this.$okBtn=c.find(".okBtn"),this.$cancelBtn=c.find(".cancelBtn"),this.dialog=c,this.options.width&&c.find(".modal-content").css("width",this.options.width),this.options.height&&this.$contentEle.css("height",this.options.height),this.dialog.find(".modal-title").html(this.options.title)}else 0===$("#"+this.options.contentId).length&&$("body").append($("<div>").attr("id",this.options.contentId)),this.$contentEle=$("#"+b),this.$okBtn=$("#"+b+this.options.okId),this.$cancelBtn=$("#"+b+this.options.cancelId);this.$okBtn.on("click",function(){a.submit()}),this.$cancelBtn.on("click",function(){a.cancel()})},a.fn.submit=function(){var a=this.submitData();this.options.onOk(a),b.destroy(this)},a.fn.cancel=function(){this.options.onCancel(),b.destroy(this)},a.fn.open=function(){var a=this;a.isDefaultDialog&&a.dialog.modal("show"),require([this.options.pageUrl],function(b){a.$contentEle.html(b.template),b.init(a)})},a.fn.registerSubmitFunc=function(a){this.submitData=a},a.fn.submitData=function(){};var b=function(c){var d=new a(c);b.addRefer(d),d.open()};a.fn.destroy=function(){this.dialog&&(this.isDefaultDialog&&this.dialog.modal("hide"),this.dialog.parent().remove()),delete this.options},b.instances={},b.openRefer=function(c){var d=new a(c);b.addRefer(d),d.open()},b.getRefer=function(a){return b.instances[a]},b.addRefer=function(a){b.instances[a.options.id]=a},b.destroy=function(a){var c=b.instances[a.options.id];delete b.instances[a.options.id],c.destroy()},$.refer=b}(jQuery)+function(a){function b(b,c){var d=this;if(this.options=c,this.$element=b,this.$element.children().length>0){var e=this.$element.find("[valid-type], [required]");e.each(function(){var b=a(this);d.createValidate(b,c,e)})}else this.createValidate(this.$element,c);return this}var c=function(b,d,e){this.$element=b,this.$form=e,this.options=d,this.required=!1,this.required=this.options.required?this.options.required:this.$element.attr("required")?!0:!1,this.validType=this.options.validType?this.options.validType:this.$element.attr("valid-type")?this.$element.attr("valid-type"):null,this.validMode=this.options.validMode?this.options.validMode:this.$element.attr("valid-mode")?this.$element.attr("valid-mode"):c.DEFAULTS.validMode,this.nullMsg=this.options.nullMsg?this.options.nullMsg:this.$element.attr("null-msg")?this.$element.attr("null-msg"):c.NULLMSG[this.validType],this.required&&!this.nullMsg&&(this.nullMsg=c.NULLMSG.required),this.errorMsg=this.options.errorMsg?this.options.errorMsg:a(b).attr("error-msg")?this.$element.attr("error-msg"):c.ERRORMSG[this.validType],this.regExp=this.options.reg?this.options.reg:a(b).attr("reg")?this.$element.attr("reg"):c.REG[this.validType],this.tipId=this.options.tipId?this.options.tipId:a(b).attr("tip-id")?this.$element.attr("tip-id"):null,this.placement=this.options.placement?this.options.placement:a(b).attr("placement")?this.$element.attr("placement"):c.DEFAULTS.placement,this.minLength=this.options.minLength?this.options.minLength:a(b).attr("min-length")?this.$element.attr("min-length"):null,this.maxLength=this.options.maxLength?this.options.maxLength:a(b).attr("max-length")?this.$element.attr("max-length"):null,this.min=this.options.min?this.options.min:a(b).attr("min")?this.$element.attr("min"):null,this.max=this.options.max?this.options.max:a(b).attr("max")?this.$element.attr("max"):null,this.create()};c.tipTemplate=null,c.NULLMSG={required:trans("validate.required","ä¸è½ä¸ºç©ºï¼"),integer:trans("validate.integer","è¯·å¡«åæ´æ°ï¼"),"float":trans("validate.float","è¯·å¡«åæ°å­ï¼"),zipCode:trans("validate.zipCode","è¯·å¡«åé®æ¿ç¼ç ï¼"),phone:trans("validate.phone","è¯·å¡«åææºå·ç ï¼"),email:trans("validate.email","è¯·å¡«åé®ç®±å°åï¼"),url:trans("validate.url","è¯·å¡«åç½åï¼")},c.ERRORMSG={integer:trans("validate.integer","è¯·å¡«åæ´æ°ï¼"),"float":trans("validate.float","è¯·å¡«åæ°å­ï¼"),zipCode:trans("validate.zipCode","é®æ¿ç¼ç æ ¼å¼ä¸å¯¹ï¼"),phone:trans("validate.phone","ææºå·ç æ ¼å¼ä¸å¯¹ï¼"),email:trans("validate.email","é®ç®±å°åæ ¼å¼ä¸å¯¹ï¼"),url:trans("validate.url","ç½åæ ¼å¼ä¸å¯¹ï¼")},c.REG={integer:/^-?\d+$/,"float":/^-?\d+(\.\d+)?$/,zipCode:/^[0-9]{6}$/,phone:/^13[0-9]{9}$|14[0-9]{9}|15[0-9]{9}$|18[0-9]{9}$/,email:/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,url:/^(\w+:\/\/)?\w+(\.\w+)+.*$/},c.DEFAULTS={validMode:"blur",placement:"top"},c.fn=c.prototype,c.fn.create=function(){var a=this;this.$element.on("blur",function(){"blur"==a.validMode&&a.doValid()}).on("focus",function(){a.hideMsg()}).on("change",function(){a.hideMsg()}).on("keypress",function(){})},c.fn.updateOptions=function(){},c.fn.doValid=function(){if(this.$element.attr("readonly"))return!0;var a=this.getValue();if(this.isEmpty(a)&&this.required)return this.showMsg(this.nullMsg),!1;if(this.regExp){var b=new RegExp(this.regExp),c=a.match(b);if(null===c||c===!1)return this.showMsg(this.errorMsg),!1}return this.minLength&&a.lengthb()<this.minLength?(this.showMsg("è¾å¥é¿åº¦ä¸è½å°äº"+this.minLength+"ä½"),!1):this.maxLength&&a.lengthb()>this.maxLength?(this.showMsg("è¾å¥é¿åº¦ä¸è½å¤§äº"+this.maxLength+"ä½"),!1):this.max&&parseFloat(a)>this.max?(this.showMsg("è¾å¥å¼ä¸è½å¤§äº"+this.max),!1):this.min&&parseFloat(a)<this.min?(this.showMsg("è¾å¥å¼ä¸è½å°äº"+this.min),!1):!0},c.fn.getValue=function(){var b;return this.$element.is(":radio")?b=this.$form.find(":radio[name='"+this.$element.attr("name")+"']:checked").val():this.$element.is(":checkbox")?(b="",this.$form.find(":checkbox[name='"+obj.attr("name")+"']:checked").each(function(){b+=a(this).val()+","})):b=this.$element.is("div")?this.$element[0].trueValue:this.$element.val(),b=a.trim(b),this.isEmpty(b)?"":b},c.fn.isEmpty=function(b){return""===b||b===a.trim(this.$element.attr("tip"))},c.fn.showMsg=function(b){if(this.tipId)a("#"+this.tipId).html(b).show();else{var d={title:b,trigger:"manual",placement:this.placement};c.tipTemplate&&(d.template=c.tipTemplate),this.$element.tooltip(d),this.$element.tooltip("show")}},c.fn.hideMsg=function(){this.tipId?a("#"+this.tipId).hide():this.$element.tooltip("destroy")},b.fn=b.prototype,b.fn.createValidate=function(a,b,d){var e=a.data("u.validate"),b="object"==typeof b&&b;e||a.data("u.validate",e=new c(a,b,d))},b.fn.check=function(){var b=!0;if(this.$element.children().length>0){var c=this.$element.find("[valid-type], [required]");c.each(function(){var c=a(this).data("u.validate");b=c.doValid()&&b})}else{var d=this.$element.data("u.validate");b=d.doValid()}return b};var d=a.fn.validate;a.fn.validate=function(a){var c=new b(this,a);return c},a.fn.validate.noConflict=function(){return a.fn.validate=d,this}}(jQuery),function(a){var b=function(c,d){var e=this;this.$element=c,this.options=a.extend({},b.DEFAULTS,d),this.items=[],this.mutilPks=[],this.oDiv=null,Object.defineProperty(c[0],"value",{get:function(){return this.trueValue},set:function(b){var d=e.items,f=a(e.oDiv).find("li");if("true"==e.options.single||1==e.options.single)for(var g=0,h=d.length;h>g;g++){var i=d[g].pk;if(i==b){this.innerHTML=d[g].name,this.trueValue=b;break}this.trueValue="",this.innerHTML=""}else if("true"==e.options.mutil||1==e.options.mutil){if(!a.isArray(b)){if("string"!=typeof b)return;b=b.split(","),e.mutilPks=b}0==e.mutilPks.length&&(e.mutilPks=b),a(this).html("");for(var j=[],k=0;k<b.length;k++)for(var g=0,h=f.length;h>g;g++){var i=f[g].item.pk;if(b[k]==i){j.push(b[k]),f[g].style.display="none";var l=a("<i class='fa fa-close'></i>");l.on("mousedown",function(){for(var b=a(this),d=a(e.oDiv).find("li"),f=0,g=d.length;g>f;f++)if(d[f].item.name==b.siblings("span").html()){d[f].style.display="block";for(var h=0;h<e.mutilPks.length;h++)e.mutilPks[h]==d[f].item.pk&&(e.mutilPks.splice(h,1),h--);for(var i=0;i<j.length;i++)j[i]==d[f].item.pk&&(j.splice(i,1),i--)}b.parent().remove(),c[0].trueValue="",c[0].trueValue=j.toString()});var m=a("<span>"+d[g].name+"</span>"),n=a("<div class='mutil-select-div'></div>");n.append(l),n.append(m),a(this).append(n)}}this.trueValue=j.toString()}}}),("true"==this.options.single||1==this.options.single)&&this.singleSelect(),("true"==this.options.mutil||1==this.options.mutil)&&this.mutilSelect(),this.blurEvent(),this.comboFilter(),this.comboFilterClean()};b.DEFAULTS={dataSource:{},mutil:!1,enable:!0,single:!0,onSelect:function(){}},b.fn=b.prototype,b.fn.createDom=function(){var b=this.options.dataSource;if(a.isEmptyObject(b))throw new Error("dataSourceä¸ºç©ºï¼");var c=document.createElement("div");c.className="select-list-div",this.oDiv=c;var d=document.createElement("div");d.className="select-search";var e=document.createElement("input");d.appendChild(e),c.appendChild(d);var f=document.createElement("ul");f.className="select-list-ul";for(var g=0;g<b.length;g++){var h={pk:b[g].pk,name:b[g].name};this.items.push(h);var i=document.createElement("li");i.item=h,i.innerHTML=b[g].name,f.appendChild(i)}c.appendChild(f),c.style.display="none",document.body.appendChild(c)},b.fn.focusEvent=function(){var a=this;this.$element.on("click",function(b){if(a.$element.data("enable")){var c=a.show();1!==c&&(a.floatLayer(),a.floatLayerEvent(),b.stopPropagation?b.stopPropagation():b.cancelBubble=!0)}})},b.fn.clickEvent=function(){var b=this,c=this.$element.next(".input-group-addon")[0]||this.$element.next(":button")[0];a(c).on("click",function(a){b.show(),b.floatLayer(),b.floatLayerEvent(),a.stopPropagation?a.stopPropagation():a.cancelBubble=!0})},b.fn.blurEvent=function(){var a=this;this.$element.on("keyup",function(b){var c=b.which||b.keyCode;9==c&&a.show()}).on("keydown",function(b){var c=b.which||b.keyCode;9==c&&a.hide()})},b.fn.floatLayer=function(){if(0==a(".select-floatDiv").length){var b=document.createElement("div");b.className="select-floatDiv",document.body.appendChild(b)}},b.fn.floatLayerEvent=function(){var b=this;a(".select-floatDiv").click(function(c){b.hide(),a(this).remove(),c.stopPropagation?c.stopPropagation():c.cancelBubble=!0})},b.fn.show=function(){for(var b=a(this.oDiv).find("li"),c=0,d=0,e=b.length;e>d;d++)"none"==b[d].style.display&&c++;if(c===e)return 1;var f=this.$element.offset().left,g=this.$element.offset().top,h=30*this.options.dataSource.length+10+10,i=g+this.$element.outerHeight()+h-(a(window).height()+a(window).scrollTop()),j=this.oDiv;i>0?(j.style.left=f+"px",j.style.top=g-h+"px"):(j.style.left=f+"px",j.style.top=g+this.$element.outerHeight()+"px"),j.style.display="block"},b.fn.hide=function(){this.oDiv.style.display="none"},b.fn.singleDivValue=function(){for(var b=this,c=a(this.oDiv).find("li"),d=0;d<c.length;d++)a(c[d]).click(function(){var a=this.item;b.$element.val(a.pk),b.oDiv.style.display="none",b.options.onSelect(a),b.$element.trigger("change")})},b.fn.mutilDivValue=function(){for(var b=this,c=a(this.oDiv).find("li"),d=0;d<c.length;d++)a(c[d]).click(function(){var a=this.item.pk,c=b.mutilPks,d=c.length;if(d>0)for(var e=0;d>e;e++)a==c[e]&&(c.splice(e,1),e--);c.push(a),b.$element.val(c),b.oDiv.style.display="none",this.style.display="none",b.$element.trigger("change")})},b.fn.singleSelect=function(){this.options.single,this.options.mutil;this.createDom(),this.focusEvent(),this.singleDivValue()},b.fn.mutilSelect=function(){this.options.single,this.options.mutil;this.createDom(),this.mutilDivValue(),this.focusEvent()},b.fn.comboFilter=function(){a(this.oDiv).on("keyup",function(){for(var b=a(this).find(".select-search input").val(),c=a(this).find("li"),d=0;d<c.length;d++)c[d].style.display=-1!=c[d].item.name.indexOf(b)?"block":"none"})},b.fn.comboFilterClean=function(){var b=this;a(this.$element).on("click",function(){a(b.oDiv).find(".select-search input").val("");var c=a(b.oDiv).find("li");if("true"==b.options.single||1==b.options.single)for(var d=0;d<c.length;d++)c[d].style.display="block";else if("true"==b.options.mutil||1==b.options.mutil){for(var e=[],f=a(this).find(".mutil-select-div span"),d=0;d<f.length;d++)for(var g=0;g<c.length;g++)a(f[d]).html()==c[g].item.name&&e.push(g);for(var h=0;h<c.length;h++){c[h].style.display="block";for(var i=0;i<e.length;i++)h==e[i]&&(c[h].style.display="none")}}})};var c=function(c){var d=a(this),e=d.data("s.select"),f="object"==typeof c&&c;e||d.data("s.select",new b(this,f))};a.fn.setComboData=function(b){var c=a(this).data("s.select");if(c){var d=b;if(a.isArray(d)&&0!=d.length){c.items.length=0;var e=a(c.oDiv).find("li");if(d.length<e.length)for(var f=d.length;f<e.length;f++)a(e[f]).remove();else if(d.length>e.length)for(var g=e[0],h=a(c.oDiv).find("ul"),i=0;i<d.length-e.length;i++)a(g).clone(!0).appendTo(h);e=a(c.oDiv).find("li");for(var j=0;j<d.length;j++){var k={pk:d[j].pk,name:d[j].name};c.items.push(k),e[j].item=k,e[j].innerHTML=d[j].name}}}},a.fn.Combobox=c}(jQuery),function(a){"use strict";a(jQuery,moment)}(function(a,b){"use strict";if(a.app)return void(a.fn.datetimepicker=function(b){var c,d,e,f;b.picker_time?c=a(this).find("input").data("dd"):(d=new Date,c=[d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes()<10?"0"+d.getMinutes():d.getMinutes()]),"datetime"==b.picker_type?(e=function(a,b,c){return c[0]+"-"+c[1]+"-"+b[2]+" "+b[3]+":"+b[4]},f=[{values:function(){for(var a=[],b=1950;2030>=b;b++)a.push(b);return a}(),textAlign:"left",width:100},{divider:!0,content:"-"},{values:"0 1 2 3 4 5 6 7 8 9 10 11".split(" "),displayValues:"1 2 3 4 5 6 7 8 9 10 11 12".split(" "),textAlign:"left"},{divider:!0,content:"-"},{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],textAlign:"left"},{divider:!0,content:"  "},{values:function(){for(var a=[],b=0;23>=b;b++)a.push(b);return a}()},{divider:!0,content:":"},{values:function(){for(var a=[],b=0;59>=b;b++)a.push(10>b?"0"+b:b);return a}()}]):(e=function(a,b,c){return c[0]+"-"+c[1]+"-"+b[2]},f=[{values:function(){for(var a=[],b=1950;2030>=b;b++)a.push(b);return a}(),textAlign:"left",width:100},{divider:!0,content:"-"},{values:"0 1 2 3 4 5 6 7 8 9 10 11".split(" "),displayValues:"1 2 3 4 5 6 7 8 9 10 11 12".split(" "),textAlign:"left"},{divider:!0,content:"-"},{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],textAlign:"left"}]),a(this).addClass("moblie_input").find("input").attr("readonly","readonly"),a("#picker-date-container").html(""),a.app.picker_mobile({input:this,convertToPopover:!1,cssClass:b.cssClass,toolbar:!0,refer:b.refer,rotateEffect:!0,value:c,onChange:function(a,b){var c=new Date(a.value[2],1*a.value[0]+1,0).getDate();b[1]>c&&a.cols[1].setValue(c)},formatValue:e,cols:f})});if(!b)throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first");var c="input,div[contenteditable=true]",d=function(d,e){var f,g,h,i,j,k={},l=b().startOf("d"),m=l.clone(),n=!0,o=!1,p=!1,q=0,r=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10}],s=["days","months","years"],t=["top","bottom","auto"],u=["left","right","auto"],v=["default","top","bottom"],w={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t","delete":46,46:"delete"},x={},y=function(a){if("string"!=typeof a||a.length>1)throw new TypeError("isEnabled expects a single character string parameter");switch(a){case"y":return-1!==h.indexOf("Y");case"M":return-1!==h.indexOf("M");case"d":return-1!==h.toLowerCase().indexOf("d");case"h":case"H":return-1!==h.toLowerCase().indexOf("h");case"m":return-1!==h.indexOf("m");case"s":return-1!==h.indexOf("s");default:return!1}},z=function(){return y("h")||y("m")||y("s")},A=function(){return y("y")||y("M")||y("d")},B=function(){var b=a("<thead>").append(a("<tr>").append(a("<th>").addClass("prev").attr("data-action","previous").append(a("<span>").addClass(e.icons.previous))).append(a("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",e.calendarWeeks?"6":"5")).append(a("<th>").addClass("next").attr("data-action","next").append(a("<span>").addClass(e.icons.next)))),c=a("<tbody>").append(a("<tr>").append(a("<td>").attr("colspan",e.calendarWeeks?"8":"7")));return[a("<div>").addClass("datepicker-days").append(a("<table>").addClass("table-condensed").append(b).append(a("<tbody>"))),a("<div>").addClass("datepicker-months").append(a("<table>").addClass("table-condensed").append(b.clone()).append(c.clone())),a("<div>").addClass("datepicker-years").append(a("<table>").addClass("table-condensed").append(b.clone()).append(c.clone()))]},C=function(){var b=a("<tr>"),c=a("<tr>"),d=a("<tr>");return y("h")&&(b.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","incrementHours").append(a("<span>").addClass(e.icons.up)))),c.append(a("<td>").append(a("<span>").addClass("timepicker-hour").attr("data-time-component","hours").attr("data-action","showHours"))),d.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","decrementHours").append(a("<span>").addClass(e.icons.down))))),y("m")&&(y("h")&&(b.append(a("<td>").addClass("separator")),c.append(a("<td>").addClass("separator").html(":")),d.append(a("<td>").addClass("separator"))),b.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","incrementMinutes").append(a("<span>").addClass(e.icons.up)))),c.append(a("<td>").append(a("<span>").addClass("timepicker-minute").attr("data-time-component","minutes").attr("data-action","showMinutes"))),d.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","decrementMinutes").append(a("<span>").addClass(e.icons.down))))),y("s")&&(y("m")&&(b.append(a("<td>").addClass("separator")),c.append(a("<td>").addClass("separator").html(":")),d.append(a("<td>").addClass("separator"))),b.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","incrementSeconds").append(a("<span>").addClass(e.icons.up)))),c.append(a("<td>").append(a("<span>").addClass("timepicker-second").attr("data-time-component","seconds").attr("data-action","showSeconds"))),d.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","decrementSeconds").append(a("<span>").addClass(e.icons.down))))),g||(b.append(a("<td>").addClass("separator")),c.append(a("<td>").append(a("<button>").addClass("btn btn-primary").attr("data-action","togglePeriod"))),d.append(a("<td>").addClass("separator"))),a("<div>").addClass("timepicker-picker").append(a("<table>").addClass("table-condensed").append([b,c,d]))},D=function(){var b=a("<div>").addClass("timepicker-hours").append(a("<table>").addClass("table-condensed")),c=a("<div>").addClass("timepicker-minutes").append(a("<table>").addClass("table-condensed")),d=a("<div>").addClass("timepicker-seconds").append(a("<table>").addClass("table-condensed")),e=[C()];return y("h")&&e.push(b),y("m")&&e.push(c),y("s")&&e.push(d),e},E=function(){var b=[];return e.showTodayButton&&b.push(a("<td>").append(a("<a>").attr("data-action","today").append(a("<span>").addClass(e.icons.today)))),!e.sideBySide&&A()&&z()&&b.push(a("<td>").append(a("<a>").attr("data-action","togglePicker").append(a("<span>").addClass(e.icons.time)))),e.showClear&&b.push(a("<td>").append(a("<a>").attr("data-action","clear").append(a("<span>").addClass(e.icons.clear)))),e.showClose&&b.push(a("<td>").append(a("<a>").attr("data-action","close").append(a("<span>").addClass(e.icons.close)))),a("<table>").addClass("table-condensed").append(a("<tbody>").append(a("<tr>").append(b)))},F=function(){var b=a("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),c=a("<div>").addClass("datepicker").append(B()),d=a("<div>").addClass("timepicker").append(D()),f=a("<ul>").addClass("list-unstyled"),h=a("<li>").addClass("picker-switch"+(e.collapse?" accordion-toggle":"")).append(E());return e.inline&&b.removeClass("dropdown-menu"),g&&b.addClass("usetwentyfour"),e.sideBySide&&A()&&z()?(b.addClass("timepicker-sbs"),b.append(a("<div>").addClass("row").append(c.addClass("col-sm-6")).append(d.addClass("col-sm-6"))),b.append(h),b):("top"===e.toolbarPlacement&&f.append(h),A()&&f.append(a("<li>").addClass(e.collapse&&z()?"collapse in":"").append(c)),"default"===e.toolbarPlacement&&f.append(h),z()&&f.append(a("<li>").addClass(e.collapse&&A()?"collapse":"").append(d)),"bottom"===e.toolbarPlacement&&f.append(h),b.append(f))},G=function(){var b,f={};return b=d.is(c)||e.inline?d.data():d.find(c).data(),b.dateOptions&&b.dateOptions instanceof Object&&(f=a.extend(!0,f,b.dateOptions)),a.each(e,function(a){var c="date"+a.charAt(0).toUpperCase()+a.slice(1);void 0!==b[c]&&(f[a]=b[c])}),f},H=function(){var b,f=(o||d).position(),g=(o||d).offset(),h=e.widgetPositioning.vertical,i=e.widgetPositioning.horizontal;if(e.widgetParent)b=e.widgetParent.append(p);else if(d.is(c))b=d.parent().append(p);else{if(e.inline)return void(b=d.append(p));b=d,d.children().first().after(p)}if("auto"===h&&(h=g.top+1.5*p.height()>=a(window).height()+a(window).scrollTop()&&p.height()+d.outerHeight()<g.top?"top":"bottom"),"auto"===i&&(i=b.width()<g.left+p.outerWidth()/2&&g.left+p.outerWidth()>a(window).width()?"right":"left"),"top"===h?p.addClass("top").removeClass("bottom"):p.addClass("bottom").removeClass("top"),"right"===i?p.addClass("pull-right"):p.removeClass("pull-right"),"relative"!==b.css("position")&&(b=b.parents().filter(function(){return"relative"===a(this).css("position")}).first()),0===b.length)throw new Error("datetimepicker component should be placed within a relative positioned container");p.css({top:"top"===h?"auto":f.top+d.outerHeight(),bottom:"top"===h?f.top+d.outerHeight():"auto",left:"left"===i?b.css("padding-left"):"auto",right:"left"===i?"auto":b.width()-d.outerWidth()}),e.afterShow&&e.afterShow(p,o||d)},I=function(a){"dp.change"===a.type&&(a.date&&a.date.isSame(a.oldDate)||!a.date&&!a.oldDate)||d.trigger(a)},J=function(a){p&&(a&&(j=Math.max(q,Math.min(2,j+a))),p.find(".datepicker > div").hide().filter(".datepicker-"+r[j].clsName).show())},K=function(){var b=a("<tr>"),c=m.clone().startOf("w");for(e.calendarWeeks===!0&&b.append(a("<th>").addClass("cw").text("#"));c.isBefore(m.clone().endOf("w"));)b.append(a("<th>").addClass("dow").text(c.format("dd"))),c.add(1,"d");p.find(".datepicker-days thead").append(b)},L=function(a){return e.disabledDates[a.format("YYYY-MM-DD")]===!0},M=function(a){return e.enabledDates[a.format("YYYY-MM-DD")]===!0},N=function(a,b){return a.isValid()?e.disabledDates&&L(a)&&"M"!==b?!1:e.enabledDates&&!M(a)&&"M"!==b?!1:e.minDate&&a.isBefore(e.minDate,b)?!1:e.maxDate&&a.isAfter(e.maxDate,b)?!1:"d"===b&&-1!==e.daysOfWeekDisabled.indexOf(a.day())?!1:!0:!1},O=function(){for(var b=[],c=m.clone().startOf("y").hour(12);c.isSame(m,"y");)b.push(a("<span>").attr("data-action","selectMonth").addClass("month").text(c.format("MMM"))),c.add(1,"M");p.find(".datepicker-months td").empty().append(b)},P=function(){var b=p.find(".datepicker-months"),c=b.find("th"),d=b.find("tbody").find("span");b.find(".disabled").removeClass("disabled"),N(m.clone().subtract(1,"y"),"y")||c.eq(0).addClass("disabled"),c.eq(1).text(m.year()),N(m.clone().add(1,"y"),"y")||c.eq(2).addClass("disabled"),d.removeClass("active"),l.isSame(m,"y")&&d.eq(l.month()).addClass("active"),d.each(function(b){N(m.clone().month(b),"M")||a(this).addClass("disabled")})},Q=function(){var a=p.find(".datepicker-years"),b=a.find("th"),c=m.clone().subtract(5,"y"),d=m.clone().add(6,"y"),f="";for(a.find(".disabled").removeClass("disabled"),e.minDate&&e.minDate.isAfter(c,"y")&&b.eq(0).addClass("disabled"),b.eq(1).text(c.year()+"-"+d.year()),e.maxDate&&e.maxDate.isBefore(d,"y")&&b.eq(2).addClass("disabled");!c.isAfter(d,"y");)f+='<span data-action="selectYear" class="year'+(c.isSame(l,"y")?" active":"")+(N(c,"y")?"":" disabled")+'">'+c.year()+"</span>",c.add(1,"y");a.find("td").html(f)},R=function(){var c,d,f,g=p.find(".datepicker-days"),h=g.find("th"),i=[];if(A()){for(g.find(".disabled").removeClass("disabled"),h.eq(1).text(m.format(e.dayViewHeaderFormat)),N(m.clone().subtract(1,"M"),"M")||h.eq(0).addClass("disabled"),N(m.clone().add(1,"M"),"M")||h.eq(2).addClass("disabled"),c=m.clone().startOf("M").startOf("week");!m.clone().endOf("M").endOf("w").isBefore(c,"d");)0===c.weekday()&&(d=a("<tr>"),e.calendarWeeks&&d.append('<td class="cw">'+c.week()+"</td>"),i.push(d)),f="",c.isBefore(m,"M")&&(f+=" old"),c.isAfter(m,"M")&&(f+=" new"),c.isSame(l,"d")&&!n&&(f+=" active"),N(c,"d")||(f+=" disabled"),c.isSame(b(),"d")&&(f+=" today"),(0===c.day()||6===c.day())&&(f+=" weekend"),d.append('<td data-action="selectDay" class="day'+f+'">'+c.date()+"</td>"),c.add(1,"d");g.find("tbody").empty().append(i),P(),Q()}},S=function(){var b=p.find(".timepicker-hours table"),c=m.clone().startOf("d"),d=[],e=a("<tr>");for(m.hour()>11&&!g&&c.hour(12);c.isSame(m,"d")&&(g||m.hour()<12&&c.hour()<12||m.hour()>11);)c.hour()%4===0&&(e=a("<tr>"),d.push(e)),e.append('<td data-action="selectHour" class="hour'+(N(c,"h")?"":" disabled")+'">'+c.format(g?"HH":"hh")+"</td>"),c.add(1,"h");b.empty().append(d)},T=function(){for(var b=p.find(".timepicker-minutes table"),c=m.clone().startOf("h"),d=[],f=a("<tr>"),g=1===e.stepping?5:e.stepping;m.isSame(c,"h");)c.minute()%(4*g)===0&&(f=a("<tr>"),d.push(f)),f.append('<td data-action="selectMinute" class="minute'+(N(c,"m")?"":" disabled")+'">'+c.format("mm")+"</td>"),c.add(g,"m");b.empty().append(d)},U=function(){for(var b=p.find(".timepicker-seconds table"),c=m.clone().startOf("m"),d=[],e=a("<tr>");m.isSame(c,"m");)c.second()%20===0&&(e=a("<tr>"),d.push(e)),e.append('<td data-action="selectSecond" class="second'+(N(c,"s")?"":" disabled")+'">'+c.format("ss")+"</td>"),c.add(5,"s");b.empty().append(d)},V=function(){var a=p.find(".timepicker span[data-time-component]");g||p.find(".timepicker [data-action=togglePeriod]").text(l.format("A")),a.filter("[data-time-component=hours]").text(l.format(g?"HH":"hh")),a.filter("[data-time-component=minutes]").text(l.format("mm")),a.filter("[data-time-component=seconds]").text(l.format("ss")),S(),T(),U()
},W=function(){p&&(R(),V())},X=function(a){var b=n?null:l;return a?(a=a.clone().locale(e.locale),1!==e.stepping&&a.minutes(Math.round(a.minutes()/e.stepping)*e.stepping%60).seconds(0),void(N(a)?(l=a,m=l.clone(),lb(f,l.format(h)),d.data("date",l.format(h)),W(),n=!1,I({type:"dp.change",date:l.clone(),oldDate:b})):(e.keepInvalid||lb(f,n?"":l.format(h)),I({type:"dp.error",date:a})))):(n=!0,lb(f,""),d.data("date",""),I({type:"dp.change",date:null,oldDate:b}),void W())},Y=function(){var b=!1;return p?(p.find(".collapse").each(function(){var c=a(this).data("collapse");return c&&c.transitioning?(b=!0,!1):!0}),b?k:(o&&o.hasClass("btn")&&o.toggleClass("active"),p.hide(),a(window).off("resize",H),p.off("click","[data-action]"),p.off("mousedown",!1),p.remove(),p=!1,I({type:"dp.hide",date:l.clone()}),k)):k},Z=function(){X(null)},$={next:function(){m.add(r[j].navStep,r[j].navFnc),R()},previous:function(){m.subtract(r[j].navStep,r[j].navFnc),R()},pickerSwitch:function(){J(1)},selectMonth:function(b){var c=a(b.target).closest("tbody").find("span").index(a(b.target));m.month(c),j===q?(X(l.clone().year(m.year()).month(m.month())),e.inline||Y()):(J(-1),R())},selectYear:function(b){var c=parseInt(a(b.target).text(),10)||0;m.year(c),j===q?(X(l.clone().year(m.year())),e.inline||Y()):(J(-1),R())},selectDay:function(b){var c=m.clone();a(b.target).is(".old")&&c.subtract(1,"M"),a(b.target).is(".new")&&c.add(1,"M"),X(c.date(parseInt(a(b.target).text(),10))),e.keepOpen||e.inline||(a(d).find("input").blur(),Y())},incrementHours:function(){X(l.clone().add(1,"h"))},incrementMinutes:function(){X(l.clone().add(e.stepping,"m"))},incrementSeconds:function(){X(l.clone().add(1,"s"))},decrementHours:function(){X(l.clone().subtract(1,"h"))},decrementMinutes:function(){X(l.clone().subtract(e.stepping,"m"))},decrementSeconds:function(){X(l.clone().subtract(1,"s"))},togglePeriod:function(){X(l.clone().add(l.hours()>=12?-12:12,"h"))},togglePicker:function(b){var c,d=a(b.target),f=d.closest("ul"),g=f.find(".in"),h=f.find(".collapse:not(.in)");if(g&&g.length){if(c=g.data("collapse"),c&&c.transitioning)return;g.collapse?(g.collapse("hide"),h.collapse("show")):(g.removeClass("in"),h.addClass("in")),d.is("span")?d.toggleClass(e.icons.time+" "+e.icons.date):d.find("span").toggleClass(e.icons.time+" "+e.icons.date)}},showPicker:function(){p.find(".timepicker > div:not(.timepicker-picker)").hide(),p.find(".timepicker .timepicker-picker").show()},showHours:function(){p.find(".timepicker .timepicker-picker").hide(),p.find(".timepicker .timepicker-hours").show()},showMinutes:function(){p.find(".timepicker .timepicker-picker").hide(),p.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){p.find(".timepicker .timepicker-picker").hide(),p.find(".timepicker .timepicker-seconds").show()},selectHour:function(b){var c=parseInt(a(b.target).text(),10);g||(l.hours()>=12?12!==c&&(c+=12):12===c&&(c=0)),X(l.clone().hours(c)),$.showPicker.call(k)},selectMinute:function(b){X(l.clone().minutes(parseInt(a(b.target).text(),10))),$.showPicker.call(k)},selectSecond:function(b){X(l.clone().seconds(parseInt(a(b.target).text(),10))),$.showPicker.call(k)},clear:Z,today:function(){X(b())},close:Y},_=function(b){return a(b.currentTarget).is(".disabled")?!1:($[a(b.currentTarget).data("action")].apply(k,arguments),!1)},ab=function(){var d,g={year:function(a){return a.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(a){return a.date(1).hours(0).seconds(0).minutes(0)},day:function(a){return a.hours(0).seconds(0).minutes(0)},hour:function(a){return a.seconds(0).minutes(0)},minute:function(a){return a.seconds(0)}};return f.prop("disabled")||!e.ignoreReadonly&&f.prop("readonly")||0==f.prop("contenteditable")||p||f.closest("fieldset").prop("disabled")?k:(e.useCurrent&&n&&(f.is(c)&&0===kb(f).trim().length||e.inline)&&(d=b(),"string"==typeof e.useCurrent&&(d=g[e.useCurrent](d)),X(d)),p=F(),K(),O(),p.find(".timepicker-hours").hide(),p.find(".timepicker-minutes").hide(),p.find(".timepicker-seconds").hide(),W(),J(),a(window).on("resize",H),p.on("click","[data-action]",_),p.on("mousedown",!1),o&&o.hasClass("btn")&&o.toggleClass("active"),p.show(),H(),f.is(":focus")||f.focus(),I({type:"dp.show"}),k)},bb=function(){return p?Y():ab()},cb=function(a){return a=b.isMoment(a)||a instanceof Date?b(a):b(a,i,e.useStrict),a.locale(e.locale),a},db=function(a){var b,c,d,f,g=null,h=[],i={},j=a.which,l="p";x[j]=l;for(b in x)x.hasOwnProperty(b)&&x[b]===l&&(h.push(b),parseInt(b,10)!==j&&(i[b]=!0));for(b in e.keyBinds)if(e.keyBinds.hasOwnProperty(b)&&"function"==typeof e.keyBinds[b]&&(d=b.split(" "),d.length===h.length&&w[j]===d[d.length-1])){for(f=!0,c=d.length-2;c>=0;c--)if(!(w[d[c]]in i)){f=!1;break}if(f){g=e.keyBinds[b];break}}g&&(g.call(k,p),a.stopPropagation(),a.preventDefault())},eb=function(a){x[a.which]="r",a.stopPropagation(),a.preventDefault()},fb=function(b){var c=kb(a(b.target)).trim(),d=c?cb(c):null;return X(d),b.stopImmediatePropagation(),!1},gb=function(){f.on({change:fb,blur:e.debug?"":Y,keydown:db,keyup:eb}),f.on({focus:ab}),o&&(o.on("click",bb),o.on("mousedown",!1))},hb=function(){f.off({change:fb,blur:Y,keydown:db,keyup:eb}),f.off({focus:ab}),o&&(o.off("click",bb),o.off("mousedown",!1))},ib=function(b){var c={};return a.each(b,function(){var a=cb(this);a.isValid()&&(c[a.format("YYYY-MM-DD")]=!0)}),Object.keys(c).length?c:!1},jb=function(){var a=e.format||"L LT";h=e.format||"YYYY-M-D  HH:ss",i=e.extraFormats?e.extraFormats.slice():[],i.indexOf(a)<0&&i.indexOf(h)<0&&i.push(h),g=h.toLowerCase().indexOf("a")<1&&h.indexOf("h")<1,y("y")&&(q=2),y("M")&&(q=1),y("d")&&(q=0),j=Math.max(q,j),n||X(l)},kb=function(a){var b;if(a.is("input"))b=a.val();else{if(!a.is("div[contenteditable=true]"))throw new Error("Must be a input or contenteditable div");b=a.html()}return b},lb=function(a,b){if(a.is("input"))a.val(b);else{if(!a.is("div[contenteditable=true]"))throw new Error("Must be a input or contenteditable div");a[0].value=b}};if(k.destroy=function(){Y(),hb(),d.removeData("DateTimePicker"),d.removeData("date")},k.toggle=bb,k.show=ab,k.hide=Y,k.disable=function(){return Y(),o&&o.hasClass("btn")&&o.addClass("disabled"),f.prop("disabled",!0),k},k.enable=function(){return o&&o.hasClass("btn")&&o.removeClass("disabled"),f.prop("disabled",!1),k},k.ignoreReadonly=function(a){if(0===arguments.length)return e.ignoreReadonly;if("boolean"!=typeof a)throw new TypeError("ignoreReadonly () expects a boolean parameter");return e.ignoreReadonly=a,k},k.options=function(b){if(0===arguments.length)return a.extend(!0,{},e);if(!(b instanceof Object))throw new TypeError("options() options parameter should be an object");return a.extend(!0,e,b),a.each(e,function(a,b){void 0!==k[a]&&k[a](b)}),k},k.date=function(a){if(0===arguments.length)return n?null:l.clone();if(!(null===a||"string"==typeof a||b.isMoment(a)||a instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return X(null===a?null:cb(a)),k},k.format=function(a){if(0===arguments.length)return e.format;if("string"!=typeof a&&("boolean"!=typeof a||a!==!1))throw new TypeError("format() expects a sting or boolean:false parameter "+a);return e.format=a,h&&jb(),k},k.dayViewHeaderFormat=function(a){if(0===arguments.length)return e.dayViewHeaderFormat;if("string"!=typeof a)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return e.dayViewHeaderFormat=a,k},k.extraFormats=function(a){if(0===arguments.length)return e.extraFormats;if(a!==!1&&!(a instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return e.extraFormats=a,i&&jb(),k},k.disabledDates=function(b){if(0===arguments.length)return e.disabledDates?a.extend({},e.disabledDates):e.disabledDates;if(!b)return e.disabledDates=!1,W(),k;if(!(b instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return e.disabledDates=ib(b),e.enabledDates=!1,W(),k},k.enabledDates=function(b){if(0===arguments.length)return e.enabledDates?a.extend({},e.enabledDates):e.enabledDates;if(!b)return e.enabledDates=!1,W(),k;if(!(b instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return e.enabledDates=ib(b),e.disabledDates=!1,W(),k},k.daysOfWeekDisabled=function(a){if(0===arguments.length)return e.daysOfWeekDisabled.splice(0);if(!(a instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");return e.daysOfWeekDisabled=a.reduce(function(a,b){return b=parseInt(b,10),b>6||0>b||isNaN(b)?a:(-1===a.indexOf(b)&&a.push(b),a)},[]).sort(),W(),k},k.maxDate=function(a){if(0===arguments.length)return e.maxDate?e.maxDate.clone():e.maxDate;if("boolean"==typeof a&&a===!1)return e.maxDate=!1,W(),k;"string"==typeof a&&("now"===a||"moment"===a)&&(a=b());var c=cb(a);if(!c.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+a);if(e.minDate&&c.isBefore(e.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+c.format(h));return e.maxDate=c,e.maxDate.isBefore(a)&&X(e.maxDate),m.isAfter(c)&&(m=c.clone()),W(),k},k.minDate=function(a){if(0===arguments.length)return e.minDate?e.minDate.clone():e.minDate;if("boolean"==typeof a&&a===!1)return e.minDate=!1,W(),k;"string"==typeof a&&("now"===a||"moment"===a)&&(a=b());var c=cb(a);if(!c.isValid())throw new TypeError("minDate() Could not parse date parameter: "+a);if(e.maxDate&&c.isAfter(e.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+c.format(h));return e.minDate=c,e.minDate.isAfter(a)&&X(e.minDate),m.isBefore(c)&&(m=c.clone()),W(),k},k.defaultDate=function(a){if(0===arguments.length)return e.defaultDate?e.defaultDate.clone():e.defaultDate;if(!a)return e.defaultDate=!1,k;"string"==typeof a&&("now"===a||"moment"===a)&&(a=b());var c=cb(a);if(!c.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+a);if(!N(c))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return e.defaultDate=c,e.defaultDate&&""===kb(f).trim()&&void 0===f.attr("placeholder")&&X(e.defaultDate),k},k.locale=function(a){if(0===arguments.length)return e.locale;if(!b.localeData(a))throw new TypeError("locale() locale "+a+" is not loaded from moment locales!");return e.locale=a,l.locale(e.locale),m.locale(e.locale),h&&jb(),p&&(Y(),ab()),k},k.stepping=function(a){return 0===arguments.length?e.stepping:(a=parseInt(a,10),(isNaN(a)||1>a)&&(a=1),e.stepping=a,k)},k.useCurrent=function(a){var b=["year","month","day","hour","minute"];if(0===arguments.length)return e.useCurrent;if("boolean"!=typeof a&&"string"!=typeof a)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof a&&-1===b.indexOf(a.toLowerCase()))throw new TypeError("useCurrent() expects a string parameter of "+b.join(", "));return e.useCurrent=a,k},k.collapse=function(a){if(0===arguments.length)return e.collapse;if("boolean"!=typeof a)throw new TypeError("collapse() expects a boolean parameter");return e.collapse===a?k:(e.collapse=a,p&&(Y(),ab()),k)},k.icons=function(b){if(0===arguments.length)return a.extend({},e.icons);if(!(b instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return a.extend(e.icons,b),p&&(Y(),ab()),k},k.useStrict=function(a){if(0===arguments.length)return e.useStrict;if("boolean"!=typeof a)throw new TypeError("useStrict() expects a boolean parameter");return e.useStrict=a,k},k.sideBySide=function(a){if(0===arguments.length)return e.sideBySide;if("boolean"!=typeof a)throw new TypeError("sideBySide() expects a boolean parameter");return e.sideBySide=a,p&&(Y(),ab()),k},k.viewMode=function(a){if(0===arguments.length)return e.viewMode;if("string"!=typeof a)throw new TypeError("viewMode() expects a string parameter");if(-1===s.indexOf(a))throw new TypeError("viewMode() parameter must be one of ("+s.join(", ")+") value");return e.viewMode=a,j=Math.max(s.indexOf(a),q),J(),k},k.toolbarPlacement=function(a){if(0===arguments.length)return e.toolbarPlacement;if("string"!=typeof a)throw new TypeError("toolbarPlacement() expects a string parameter");if(-1===v.indexOf(a))throw new TypeError("toolbarPlacement() parameter must be one of ("+v.join(", ")+") value");return e.toolbarPlacement=a,p&&(Y(),ab()),k},k.afterShow=function(a){return e.afterShow=a,k},k.widgetPositioning=function(b){if(0===arguments.length)return a.extend({},e.widgetPositioning);if("[object Object]"!=={}.toString.call(b))throw new TypeError("widgetPositioning() expects an object variable");if(b.horizontal){if("string"!=typeof b.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(b.horizontal=b.horizontal.toLowerCase(),-1===u.indexOf(b.horizontal))throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+u.join(", ")+")");e.widgetPositioning.horizontal=b.horizontal}if(b.vertical){if("string"!=typeof b.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(b.vertical=b.vertical.toLowerCase(),-1===t.indexOf(b.vertical))throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+t.join(", ")+")");e.widgetPositioning.vertical=b.vertical}return W(),k},k.calendarWeeks=function(a){if(0===arguments.length)return e.calendarWeeks;if("boolean"!=typeof a)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return e.calendarWeeks=a,W(),k},k.showTodayButton=function(a){if(0===arguments.length)return e.showTodayButton;if("boolean"!=typeof a)throw new TypeError("showTodayButton() expects a boolean parameter");return e.showTodayButton=a,p&&(Y(),ab()),k},k.showClear=function(a){if(0===arguments.length)return e.showClear;if("boolean"!=typeof a)throw new TypeError("showClear() expects a boolean parameter");return e.showClear=a,p&&(Y(),ab()),k},k.widgetParent=function(b){if(0===arguments.length)return e.widgetParent;if("string"==typeof b&&(b=a(b)),null!==b&&"string"!=typeof b&&!(b instanceof a))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return e.widgetParent=b,p&&(Y(),ab()),k},k.keepOpen=function(a){if(0===arguments.length)return e.keepOpen;if("boolean"!=typeof a)throw new TypeError("keepOpen() expects a boolean parameter");return e.keepOpen=a,k},k.inline=function(a){if(0===arguments.length)return e.inline;if("boolean"!=typeof a)throw new TypeError("inline() expects a boolean parameter");return e.inline=a,k},k.clear=function(){return Z(),k},k.keyBinds=function(a){return e.keyBinds=a,k},k.debug=function(a){if("boolean"!=typeof a)throw new TypeError("debug() expects a boolean parameter");return e.debug=a,k},k.showClose=function(a){if(0===arguments.length)return e.showClose;if("boolean"!=typeof a)throw new TypeError("showClose() expects a boolean parameter");return e.showClose=a,k},k.keepInvalid=function(a){if(0===arguments.length)return e.keepInvalid;if("boolean"!=typeof a)throw new TypeError("keepInvalid() expects a boolean parameter");return e.keepInvalid=a,k},k.datepickerInput=function(a){if(0===arguments.length)return e.datepickerInput;if("string"!=typeof a)throw new TypeError("datepickerInput() expects a string parameter");return e.datepickerInput=a,k},d.is(c))f=d;else if(f=d.find(e.datepickerInput),0===f.size())f=d.find(c);else if(!f.is(c))throw new Error('CSS class "'+e.datepickerInput+'" cannot be applied to non input element');if(d.hasClass("input-group")&&(o=d.find(0===d.find(".datepickerbutton").size()?'[class^="input-group-"]':".datepickerbutton")),!e.inline&&!f.is(c))throw new Error("Could not initialize DateTimePicker without an input element");return a.extend(!0,e,G()),k.options(e),jb(),gb(),f.prop("disabled")&&k.disable(),f.is(c)&&0!==kb(f).trim().length?X(cb(kb(f).trim())):e.defaultDate&&void 0===f.attr("placeholder")&&X(e.defaultDate),e.inline&&ab(),k};a.fn.datetimepicker=function(b){return this.each(function(){var c=a(this);c.data("DateTimePicker")||(b=a.extend(!0,{},a.fn.datetimepicker.defaults,b),c.data("DateTimePicker",d(c,b)))})},a.fn.datetimepicker.defaults={afterShow:void 0,format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:b.locale("zh-cn"),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:[],calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,showClose:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:!1,keepOpen:!1,inline:!1,keepInvalid:!1,datepickerInput:".datepickerinput",keyBinds:{up:function(a){if(a){var c=this.date()||b();this.date(a.find(".datepicker").is(":visible")?c.clone().subtract(7,"d"):c.clone().add(1,"m"))}},down:function(a){if(!a)return void this.show();var c=this.date()||b();this.date(a.find(".datepicker").is(":visible")?c.clone().add(7,"d"):c.clone().subtract(1,"m"))},"control up":function(a){if(a){var c=this.date()||b();this.date(a.find(".datepicker").is(":visible")?c.clone().subtract(1,"y"):c.clone().add(1,"h"))}},"control down":function(a){if(a){var c=this.date()||b();this.date(a.find(".datepicker").is(":visible")?c.clone().add(1,"y"):c.clone().subtract(1,"h"))}},left:function(a){if(a){var c=this.date()||b();a.find(".datepicker").is(":visible")&&this.date(c.clone().subtract(1,"d"))}},right:function(a){if(a){var c=this.date()||b();a.find(".datepicker").is(":visible")&&this.date(c.clone().add(1,"d"))}},pageUp:function(a){if(a){var c=this.date()||b();a.find(".datepicker").is(":visible")&&this.date(c.clone().subtract(1,"M"))}},pageDown:function(a){if(a){var c=this.date()||b();a.find(".datepicker").is(":visible")&&this.date(c.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(a){a.find(".timepicker").is(":visible")&&a.find('.btn[data-action="togglePeriod"]').click()},t:function(){this.date(b())},"delete":function(){this.clear()}},debug:!1},a(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(b){var c=a(this);if(!c.data("DateTimePicker")){b.preventDefault();var d=JSON.parse(c.attr("data-options")||null);c.datetimepicker(d||{}),c.data("DateTimePicker").show(),c.on("dp.change",function(){a(this).find("input").trigger("change")})}})}),!function(a,b){var c=function(b,c,d){this.parentEl="body",this.element=a(b);var e='<div class="daterangepicker dropdown-menu"><div class="ranges"><div class="range_inputs"><div class="daterangepicker_start_input"><label for="daterangepicker_start"></label><input class="input-mini" type="text" name="daterangepicker_start" value="" disabled="disabled" /></div><div class="daterangepicker_end_input"><label for="daterangepicker_end"></label><input class="input-mini" type="text" name="daterangepicker_end" value="" disabled="disabled" /></div><button class="applyBtn" disabled="disabled"></button>&nbsp;<button class="cancelBtn"></button></div></div><div class="clear"></div><div class="calendar left"></div><div class="calendar right"></div></div>';("object"!=typeof c||null===c)&&(c={}),this.parentEl=a("object"==typeof c&&c.parentEl&&a(c.parentEl).length?c.parentEl:this.parentEl),this.container=a(e).appendTo(this.parentEl),this.setOptions(c,d);var f=this.container;a.each(this.buttonClasses,function(a,b){f.find("button").addClass(b)}),this.container.find(".daterangepicker_start_input label").html(this.locale.fromLabel),this.container.find(".daterangepicker_end_input label").html(this.locale.toLabel),this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass),this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".calendar").on("click.daterangepicker",".prev",a.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",a.proxy(this.clickNext,this)).on("click.daterangepicker","td.available",a.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",a.proxy(this.enterDate,this)).on("mouseleave.daterangepicker","td.available",a.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",a.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.monthselect",a.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.ampmselect",a.proxy(this.updateTime,this)),this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",a.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",a.proxy(this.clickCancel,this)).on("click.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",a.proxy(this.showCalendars,this)).on("click.daterangepicker","li",a.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",a.proxy(this.enterRange,this)).on("mouseleave.daterangepicker","li",a.proxy(this.updateFormInputs,this)),this.element.is("input")?this.element.on({"click.daterangepicker":a.proxy(this.show,this),"focus.daterangepicker":a.proxy(this.show,this),"keyup.daterangepicker":a.proxy(this.updateFromControl,this)}):this.element.on("click.daterangepicker",a.proxy(this.toggle,this))};c.prototype={constructor:c,setOptions:function(c,d){if(this.startDate=b().startOf("day"),this.endDate=b().endOf("day"),this.minDate=b("1970-01-01","YYYY-MM-DD").startOf("day"),this.maxDate=b("2999-01-01","YYYY-MM-DD").endOf("day"),this.dateLimit=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.timePicker=!1,this.timePickerIncrement=30,this.timePicker12Hour=!0,this.singleDatePicker=!1,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.buttonClasses=["btn","btn-small"],this.applyClass="btn-success",this.cancelClass="btn-default",this.format="YYYY-MM-DD",this.separator=" - ",this.locale={applyLabel:"ç¡®å®",cancelLabel:"åæ¶",fromLabel:"ä»",toLabel:"å°",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:b()._locale._weekdaysMin.slice(),monthNames:b()._locale._monthsShort.slice(),firstDay:0},this.cb=function(){},"string"==typeof c.format&&(this.format=c.format),"string"==typeof c.separator&&(this.separator=c.separator),"string"==typeof c.startDate&&(this.startDate=b(c.startDate,this.format)),"string"==typeof c.endDate&&(this.endDate=b(c.endDate,this.format)),"string"==typeof c.minDate&&(this.minDate=b(c.minDate,this.format)),"string"==typeof c.maxDate&&(this.maxDate=b(c.maxDate,this.format)),"object"==typeof c.startDate&&(this.startDate=b(c.startDate)),"object"==typeof c.endDate&&(this.endDate=b(c.endDate)),"object"==typeof c.minDate&&(this.minDate=b(c.minDate)),"object"==typeof c.maxDate&&(this.maxDate=b(c.maxDate)),"string"==typeof c.applyClass&&(this.applyClass=c.applyClass),"string"==typeof c.cancelClass&&(this.cancelClass=c.cancelClass),"object"==typeof c.dateLimit&&(this.dateLimit=c.dateLimit),"object"==typeof c.locale){if("object"==typeof c.locale.daysOfWeek&&(this.locale.daysOfWeek=c.locale.daysOfWeek.slice()),"object"==typeof c.locale.monthNames&&(this.locale.monthNames=c.locale.monthNames.slice()),"number"==typeof c.locale.firstDay){this.locale.firstDay=c.locale.firstDay;for(var e=c.locale.firstDay;e>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),e--}"string"==typeof c.locale.applyLabel&&(this.locale.applyLabel=c.locale.applyLabel),"string"==typeof c.locale.cancelLabel&&(this.locale.cancelLabel=c.locale.cancelLabel),"string"==typeof c.locale.fromLabel&&(this.locale.fromLabel=c.locale.fromLabel),"string"==typeof c.locale.toLabel&&(this.locale.toLabel=c.locale.toLabel),"string"==typeof c.locale.weekLabel&&(this.locale.weekLabel=c.locale.weekLabel),"string"==typeof c.locale.customRangeLabel&&(this.locale.customRangeLabel=c.locale.customRangeLabel)}"string"==typeof c.opens&&(this.opens=c.opens),"boolean"==typeof c.showWeekNumbers&&(this.showWeekNumbers=c.showWeekNumbers),"string"==typeof c.buttonClasses&&(this.buttonClasses=[c.buttonClasses]),"object"==typeof c.buttonClasses&&(this.buttonClasses=c.buttonClasses),"boolean"==typeof c.showDropdowns&&(this.showDropdowns=c.showDropdowns),"boolean"==typeof c.singleDatePicker&&(this.singleDatePicker=c.singleDatePicker),"boolean"==typeof c.timePicker&&(this.timePicker=c.timePicker),"number"==typeof c.timePickerIncrement&&(this.timePickerIncrement=c.timePickerIncrement),"boolean"==typeof c.timePicker12Hour&&(this.timePicker12Hour=c.timePicker12Hour);var f,g,h;if("undefined"==typeof c.startDate&&"undefined"==typeof c.endDate&&a(this.element).is("input[type=text]")){var i=a(this.element).prop("value"),j=i.split(this.separator);f=g=null,2==j.length?(f=b(j[0],this.format),g=b(j[1],this.format)):this.singleDatePicker&&(f=b(i,this.format),g=b(i,this.format)),null!==f&&null!==g&&(this.startDate=f,this.endDate=g)}if("object"==typeof c.ranges){for(h in c.ranges)f=b(c.ranges[h][0]),g=b(c.ranges[h][1]),this.minDate&&f.isBefore(this.minDate)&&(f=b(this.minDate)),this.maxDate&&g.isAfter(this.maxDate)&&(g=b(this.maxDate)),this.minDate&&g.isBefore(this.minDate)||this.maxDate&&f.isAfter(this.maxDate)||(this.ranges[h]=[f,g]);var k="<ul>";for(h in this.ranges)k+="<li>"+h+"</li>";k+="<li>"+this.locale.customRangeLabel+"</li>",k+="</ul>",this.container.find(".ranges ul").remove(),this.container.find(".ranges").prepend(k)}if("function"==typeof d&&(this.cb=d),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day")),this.singleDatePicker?(this.opens="right",this.container.find(".calendar.right").show(),this.container.find(".calendar.left").hide(),this.container.find(".ranges").hide(),this.container.find(".calendar.right").hasClass("single")||this.container.find(".calendar.right").addClass("single")):(this.container.find(".calendar.right").removeClass("single"),this.container.find(".ranges").show()),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.oldChosenLabel=this.chosenLabel,this.leftCalendar={month:b([this.startDate.year(),this.startDate.month(),1,this.startDate.hour(),this.startDate.minute()]),calendar:[]},this.rightCalendar={month:b([this.endDate.year(),this.endDate.month(),1,this.endDate.hour(),this.endDate.minute()]),calendar:[]},"right"==this.opens){var l=this.container.find(".calendar.left"),m=this.container.find(".calendar.right");l.removeClass("left").addClass("right"),m.removeClass("right").addClass("left")}"undefined"!=typeof c.ranges||this.singleDatePicker||this.container.addClass("show-calendar"),this.container.addClass("opens"+this.opens),this.updateView(),this.updateCalendars()},setStartDate:function(a){"string"==typeof a&&(this.startDate=b(a,this.format)),"object"==typeof a&&(this.startDate=b(a)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.oldStartDate=this.startDate.clone(),this.updateView(),this.updateCalendars()},setEndDate:function(a){"string"==typeof a&&(this.endDate=b(a,this.format)),"object"==typeof a&&(this.endDate=b(a)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.oldEndDate=this.endDate.clone(),this.updateView(),this.updateCalendars()},updateView:function(){this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()),this.updateFormInputs()},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").val(this.startDate.valueOf()!=this.minDate.valueOf()?this.startDate.format(this.format):""),this.container.find("input[name=daterangepicker_end]").val(this.endDate.valueOf()!=this.maxDate.valueOf()?this.endDate.format(this.format):""),this.startDate.isSame(this.endDate)||this.startDate.isBefore(this.endDate)?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled")},updateFromControl:function(){if(this.element.is("input")&&this.element.val().length){var a=this.element.val().split(this.separator),c=null,d=null;2===a.length&&(c=b(a[0],this.format),d=b(a[1],this.format)),(this.singleDatePicker||null===c||null===d)&&(c=b(this.element.val(),this.format),d=c),d.isBefore(c)||(this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.startDate=c,this.endDate=d,this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.updateCalendars())}},notify:function(){this.updateView(),this.cb(this.startDate,this.endDate,this.chosenLabel)},move:function(){var b={top:0,left:0};this.parentEl.is("body")||(b={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()}),"left"==this.opens?(this.container.css({top:this.element.offset().top+this.element.outerHeight()-b.top,right:a(window).width()-this.element.offset().left-this.element.outerWidth()-b.left,left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:this.element.offset().top+this.element.outerHeight()-b.top,left:this.element.offset().left-b.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>a(window).width()&&this.container.css({left:"auto",right:0}))},toggle:function(){this.element.hasClass("active")?this.hide():this.show()},show:function(){this.element.addClass("active"),this.container.show(),this.move(),a(document).on("click.daterangepicker",a.proxy(this.outsideClick,this)),a(document).on("click.daterangepicker","[data-toggle=dropdown]",a.proxy(this.outsideClick,this)),this.element.trigger("show.daterangepicker",this)},outsideClick:function(b){var c=a(b.target);c.closest(this.element).length||c.closest(this.container).length||c.closest(".calendar-date").length||this.hide()},hide:function(){a(document).off("click.daterangepicker",this.outsideClick),this.element.removeClass("active"),this.container.hide(),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.element.trigger("hide.daterangepicker",this)},enterRange:function(a){var b=a.target.innerHTML;if(b==this.locale.customRangeLabel)this.updateView();else{var c=this.ranges[b];this.container.find("input[name=daterangepicker_start]").val(c[0].format(this.format)),this.container.find("input[name=daterangepicker_end]").val(c[1].format(this.format))}},showCalendars:function(){this.container.addClass("show-calendar"),this.move()},hideCalendars:function(){this.container.removeClass("show-calendar")},updateInputText:function(){this.element.is("input")&&!this.singleDatePicker?a(this.element).prop("value",this.container.find("input[name=daterangepicker_start]").val()+this.separator+this.container.find("input[name=daterangepicker_end]").val()).trigger("change"):this.element.is("input")&&a(this.element).prop("value",this.container.find("input[name=daterangepicker_start]").val()).trigger("change")},clickRange:function(a){var b=a.target.innerHTML;if(this.chosenLabel=b,b==this.locale.customRangeLabel)this.showCalendars();else{var c=this.ranges[b];this.startDate=c[0],this.endDate=c[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute()),this.updateCalendars(),this.updateInputText(),this.hideCalendars(),this.hide(),this.element.trigger("apply.daterangepicker",this)}},clickPrev:function(b){var c=a(b.target).parents(".calendar");
c.hasClass("left")?this.leftCalendar.month.subtract(1,"month"):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(b){var c=a(b.target).parents(".calendar");c.hasClass("left")?this.leftCalendar.month.add(1,"month"):this.rightCalendar.month.add(1,"month"),this.updateCalendars()},enterDate:function(b){var c=a(b.target).attr("data-title"),d=c.substr(1,1),e=c.substr(3,1),f=a(b.target).parents(".calendar");f.hasClass("left")?this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[d][e].format(this.format)):this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[d][e].format(this.format))},clickDate:function(c){var d,e,f=a(c.target).attr("data-title"),g=a(c.target).hasClass("active"),h=f.substr(1,1),i=f.substr(3,1),j=a(c.target).parents(".calendar");if(j.hasClass("left")){if(d=g?this.minDate:this.leftCalendar.calendar[h][i],e=this.endDate,"object"==typeof this.dateLimit){var k=b(d).add(this.dateLimit).startOf("day");e.isAfter(k)&&(e=k)}}else if(e=g?this.maxDate:this.rightCalendar.calendar[h][i],d=this.startDate,"object"==typeof this.dateLimit){var l=b(e).subtract(this.dateLimit).startOf("day");d.isBefore(l)&&(d=l)}if(this.singleDatePicker&&j.hasClass("left")?e=d.clone():this.singleDatePicker&&j.hasClass("right")&&(d=e.clone()),j.find("td").removeClass("active"),d.isSame(e)||d.isBefore(e))this.startDate=d,this.endDate=e,this.chosenLabel=this.locale.customRangeLabel;else if(d.isAfter(e)){var m=this.endDate.diff(this.startDate);this.startDate=d,this.endDate=b(d).add(m,"ms"),this.chosenLabel=this.locale.customRangeLabel}a(c.target).addClass("active"),this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()),this.updateCalendars(),this.timePicker||e.endOf("day"),this.singleDatePicker&&this.clickApply()},clickApply:function(){this.updateInputText(),this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.chosenLabel=this.oldChosenLabel,this.updateView(),this.updateCalendars(),this.hide(),this.element.trigger("cancel.daterangepicker",this)},updateMonthYear:function(b){var c=a(b.target).closest(".calendar").hasClass("left"),d=c?"left":"right",e=this.container.find(".calendar."+d),f=parseInt(e.find(".monthselect").val(),10),g=e.find(".yearselect").val();this[d+"Calendar"].month.month(f).year(g),this.updateCalendars()},updateTime:function(b){var c=a(b.target).closest(".calendar").hasClass("left"),d=c?"left":"right",e=this.container.find(".calendar."+d),f=parseInt(e.find(".hourselect").val(),10),g=parseInt(e.find(".minuteselect").val(),10);if(this.timePicker12Hour){var h=e.find(".ampmselect").val();"PM"===h&&12>f&&(f+=12),"AM"===h&&12===f&&(f=0)}if(c){var i=this.startDate.clone();i.hour(f),i.minute(g),this.startDate=i,this.leftCalendar.month.hour(f).minute(g)}else{var j=this.endDate.clone();j.hour(f),j.minute(g),this.endDate=j,this.rightCalendar.month.hour(f).minute(g)}this.updateCalendars()},updateCalendars:function(){this.startDate.valueOf()!=this.minDate.valueOf()&&(this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.month(),this.leftCalendar.month.year(),this.leftCalendar.month.hour(),this.leftCalendar.month.minute(),"left")),this.endDate.valueOf()!=this.maxDate.valueOf()&&(this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.month(),this.rightCalendar.month.year(),this.rightCalendar.month.hour(),this.rightCalendar.month.minute(),"right")),this.container.find(".calendar.left").empty().html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.maxDate)),this.container.find(".calendar.right").empty().html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.startDate,this.maxDate)),this.container.find(".ranges li").removeClass("active");var a=!0,b=0;for(var c in this.ranges)this.timePicker?this.startDate.isSame(this.ranges[c][0])&&this.endDate.isSame(this.ranges[c][1])&&(a=!1,this.chosenLabel=this.container.find(".ranges li:eq("+b+")").addClass("active").html()):this.startDate.format("YYYY-MM-DD")==this.ranges[c][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[c][1].format("YYYY-MM-DD")&&(a=!1,this.chosenLabel=this.container.find(".ranges li:eq("+b+")").addClass("active").html()),b++;a&&(this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html())},buildCalendar:function(a,c,d,e){var f,g=b([c,a,1]),h=b(g).subtract(1,"month").month(),i=b(g).subtract(1,"month").year(),j=b([i,h]).daysInMonth(),k=g.day(),l=[];for(f=0;6>f;f++)l[f]=[];var m=j-k+this.locale.firstDay+1;m>j&&(m-=7),k==this.locale.firstDay&&(m=j-6);var n,o,p=b([i,h,m,12,e]);for(f=0,n=0,o=0;42>f;f++,n++,p=b(p).add(24,"hour"))f>0&&n%7===0&&(n=0,o++),l[o][n]=p.clone().hour(d),p.hour(12);return l},renderDropdowns:function(a,b,c){for(var d=a.month(),e='<select class="monthselect">',f=!1,g=!1,h=0;12>h;h++)(!f||h>=b.month())&&(!g||h<=c.month())&&(e+="<option value='"+h+"'"+(h===d?" selected='selected'":"")+">"+this.locale.monthNames[h]+"</option>");e+="</select>";for(var i=a.year(),j=c&&c.year()||i+5,k=b&&b.year()||i-50,l='<select class="yearselect">',m=k;j>=m;m++)l+='<option value="'+m+'"'+(m===i?' selected="selected"':"")+">"+m+"</option>";return l+="</select>",e+l},renderCalendar:function(b,c,d,e){var f='<div class="calendar-date">';f+='<table class="table-condensed">',f+="<thead>",f+="<tr>",this.showWeekNumbers&&(f+="<th></th>"),f+=!d||d.isBefore(b[1][1])?'<th class="prev available"><i class="fa fa-arrow-left icon-arrow-left glyphicon glyphicon-arrow-left"></i></th>':"<th></th>";var g=this.locale.monthNames[b[1][1].month()]+b[1][1].format(" YYYY");this.showDropdowns&&(g=this.renderDropdowns(b[1][1],d,e)),f+='<th colspan="5" class="month">'+g+"</th>",f+=!e||e.isAfter(b[1][1])?'<th class="next available"><i class="fa fa-arrow-right icon-arrow-right glyphicon glyphicon-arrow-right"></i></th>':"<th></th>",f+="</tr>",f+="<tr>",this.showWeekNumbers&&(f+='<th class="week">'+this.locale.weekLabel+"</th>"),a.each(this.locale.daysOfWeek,function(a,b){f+="<th>"+b+"</th>"}),f+="</tr>",f+="</thead>",f+="<tbody>";for(var h=0;6>h;h++){f+="<tr>",this.showWeekNumbers&&(f+='<td class="week">'+b[h][0].week()+"</td>");for(var i=0;7>i;i++){var j="available ";j+=b[h][i].month()==b[1][1].month()?"":"off",d&&b[h][i].isBefore(d)||e&&b[h][i].isAfter(e)?j=" off disabled ":b[h][i].format("YYYY-MM-DD")==c.format("YYYY-MM-DD")?(j+=" active ",b[h][i].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&(j+=" start-date "),b[h][i].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&(j+=" end-date ")):b[h][i]>=this.startDate&&b[h][i]<=this.endDate&&(j+=" in-range ",b[h][i].isSame(this.startDate)&&(j+=" start-date "),b[h][i].isSame(this.endDate)&&(j+=" end-date "));var k="r"+h+"c"+i;f+='<td class="'+j.replace(/\s+/g," ").replace(/^\s?(.*?)\s?$/,"$1")+'" data-title="'+k+'">'+b[h][i].date()+"</td>"}f+="</tr>"}f+="</tbody>",f+="</table>",f+="</div>";var l;if(this.timePicker){f+='<div class="calendar-time">',f+='<select class="hourselect">';var m=0,n=23,o=c.hour();for(this.timePicker12Hour&&(m=1,n=12,o>=12&&(o-=12),0===o&&(o=12)),l=m;n>=l;l++)f+=l==o?'<option value="'+l+'" selected="selected">'+l+"</option>":'<option value="'+l+'">'+l+"</option>";for(f+="</select> : ",f+='<select class="minuteselect">',l=0;60>l;l+=this.timePickerIncrement){var p=l;10>p&&(p="0"+p),f+=l==c.minute()?'<option value="'+l+'" selected="selected">'+p+"</option>":'<option value="'+l+'">'+p+"</option>"}f+="</select> ",this.timePicker12Hour&&(f+='<select class="ampmselect">',f+=c.hour()>=12?'<option value="AM">AM</option><option value="PM" selected="selected">PM</option>':'<option value="AM" selected="selected">AM</option><option value="PM">PM</option>',f+="</select>"),f+="</div>"}return f},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData("daterangepicker")}},a.fn.daterangepicker=function(b,d){return this.each(function(){var e=a(this);e.data("daterangepicker")&&e.data("daterangepicker").remove(),e.data("daterangepicker",new c(e,b,d))}),this}}(window.jQuery,window.moment),!function(a){var b=function(){this.addData=function(b,c){var d,c=c,e=a(c),f=e.siblings(".multilang_body"),g="name";"object"==typeof b?(d=b,d.lang_name&&(g=d.lang_name)):d=b.split(","),f.val(d),a.each(d,function(a,b){a>0?f.find(".m_context").eq(a).attr("data-bind","value:"+g+a).text(b):f.find(".m_context").eq(a).attr("data-bind","value:"+g).text(b)}),this.ko_vm&&ko.applyBindings(this.ko_vm,f[0])},this.ko_vm,this.add_ko_vm=function(a){this.ko_vm=a},this.multinfo=function(b){var d=c.target,e=a(d),f=c,g="",h=!0;a.isArray(b)?(e.addClass("multilang_array").after("<div class='multilang_body'><input class='lang_value' contenteditable='true'><span class='fa fa-sort-desc lang_icon'><span class='m_icon'></span></span>").css("display","none"),a.each(b,function(a,b){g+="<label attr='lang_"+a+"'><span class='m_context'></span><span class='m_icon'>"+b+"</span></label>"}),e.siblings(".multilang_body").append("<div class='multilang_menu '>"+g+"</div>"),a(".multilang_body").off("click mouseenter mouseleave").on({click:function(){var b=a(this),c=b.parents(".multilang_body");b.siblings("input").focus(),"block"==c.find(".multilang_menu").css("display")?c.find(".multilang_menu").css("display","none"):c.find(".multilang_menu").css("display","block")},mouseenter:function(){h=!1},mouseleave:function(){h=!0}},".lang_icon").off("blur").on("blur",".lang_value",function(){var b=a(this),c=f.fixtarget(b),d=b.parents(".multilang_body"),e=b.attr("class").split(" ")[2],g=b.val();b.hasClass("ready_change")&&f.changeData(c,e,g),h&&d.find(".multilang_menu").css("display","none")}),a(".multilang_menu").off("click").on("click","label",function(){var b=a(this),c=b.parents(".multilang_body"),d=b.index();tmptext=b.children(".m_context").text(),tmpicon=b.children(".m_icon").clone(),c.find(".lang_value").attr("class","").addClass("ready_change lang_value "+d).val(tmptext).focus(),c.find(".lang_icon").removeClass("fa-sort-desc").html(tmpicon),c.trigger("change.u.multilang",{newValue:tmptext,lang:tmpicon.text()})}).off("mouseenter mouseleave").on({mouseenter:function(){h=!1},mouseleave:function(){h=!0}})):console.error("Not object")},this.multidata=function(a,b){var d=c.target;c.addData(a,d,b)},this.changeData=function(b,c,d){var e=b.value;jq_t=a(b),e[c]=d,jq_t.find("label[attr='lang_"+c+"']").find(".m_context").text(d).prop("value",d).trigger("change")},this.getData=function(){var b=a(c.target).siblings(".multilang_body")[0],d=b.value;return d},this.fixtarget=function(a){return c.target=a.parents(".multilang_body")[0],c.target},this.target="",this.doSth=function(b){return c.target=this[0],"object"!=typeof b?c[b]():(a.each(b,function(a,b){c[a](b)}),void(c.target=""))}},c=new b;a.fn.extend({multilang:c.doSth})}(jQuery),function(a,b,c,d){var e=function(b,c){this.defaults={},this.gridComp=c,this.options=a.extend({},this.defaults,b),this.rows=new Array,this.hasParentRows=new Array,this.nothasParentRows=new Array,this.sortRows()},f=function(b,c){this.defaults={width:200,sortable:!0,canDrag:!0,fixed:!1,visible:!0,canVisible:!0,sumCol:!1,editable:!0,autoExpand:!1,editType:"text",dataType:"String",format:"yyyy-MM-dd hh:mm:ss"};var d={sortable:c.sortable,canDrag:c.canDrag,width:c.columnWidth};"Date"==b.dataType&&(this.defaults.format="yyyy-MM-dd"),c.showTree&&(b.sortable=!1),this.options=a.extend({},this.defaults,d,b),this.options.width=parseInt(this.options.width),this.firstColumn=!1},g=function(b,c){this.dataSource=e,this.gridCompColumn=f,this.ele=b[0],this.$ele=b,this.defaults={id:"grid",columnWidth:200,sortable:!0,canDrag:!0,showHeader:!0,columnMenu:!0,showNumCol:!1,multiSelect:!1,showSumRow:!1,editable:!1,editType:"default",showTree:!1,autoExpand:!0,cancelFocus:!1},this.transDefault={ml_show_column:trans("gridComp.show_column","æ¾ç¤º/éèå"),ml_clear_set:trans("gridComp.clear_set","æ¸é¤è®¾ç½®"),ml_no_rows:trans("gridComp.no_rows","æ æ°æ®"),ml_sum:trans("gridComp.sum","åè®¡:"),ml_close:trans("gridComp.close","å³é­")},this.transMap=a.extend({},this.transDefault,c.transMap),this.options=a.extend({},this.defaults,c),this.gridCompColumnArr=new Array,this.gridCompColumnFixedArr=new Array,this.basicGridCompColumnArr=new Array,this.treeLeft=10,this.multiSelectWidth=40,this.numWidth=40,this.multiWidth=40,this.headerHeight=34,this.countContentHeight=!0,this.minColumnWidth=80,this.columnMenuWidth=160,this.scrollBarHeight=16,this.columnMenuHeight=33,this.initGrid()};g.prototype={initGrid:function(){var a=this;this.initOptions(),this.initVariable(),this.initWidthVariable(),this.initGridCompColumn(),this.initDataSource(),this.createDivs(),this.inte=setInterval(function(){a.setIntervalFun.call(a)},100)},destroySelf:function(){clearInterval(this.inte),this.$ele.data("gridComp",null),this.ele.innerHTML=""},initOptions:function(){this.options.width=this.formatWidth(this.options.width),this.options.height=this.formatWidth(this.options.height),"100%"!=this.options.height&&this.options.height||(this.countContentHeight=!1),this.leftW=0,this.options.showNumCol&&(this.leftW+=this.numWidth),this.options.multiSelect&&(this.leftW+=this.multiWidth),this.exceptContentHeight=0,this.options.showHeader&&(this.exceptContentHeight+=this.headerHeight);var a=b.location.href,c=a.indexOf("?");c>0&&(a=a.substring(0,c)),this.localStorageId=this.options.id+a},initVariable:function(){this.initDataSourceVariable(),this.mouseUpX="mouseUpX",this.mouseUpY="mouseUpY",this.mouseDownX="mouseDownX",this.mouseDownY="mouseDownY",this.mouseMoveX="mouseMoveX",this.mouseMoveY="mouseMoveY",this.scrollLeft=0,this.scrollTop=0,this.showType="",this.createGridFlag=!1,this.createFormFlag=!1,this.columnClickX=0,this.columnClickY=0,this.$sd_storageData=null,this.columnMenuMove=!1,this.createColumnMenuFlage=!1,this.firstColumn=!0,this.lastVisibleColumn=null,this.lastVisibleColumnWidth=0,this.menuColumnsHeight=0},initDataSourceVariable:function(){this.selectRows=new Array,this.selectRowsObj=new Array,this.selectRowsIndex=new Array,this.allRows=new Array,this.eidtRowIndex=-1},initWidthVariable:function(){this.wholeWidth=0,this.wholeHeight=0,this.rowHeight=0,this.fixedRealWidth=0,this.fixedWidth=0,this.contentRealWidth=0,this.contentWidth=0,this.contentMinWidth=0,this.contentHeight=0},initGridCompColumn:function(){var b=this;b.gridCompColumnFixedArr=new Array,this.options.columns&&a.each(this.options.columns,function(a){var c=new f(this,b.options);b.gridCompColumnArr[a]=c;var d=new f(this,b.options);b.basicGridCompColumnArr[a]=d});var c=this.getGridCompColumnArrFromLocal();null!=c&&(this.gridCompColumnArr=c,a.each(this.gridCompColumnArr,function(){for(var c=this.options.field,d=0;d<b.options.columns.length;d++){var e=b.options.columns[d];if(e.field==c){var f=a.extend({},e,this.options);this.options=f;break}}})),this.menuColumnsHeight=this.gridCompColumnArr.length*this.columnMenuHeight,this.initGridCompFixedColumn(),this.columnsVisibleFun()},initGridCompFixedColumn:function(){var b=this;a.each(this.gridCompColumnArr,function(){1==this.options.fixed&&b.gridCompColumnFixedArr.push(this)}),a.each(this.gridCompColumnFixedArr,function(a){for(var a=b.gridCompColumnArr.length;a>-1;a--)if(b.gridCompColumnArr[a]==this){b.gridCompColumnArr.splice(a,1);break}})},initDataSource:function(){this.dataSourceObj=new e(this.options.dataSource,this)},createDivs:function(){this.ele.innerHTML="";var a="",b="";b+=this.options.width?"width:"+this.options.width+";":"width:auto;",b+=this.options.height?"height:"+this.options.height+";":"height:auto;",""!=b&&(a='style="'+b+'"');var c='<div id="'+this.options.id+'" data-role="grid" class="u-grid" '+a+">";c+="</div>",this.ele.insertAdjacentHTML("afterBegin",c);var c='<div id="'+this.options.id+'_top" class="u-grid-top"></div>';this.ele.insertAdjacentHTML("afterBegin",c),this.initEventFun(),this.widthChangeFun()},repaintDivs:function(){this.repaintGridDivs()},createGridDivs:function(){if(!this.createGridFlag){a("#"+this.options.id)[0]&&(a("#"+this.options.id)[0].innerHTML="");var b='<div id="'+this.options.id+'_grid" class="u-grid-grid">';this.options.showHeader&&(b+=this.createColumnMenu(),b+=this.createHeader()),b+=this.createContent(),b+=this.createContentEditMenu(),b+="</div>",a("#"+this.options.id)[0]&&a("#"+this.options.id)[0].insertAdjacentHTML("afterBegin",b),this.headerFirstClassFun(),this.initGridEventFun(),this.afterGridDivsCreate(),this.createGridFlag=!0}},repaintGridDivs:function(){a("#"+this.options.id+"_grid").remove(null,!0),this.showType="",this.wholeWidth=0,this.createGridFlag=!1,this.columnsVisibleFun(),this.widthChangeFun()},createColumnMenu:function(){var b='<div class="u-grid-column-menu" id="'+this.options.id+'_column_menu">';return b+='<ul data-role="menu" role="menubar" class="u-grid-column-menu-ul" id="'+this.options.id+'_column_menu_ul">',b+='<li class="u-grid-column-menu-li" role="menuitem">',b+='<div class="u-grid-column-menu-div1" id="'+this.options.id+'_showColumn">',b+='<span class="u-grid-column-menu-span">'+this.transMap.ml_show_column+"</span>",b+='<div class="u-grid-column-menu-div3 fa fa-caret-right"></div>',b+="</div></li>",b+='<li class="u-grid-column-menu-li" role="menuitem">',b+='<div class="u-grid-column-menu-div1" id="'+this.options.id+'_clearSet">',b+='<span class="u-grid-column-menu-span">'+this.transMap.ml_clear_set+"</span>",b+="</div></li>",b+="</ul></div>",b+='<div class="u-grid-column-menu-columns" id="'+this.options.id+'_column_menu_columns">',b+='<ul data-role="menu" role="menubar" class="u-grid-column-menu-columns-ul" id="'+this.options.id+'_column_menu_columns_ul">',a.each(this.gridCompColumnArr,function(a){b+='<li class="u-grid-column-menu-columns-li" role="menuitem" index="'+a+'">',b+='<div class="u-grid-column-menu-columns-div1">';var c="";this.options.visible&&(c=" checked"),this.options.canVisible||(c+=' style="display:none;"'),b+='<div class="u-grid-column-menu-columns-div2"><input type="checkbox" '+c+"></div>",b+='<span class="u-grid-column-menu-columns-span">'+this.options.title+"</span>",b+="</div></li>"}),b+="</ul></div>"},createHeader:function(){var a="";this.wholeWidth>0;var b='<div class="u-grid-header" id="'+this.options.id+'_header"><div class="u-grid-header-wrap" id="'+this.options.id+'_header_wrap" data-role="resizable" '+a+">";return(this.options.multiSelect||this.options.showNumCol)&&(b+='<div id="'+this.options.id+'_header_left" class="u-grid-header-left" style="width:'+this.leftW+'px;">',this.options.multiSelect&&(b+='<div class="u-grid-header-multi-select" style="width:'+this.multiWidth+'px;"><input type="checkbox" id="'+this.options.id+'_header_multi_input"></div>'),this.options.showNumCol&&(b+='<div class="u-grid-header-num" style="width:'+this.numWidth+'px;"></div>'),b+="</div>"),b+=this.createHeaderTable("fixed"),b+=this.createHeaderTable(),b+="</div>",b+='<div class="u-grid-header-resize-handle" id="'+this.options.id+'_resize_handle"><div class="u-grid-header-resize-handle-inner"></div></div>',b+="</div>"},createHeaderTable:function(a){var b,c,d;"fixed"==a?(b=parseInt(this.leftW),c="absolute;width:"+this.fixedWidth+"px;z-index:11;background:#F9F9F9;",d="fixed_"):(b=parseInt(this.leftW)+parseInt(this.fixedWidth),c="relative;",d="",this.contentMinWidth>0&&(c+="width:"+this.contentMinWidth+"px;"));var e='<table role="grid" id="'+this.options.id+"_header_"+d+'table" style="position:'+c+";left:"+b+'px">';return e+=this.createColgroup(a),e+='<thead role="rowgroup" id="'+this.options.id+"_header_"+d+'thead">',e+=this.createThead(a),e+="</thead></table>"},createColgroup:function(b){var c,d=this,e="<colgroup>";return c="fixed"==b?this.gridCompColumnFixedArr:this.gridCompColumnArr,a.each(c,function(){this.options.visible&&(e+="<col",e+=' style="width:'+d.formatWidth(this.options.width)+'"',e+=">")}),e+="</colgroup>"},createThead:function(b){var c,d=this,e=0,f='<tr role="row">';return c="fixed"==b?this.gridCompColumnFixedArr:this.gridCompColumnArr,a.each(c,function(a){var c=e,g="";0==this.options.visible?(c=-1,g='style="display:none;"'):e++,f+='<th role="columnheader" data-filed="'+this.options.field+'" rowspan="1" class="u-grid-header-th" '+g+'field="'+this.options.field+'" index="'+a+'" visibleIndex="'+c+'"><div style="position:relative;">';var h="";this.options.headerColor&&(h='style="color:'+this.options.headerColor+'"'),f+='<div class="u-grid-header-link" field="'+this.options.field+'" title="'+this.options.title+'" '+h+">"+this.options.title+"</div>",d.options.columnMenu&&"fixed"!=b&&(f+='<div class="u-grid-header-columnmenu fa fa-bars " field="'+this.options.field+'" style="display:none;"></div>'),f+="</div></th>"}),f+="</tr>"},createContent:function(){var b="",c="",d="";if(this.countContentHeight){var e=a("#"+this.options.id)[0].offsetHeight;this.wholeHeight=e,e>0&&(this.contentHeight=parseInt(e)-this.exceptContentHeight>0?parseInt(e)-this.exceptContentHeight:0,this.contentHeight>0&&(b='style="max-height:'+this.contentHeight+'px;"'))}var f='<div id="'+this.options.id+'_content" class="u-grid-content" '+b+">";return(this.options.showNumCol||this.options.multiSelect)&&(f+=this.createContentLeft(),this.contentWidth>this.contentMinWidth||(c="display:none;",d="bottom:0px;"),this.options.showSumRow&&(f+='<div class="u-grid-content-left-sum-bottom" id="'+this.options.id+'_content_left_sum_bottom" style="width:'+(this.leftW+this.fixedWidth)+"px;"+d+'">',f+="</div>"),f+='<div class="u-grid-content-left-bottom" id="'+this.options.id+'_content_left_bottom" style="width:'+(this.leftW+this.fixedWidth)+"px;"+c+'">',f+="</div>"),f+=this.createContentTable("fixed"),f+=this.createContentTable(),f+="</div>"},createContentLeft:function(){var b=this,c="",d=0;return this.options.multiSelect&&(c+='<div class="u-grid-content-left" id="'+this.options.id+'_content_multiSelect" style="width:'+this.multiSelectWidth+'px;">',this.dataSourceObj.rows&&a.each(this.dataSourceObj.rows,function(){c+=b.createContentLeftMultiSelectRow(this)}),c+="</div>",d+=this.multiSelectWidth),this.options.showNumCol&&(c+='<div class="u-grid-content-left" id="'+this.options.id+'_content_numCol" style="width:'+this.numWidth+"px;left:"+d+'px;">',this.dataSourceObj.rows&&a.each(this.dataSourceObj.rows,function(a){c+=b.createContentLeftNumColRow(a)}),c+="</div>"),c},createContentLeftMultiSelectRow:function(a,b){var c="";!this.options.autoExpand&&a.level>0&&"block"!=b&&(c="display:none;");var d='<div style="width:'+this.multiSelectWidth+"px;"+c+'" class="u-grid-content-multiSelect"><input type="checkbox" class="u-grid-multi-input"></div>';return d},createContentLeftNumColRow:function(a){var b='<div style="width:'+this.numWidth+'px;" class="u-grid-content-num">'+(a+1)+"</div>";return b},createContentTable:function(a){var b,c,d,e,f,g;e=this.countContentHeight&&parseInt(this.contentHeight)>0?"max-height:"+this.contentHeight+"px;":"","fixed"==a?(b=parseInt(this.leftW),c="fixed_",f="fixed-",d='style="position:absolute;width:'+this.fixedWidth+"px;left:"+b+"px;"+e+'"',g='style="width:'+this.fixedWidth+'px;"'):(b=parseInt(this.leftW)+parseInt(this.fixedWidth),c="",f="",d='style="position:relative;left:'+b+"px;"+e,this.contentMinWidth>0&&(d+="width:"+this.contentMinWidth+'px;"'),d+='"',g="",this.contentMinWidth>0&&(g=this.contentWidth>0?'style="min-width:'+this.contentMinWidth+"px;width:"+this.contentWidth+'px;"':'style="min-width:'+this.contentMinWidth+'px;"'));var h='<div id="'+this.options.id+"_content_"+c+'div" class="u-grid-content-'+f+'div" '+d+">";return h+='<table role="grid" id="'+this.options.id+"_content_"+c+'table" '+g+">",h+=this.createColgroup(a),h+='<thead role="rowgroup" id="'+this.options.id+"_content_"+c+'thead" style="display:none">',h+=this.createThead(a),h+="</thead>",h+=this.createContentRows(a),h+="</table>","fixed"!=a&&(h+=this.createNoRowsDiv()),h+="</div>"},createNoRowsDiv:function(){var a="",b="";this.contentMinWidth>0&&(a+='style="width:'+this.contentMinWidth+'px;"'),this.contentWidth>0&&(b+='style="width:'+this.contentWidth+'px;"');var c='<div class="u-grid-noRowsDiv"'+b+' id="'+this.options.id+'_noRows"></div>';return c+='<div class="u-grid-noRowsShowDiv"'+a+' id="'+this.options.id+'_noRowsShow">'+this.transMap.ml_no_rows+"</div>"},createContentRows:function(b){var c,d=this,e="";return c="fixed"==b?"fixed_":"",this.dataSourceObj.rows&&(e+='<tbody role="rowgroup" id="'+this.options.id+"_content_"+c+'tbody">',a.each(this.dataSourceObj.rows,function(){e+=d.createContentOneRow(this,b)}),d.options.showSumRow&&this.dataSourceObj.rows&&this.dataSourceObj.rows.length>0&&(e+=d.createSumRow(b)),e+="</tbody>"),e},createContentOneRow:function(a,b,c){var d="";!this.options.autoExpand&&a.level>0&&"block"!=c&&(d='style="display:none"');var e='<tr role="row" '+d+">";return e+=this.createContentOneRowTd(a,b),e+="</tr>"},createContentOneRowForIE:function(a,b,c,d,e){var f=a.insertRow(b+1);f.role="row",!this.options.autoExpand&&f.level>0&&"block"!=e&&(f.style.display="none"),this.createContentOneRowTdForIE(f,c,d)},repaintRow:function(b,c,d){var e=a(b),f=this.getTrIndex(e);b.innerHTML=this.createContentOneRowTd(c,d);var g={};g.begin=f,g.length=1,g.createFlag=d,this.renderTypeFun(g)},createContentOneRowTd:function(b,c){var d,e=this,f="";d="fixed"==c?this.gridCompColumnFixedArr:this.gridCompColumnArr;var g=b.value;return a.each(d,function(){var c=this.options.field,d=a(g).attr(c);d=e.getString(d,""),"object"==a.type(d)&&(d=d.showValue);var h=(this.options.renderType,""),i="",j="",k="";if(e.options.showTree&&this.firstColumn){var l=parseInt(e.treeLeft)*parseInt(b.level);h='style="position:relative;',b.hasChild?i=e.options.autoExpand?'<span class=" fa fa-minus-square-o u-grid-content-tree-span"></span>':'<span class=" fa fa-plus-square-o u-grid-content-tree-span"></span>':l+=16,h+="left:"+l+'px;"'}this.options.visible||(k='style="display:none;"'),this.options.icon&&(j='<span class="'+this.options.icon+'"></span>'),f+='<td role="rowcell"  '+k+'><div class="u-grid-content-td-div" '+h+">"+i+j+"<span>"+d+"</span></div></td>"}),f},createContentOneRowTdForIE:function(b,c,d){var e,f=this;e="fixed"==d?this.gridCompColumnFixedArr:this.gridCompColumnArr;var g=c.value;a.each(e,function(){var d=this.options.field,e=a(g).attr(d);e=f.getString(e,""),"object"==a.type(e)&&(e=e.showValue);var h=(this.options.renderType,""),i="",j="",k="",l=b.insertCell();if(l.row="rowcell",l.title=e,f.options.showTree&&this.firstColumn){var m=parseInt(f.treeLeft)*parseInt(c.level);h='style="position:relative;',c.hasChild?i=f.options.autoExpand?'<span class=" fa fa-minus-square-o u-grid-content-tree-span"></span>':'<span class=" fa fa-plus-square-o u-grid-content-tree-span"></span>':m+=18,h+="left:"+m+'px;"'}this.options.icon&&(j='<span class="'+this.options.icon+'"></span>'),k+='<div class="u-grid-content-td-div" '+h+">"+i+j+"<span>"+e+"</span></div>",l.insertAdjacentHTML("afterBegin",k)})},createSumRow:function(b){if(this.options.showSumRow){var c,d,e=this;"fixed"==b?(c="fixed_",d=this.gridCompColumnFixedArr):(c="",d=this.gridCompColumnArr);var f=parseInt(this.wholeHeight)-this.exceptContentHeight-48-this.scrollBarHeight;f=f>0?f:0;var g='<tr role="row" class="u-grid-content-sum-row" id="'+this.options.id+"_content_"+c+'sum_row" style="top:'+f+'px;">';return a.each(d,function(){var a=this.options.field,b=e.dataSourceObj.getSumValue(a,this,e),c="";this.options.visible||(c='style="display:none;"'),g+='<td role="rowcell" title="'+b+'" '+c+">",this.firstColumn&&(g+='<div class="u-gird-centent-sum-div"><span>'+e.transDefault.ml_sum+"</span></div>"),g+='<div class="u-grid-content-td-div"><span>'+b+"</span></div></td>"}),g+="</tr>"}},createSumRowForIE:function(b,c){if(this.options.showSumRow){var d,e,f=this;"fixed"==c?(d="fixed_",e=this.gridCompColumnFixedArr):(d="",e=this.gridCompColumnArr);var g=parseInt(this.wholeHeight)-this.exceptContentHeight-48-this.scrollBarHeight;g=g>0?g:0;var h=b.insertRow();h.row="row",h.className="u-grid-content-sum-row",h.id=this.options.id+"_content_"+d+"sum_row",h.style.top=g+"px",a.each(e,function(){var a=this.options.field,b=f.dataSourceObj.getSumValue(a,this,f),c=h.insertCell();c.role="rowcell",c.title=b;var d='<div class="u-grid-content-td-div"><span>'+b+"</span></div>";c.insertAdjacentHTML("afterBegin",d)})}},repairSumRow:function(){if(this.options.showSumRow){a("#"+this.options.id+"_content_div tbody .u-grid-content-sum-row").remove(),a("#"+this.options.id+"_content_fixed_div tbody .u-grid-content-sum-row").remove();try{if(this.dataSourceObj.rows&&this.dataSourceObj.rows.length>0){var b=this.createSumRow();a("#"+this.options.id+"_content_div tbody")[0].insertAdjacentHTML("beforeEnd",b);var b=this.createSumRow("fixed");a("#"+this.options.id+"_content_fixed_div tbody")[0].insertAdjacentHTML("beforeEnd",b)}}catch(c){{var d=a("#"+this.options.id+"_content_div table")[0];a("#"+this.options.id+"_content_fixed_div table")[0]}this.createSumRowForIE(d),this.createSumRowForIE(d,"fixed")}}},repairContent:function(){var b=a("#"+this.options.id+"_content").parent();if(a("#"+this.options.id+"_content").remove(),b[0]){var c=this.createContent();b[0].insertAdjacentHTML("beforeEnd",c),this.initContentDivEventFun(),a("#"+this.options.id+"_content_div")[0]&&(a("#"+this.options.id+"_content_div")[0].scrollLeft=this.scrollLeft),a("#"+this.options.id+"_content_edit_menu").css("display","none")}},createContentEditMenu:function(){var a='<div class="u-grid-content-edit-menu" id="'+this.options.id+'_content_edit_menu">';return a+='<button type="button" class="u-grid-content-edit-menu-button u-grid-content-edit-menu-button-ok" id="'+this.options.id+'_content_edit_menu_close">'+this.transDefault.ml_close+"</button>",a+="</div>"},createFromDivs:function(){if(!this.createFormFlag){var b='<div id="'+this.options.id+'_form" class="u-grid-form">';b+=this.createFromContent(),a("#"+this.options.id)[0].insertAdjacentHTML("afterBegin",b),this.createFormFlag=!0}},createFromContent:function(){var a='<div class="u-grid-form-content" id="'+this.options.id+'_form_content" class="u-grid-content">';return a+='<table role="grid" id="'+this.options.id+'_form_content_table">',a+=this.createFormContentRows(),a+="</table>"},createFormContentRows:function(){var b=this,c="";return this.dataSourceObj.rows&&(c+='<tbody role="rowgroup" id="'+this.options.id+'_form_content_tbody">',a.each(this.dataSourceObj.rows,function(){c+='<tr role="row"><td role="rowcell">';var d=this.value;a.each(b.gridCompColumnArr,function(){var b=this.options.field,e=this.options.title,f=a(d).attr(b);c+="<div>"+e+":</div>",c+="<div>"+f+"</div>"}),c+="</td></tr>"}),c+="</tbody>"),c},initEventFun:function(){var b=this;a("#"+this.options.id).on("mousedown",function(c){if(a(c.target).closest("#"+b.options.id+"_header").length>0){b.mouseDownX=c.clientX,b.mouseDownY=c.clientY;var d=a(c.target).closest("th")[0];b.swapColumnStart(c,d),c.preventDefault()}else a(c.target).closest("#"+b.options.id+"_content").length>0}),a("#"+this.options.id).on("mousemove",function(c){if(a(c.target).closest("#"+b.options.id+"_header").length>0){var d=a(c.target).closest("th")[0];b.headerThDrag(c,d)}b.mouseMoveX=c.clientX,b.mouseMoveY=c.clientY,b.mouseMoveX==b.mouseDownX&&b.mouseDownY==b.mouseMoveY||"mouseDownX"==b.mouseDownX||(b.swapColumnFlag=!0),b.dragFun(c),b.swapColumnFun(c),c.stopPropagation()}),a("#"+this.options.id+"_top").on("mousemove",function(a){b.mouseMoveX=a.clientX,b.mouseMoveY=a.clientY,b.mouseMoveX==b.mouseDownX&&b.mouseDownY==b.mouseMoveY||"mouseDownX"==b.mouseDownX||(b.swapColumnFlag=!0),b.dragFun(a),b.swapColumnFun(a),a.stopPropagation()}),a("#"+this.options.id).on("mouseup",function(c){if(a(c.target).closest("#"+b.options.id+"_header").length>0){if(b.mouseUpX=c.clientX,b.mouseUpY=c.clientY,b.mouseDownX==b.mouseUpX&&b.mouseDownY==b.mouseUpY){b.columnClickX=c.clientX,b.columnClickY=c.clientY;var d=a(c.target).closest("th")[0];if(a(c.target).hasClass("u-grid-header-columnmenu")){a("#"+b.options.id+"_column_menu").css("display","block");
var e=d.attrRightTotalWidth-b.scrollLeft+b.leftW+b.fixedWidth-20;e+b.columnMenuWidth>b.wholeWidth&&(e=d.attrRightTotalWidth-b.scrollLeft+b.leftW+b.fixedWidth-b.columnMenuWidth+1),a("#"+b.options.id+"_column_menu").css("left",e),a("#"+b.options.id+"_column_menu").css("top",b.headerHeight),b.ele.createColumnMenuFlage=!0}else b.canSortable(c,d)}}else a(c.target).closest("#"+b.options.id+"_content").length>0;b.dragEnd(c),b.swapColumnEnd(c),b.mouseUpX="mouseUpX",b.mouseUpY="mouseUpY",b.mouseDownX="mouseDownX",b.mouseDownY="mouseDownY",b.mouseMoveX="mouseMoveX",b.mouseMoveY="mouseMoveY"}),a("#"+this.options.id+"_top").on("mouseup",function(a){b.dragEnd(a),b.swapColumnEnd(a),b.mouseUpX="mouseUpX",b.mouseUpY="mouseUpY",b.mouseDownX="mouseDownX",b.mouseDownY="mouseDownY",b.mouseMoveX="mouseMoveX",b.mouseMoveY="mouseMoveY"}),a(c).on("click",function(){0==b.columnMenuMove&&0==b.ele.createColumnMenuFlage&&a("#"+b.options.id+"_column_menu",b.$ele).css("display","none"),b.ele.createColumnMenuFlage=!1})},initGridEventFun:function(){var d=this;a("#"+this.options.id+"_resize_handle").on("mousedown",function(a){return d.dragStart(a),!1}),a("#"+this.options.id+"_header_table th").on("mousemove",function(){a(".u-grid-header-columnmenu",a(this)).css("display","block")}),a("#"+this.options.id+"_header_table th").on("mouseout",function(){a(".u-grid-header-columnmenu",a(this)).css("display","none")}),this.initContentDivEventFun(),a("#"+this.options.id+"_header_multi_input").on("click",function(){this.checked?d.setAllRowSelect():d.setAllRowUnSelect()}),a("#"+this.options.id+"_column_menu_ul").on("mousemove",function(){d.columnMenuMove=!0}),a("#"+this.options.id+"_column_menu_ul").on("mouseout",function(){d.columnMenuMove=!1}),a("#"+this.options.id+"_showColumn").on("mousemove",function(c){if(d.hideMenuColumns&&clearTimeout(d.hideMenuColumns),"block"!=a("#"+d.options.id+"_column_menu_columns").css("display")){var e=a(b).width(),f=a(b).height(),g=a("#"+d.options.id+"_column_menu").css("left"),h=parseInt(g)+d.columnMenuWidth,i=d.columnClickX+2*d.columnMenuWidth;i>e&&(h=parseInt(g)-d.columnMenuWidth),a("#"+d.options.id+"_column_menu_columns").css("left",h);var j=d.headerHeight,k=c.clientY,l=d.menuColumnsHeight;d.menuColumnsHeight+30>f?(l=f-30,a("#"+d.options.id+"_column_menu_columns").css("height",l+"px")):a("#"+d.options.id+"_column_menu_columns").css("height","");var m=k+l;m>f&&(j=-1*(k-(f-l))+30),a("#"+d.options.id+"_column_menu_columns").css("top",j),a("#"+d.options.id+"_column_menu_columns").css("display","block"),d.columnMenuMove=!0}}),a("#"+this.options.id+"_showColumn").on("mouseout",function(){d.hideMenuColumns=setTimeout(function(){a("#"+d.options.id+"_column_menu_columns").css("display","none"),d.columnMenuMove=!1},200)}),a("#"+this.options.id+"_column_menu_columns").on("mousemove",function(){d.hideMenuColumns&&clearTimeout(d.hideMenuColumns),a("#"+d.options.id+"_column_menu_columns").css("display","block"),d.columnMenuMove=!0}),a("#"+this.options.id+"_column_menu_columns").on("mouseout",function(){d.hideMenuColumns=setTimeout(function(){a("#"+d.options.id+"_column_menu_columns").css("display","none"),d.columnMenuMove=!1},200)}),a("#"+this.options.id+"_clearSet").on("click",function(){d.clearLocalData(),d.initGridCompColumn(),d.dataSourceObj.sortRows(),d.repaintGridDivs(),"function"==typeof d.options.onClearSetFun&&d.options.onClearSetFun(d)}),a("#"+this.options.id+"_column_menu_columns_ul li input").on("click",function(b){var e=a(this).closest("li").attr("index");if(d.gridCompColumnArr[e].options.visible){a(this)[0].checked=!1;var f=a("input:checked",a("#"+d.options.id+"_column_menu_columns_ul")).length;if(0==f)return void(a(this)[0].checked=!0);8==c.documentMode?(d.gridCompColumnArr[e].options.visible=!1,d.repaintGridDivs()):(d.setColumnVisibleByIndex(e,!1),d.gridCompColumnArr[e].options.visible=!1)}else a(this)[0].checked=!0,8==c.documentMode?(d.gridCompColumnArr[e].options.visible=!0,d.repaintGridDivs()):(d.setColumnVisibleByIndex(e,!0),d.gridCompColumnArr[e].options.visible=!0);d.saveGridCompColumnArrToLocal(),b.stopPropagation()}),a("#"+this.options.id+"_column_menu_columns_ul li").on("click",function(){var b=a(this).attr("index"),c=d.gridCompColumnArr[b];if(!c.options.canVisible)return!1;if(c.options.visible){a("input",a(this))[0].checked=!1;var e=a("input:checked",a("#"+d.options.id+"_column_menu_columns_ul")).length;if(0==e)return void(a("input",a(this))[0].checked=!0);d.setColumnVisibleByIndex(b,!1),d.gridCompColumnArr[b].options.visible=!1}else a("input",a(this))[0].checked=!0,d.setColumnVisibleByIndex(b,!0),d.gridCompColumnArr[b].options.visible=!0;d.saveGridCompColumnArrToLocal()}),a("#"+this.options.id+"_content_edit_menu_close").on("click",function(){d.editClose()})},initContentDivEventFun:function(){var b=this;a("#"+b.options.id+"_content .u-grid-content-left").on("click",function(c){var d=a(c.target).closest("input");if(d.length>0){var e=a(d.parent()),f=a("div",e.parent()).index(e);d[0].checked?b.setRowSelect(f):b.setRowUnselect(f)}}),a("#"+this.options.id+"_content_div").on("scroll",function(){b.scrollLeft=this.scrollLeft,b.scrollTop=this.scrollTop,a("#"+b.options.id+"_header_table").css("left",b.leftW-b.scrollLeft+b.fixedWidth+"px"),a("#"+b.options.id+"_noRowsShow").css("left",b.scrollLeft+"px"),a("#"+b.options.id+"_content_multiSelect").css("top",-b.scrollTop+"px"),a("#"+b.options.id+"_content_numCol").css("top",-b.scrollTop+"px"),a("#"+b.options.id+"_content_fixed_div").css("top",-b.scrollTop+"px")}),a("#"+this.options.id+"_content_tbody").on("click",function(a){"function"==typeof b.options.onDblClickFun?b.isDblEvent("tbodyClick",b.dblClickFun,a,b.clickFun,a):b.clickFun(a)}),a("#"+this.options.id+"_content_fixed_tbody").on("click",function(a){"function"==typeof b.options.onDblClickFun?b.isDblEvent("tbodyClick",b.dblClickFun,a,b.clickFun,a):b.clickFun(a)})},setIntervalFun:function(){this.widthChangeFun(),this.heightChangeFun()},afterGridDivsCreate:function(){this.columnsVisibleFun(),this.resetThVariable(),this.countRowHeight(),this.noRowsShowFun();var a={};a.createFlag="fixed",this.renderTypeFun(a),this.renderTypeFun(),this.resetScrollLeft(),this.hideEditMenu()},countRowHeight:function(){a("#"+this.options.id+"_content_tbody tr")[0]&&(this.rowHeight=a("#"+this.options.id+"_content_tbody tr")[0].offsetHeight)},noRowsShowFun:function(){this.dataSourceObj.rows&&this.dataSourceObj.rows.length>0?(a("#"+this.options.id+"_noRowsShow").css("display","none"),a("#"+this.options.id+"_noRows").css("display","none")):(a("#"+this.options.id+"_noRowsShow").css("display","block"),a("#"+this.options.id+"_noRows").css("display","block"))},renderTypeFun:function(b){if("undefined"==typeof b)var c=null,d=null,e="";else var c="undefined"==typeof b.begin?null:b.begin,d="undefined"==typeof b.length?null:b.length,e="undefined"==typeof b.createFlag?"":b.createFlag;var f=this,c=parseInt(c),d=parseInt(d),g=c;d>0&&(g=parseInt(c+d-1)),"fixed"==e?a.each(this.gridCompColumnFixedArr,function(a){f.fixedRenderTypeByColumn(this,a,c,d)}):a.each(this.gridCompColumnArr,function(a){f.renderTypeByColumn(this,a,c,d)})},renderTypeByColumn:function(b,c,e,f){var g=this,h=b.options.renderType,i=b.options.dataType,j=b.options.precision,k=b.options.format,l=b.options.field,m=e;f>0&&(m=parseInt(e+f-1)),a.each(g.dataSourceObj.rows,function(f){if(e>=0&&f>=e&&m>=f||isNaN(e)){var n=a("#"+g.options.id+"_content_tbody tr:eq("+f+") td:eq("+c+")")[0];if(n){var o=a("#"+g.options.id+"_content_tbody tr:eq("+f+") td:eq("+c+") span:last-child")[0];if(o){var p=a(this.value).attr(l);if(o.innerHTML="","function"==typeof h){p=g.getString(p,"");var q={};q.value=p,q.element=o,q.gridObj=g,q.row=this,q.gridCompColumn=b,q.rowIndex=f,h.call(g,q)}else if("Date"==i||"DateTime"==i){(null==p||p==d||"null"==p||"undefined"==p||""==p)&&(p="");var r=new Date(p);parseInt(r.valueOf())>0?p=r.format(k):(r=moment(p,"YYYY-MM-DD HH:mm:ss").toDate(),parseInt(r.valueOf())>0&&(p=r.format(k))),o.innerHTML=p,n.title=p}else if("Int"==i)p=parseInt(p),o.innerHTML=p,n.title=p;else if("Float"==i){if(j){var s={};s.value=p,s.precision=j,p=g.DicimalFormater(s)}else p=parseFloat(p);o.innerHTML=p,n.title=p}else p=g.getString(p,""),v1=p.replace(/\</g,"<"),v1=v1.replace(/\>/g,">"),n.title=p,p=p.replace(/\</g,"&lt;"),p=p.replace(/\>/g,"&gt;"),o.innerHTML=p}}}})},fixedRenderTypeByColumn:function(b,c,d,e){var f=this,g=b.options.renderType,h=b.options.dataType,i=b.options.precision,j=b.options.format,k=b.options.field,l=d;e>0&&(l=parseInt(d+e-1)),a.each(f.dataSourceObj.rows,function(e){if(d>=0&&e>=d&&l>=e||isNaN(d)){var m=a("#"+f.options.id+"_content_fixed_tbody tr:eq("+e+") td:eq("+c+")")[0];if(m){var n=a("#"+f.options.id+"_content_fixed_tbody tr:eq("+e+") td:eq("+c+") span:last-child")[0],o=a(this.value).attr(k);if(o=f.getString(o,""),"function"==typeof g){var p={};p.value=o,p.element=n,p.gridObj=f,p.row=this,p.gridCompColumn=b,p.rowIndex=e,g.call(f,p)}else if("Date"==h||"DateTime"==h){var q=new Date(o);parseInt(q.valueOf())>0?o=q.format(j):(q=moment(o,"YYYY-MM-DD HH:mm:ss").toDate(),parseInt(q.valueOf())>0&&(o=q.format(j))),n.innerHTML=o,m.title=o}else if("Int"==h)o=parseInt(o),n.innerHTML=o,m.title=o;else if("Float"==h){if(i){var r={};r.value=o,r.precision=i,o=f.DicimalFormater(r)}else o=parseFloat(o);n.innerHTML=o,m.title=o}else n.innerHTML=o,m.title=o}}})},afterRepaintGrid:function(){this.resetScrollLeft(),this.hideEditMenu()},resetScrollLeft:function(){a("#"+this.options.id+"_content_div")[0]&&(a("#"+this.options.id+"_content_div")[0].scrollLeft=this.scrollLeft)},hideEditMenu:function(){a("#"+this.options.id+"_content_edit_menu").css("display","none")},widthChangeFun:function(){var b=this;if(a("#"+this.options.id)[0]){var c=a("#"+this.options.id)[0].offsetWidth;this.wholeWidth!=c&&(this.wholeWidth=c,c>300&&("form"==this.showType||""==this.showType)?b.widthChangeGridFun():c>0&&300>c&&("grid"==this.showType||""==this.showType)&&this.widthChangeFormFun(),c>300&&(this.contentMinWidth=parseInt(this.wholeWidth)-parseInt(this.leftW)-parseInt(this.fixedWidth),this.contentMinWidth<0&&(this.contentMinWidth=0),setTimeout(function(){a("#"+b.options.id+"_header_wrap").css("max-width",b.wholeWidth-4+"px"),a("#"+b.options.id+"_content_div").css("width",b.contentMinWidth+"px"),a("#"+b.options.id+"_content_table").css("min-width",b.contentMinWidth+"px"),a("#"+b.options.id+"_content_table").css("width",b.contentMinWidth+"px"),a("#"+b.options.id+"_header_table").css("min-width",b.contentMinWidth+"px"),a("#"+b.options.id+"_header_table").css("width",b.contentMinWidth+"px"),"function"==typeof b.options.afterCreate&&b.options.afterCreate.call(b)},100)))}},widthChangeGridFun:function(){var b=parseInt(this.wholeWidth/2);if(this.fixedWidth=this.fixedRealWidth>b?b:this.fixedRealWidth,this.contentMinWidth=parseInt(this.wholeWidth)-parseInt(this.leftW)-parseInt(this.fixedWidth),this.contentMinWidth<0&&(this.contentMinWidth=0),this.contentRealWidth<this.contentMinWidth){this.contentWidth=this.contentMinWidth;var c=this.lastVisibleColumn.options.width;this.lastVisibleColumnWidth=c+(this.contentMinWidth-this.contentRealWidth),this.lastVisibleColumn.options.width=this.lastVisibleColumnWidth}else this.contentWidth=this.contentRealWidth;this.createGridFlag=!1,this.createGridDivs(),a("#"+this.options.id+"_form").css("display","none"),a("#"+this.options.id+"_grid").css("display","block"),this.showType="grid"},widthChangeFormFun:function(){this.createFromDivs(),a("#"+this.options.id+"_grid").css("display","none"),a("#"+this.options.id+"_form").css("display","block"),this.showType="form","function"==typeof this.options.afterCreate&&this.options.afterCreate.call(this)},heightChangeFun:function(){if(this.countContentHeight){var b=this.wholeHeight,c=a("#"+this.options.id)[0].offsetHeight;if(this.wholeHeight=c,b!=c){var d=c-this.exceptContentHeight>0?c-this.exceptContentHeight:0;a("#"+this.options.id+"_content").css("height",d+"px"),a("#"+this.options.id+"_content_div").css("height",d+"px")}}},columnsVisibleFun:function(){var b=this,c=0,d=0;this.firstColumn=!0,a.each(this.gridCompColumnFixedArr,function(){this.options.visible&&(c+=parseInt(this.options.width),this.firstColumn=b.firstColumn,b.firstColumn=!1)}),this.fixedRealWidth=c,a.each(this.gridCompColumnArr,function(){this.options.visible&&(d+=parseInt(this.options.width),this.firstColumn=b.firstColumn,b.firstColumn=!1,b.lastVisibleColumn=this,b.lastVisibleColumnWidth=this.options.width)}),this.contentRealWidth=d},resetThVariable:function(){var b=this;this.contentWidth=0,a("#"+this.options.id+"_header_table th",this.$ele).each(function(c){var d=b.gridCompColumnArr[c],e=0;d.options.visible&&(e=d.options.width),this.attrLeftTotalWidth=b.contentWidth,b.contentWidth+=e,!a("#"+b.options.id+"_resize_handle")[0].nowTh&&d.options.canDrag&&(a("#"+b.options.id+"_resize_handle").css("left",e-4+b.leftW),a("#"+b.options.id+"_resize_handle")[0].nowTh=this),this.gridCompColumn=d,this.attrWidth=e,this.attrRightTotalWidth=b.contentWidth})},contentWidthChange:function(b){if(b<this.contentMinWidth){var c=this.lastVisibleColumn.options.width;this.lastVisibleColumnWidth=c+(this.contentMinWidth-b),a("#"+this.options.id+"_header_table col:last").css("width",this.lastVisibleColumnWidth+"px"),a("#"+this.options.id+"_content_table col:last").css("width",this.lastVisibleColumnWidth+"px"),b=this.contentMinWidth}return a("#"+this.options.id+"_content_table").css("width",b+"px"),a("#"+this.options.id+"_noRows").css("width",b+"px"),b>this.contentMinWidth?(a("#"+this.options.id+"_content_left_bottom").css("display","block"),a("#"+this.options.id+"_content_left_sum_bottom").css("bottom",16)):(a("#"+this.options.id+"_content_left_bottom").css("display","none"),a("#"+this.options.id+"_content_left_sum_bottom").css("bottom",0)),b},getColumnAttr:function(b,c){for(var d=0;d<this.gridCompColumnArr.length;d++)if(this.gridCompColumnArr[d].options.field==c)return a(this.gridCompColumnArr[d].options).attr(b);return""},getColumnByField:function(a){for(var b=0;b<this.gridCompColumnArr.length;b++)if(this.gridCompColumnArr[b].options.field==a)return this.gridCompColumnArr[b];return null},getIndexOfColumn:function(a){for(var b=-1,c=0;c<this.gridCompColumnArr.length;c++)if(this.gridCompColumnArr[c]==a){b=c;break}return b},getVisibleIndexOfColumn:function(b){for(var c=-1,d=0,e=0;e<this.gridCompColumnArr.length;e++){if(this.gridCompColumnArr[e]==b){"none"!=a("#"+this.options.id+"_header th:eq("+e+")").css("display")&&(c=d);break}"none"!=a("#"+this.options.id+"_header th:eq("+e+")").css("display")&&d++}return c},getNextVisibleInidexOfColumn:function(b){for(var c=-1,d=!1,e=0,f=0;f<this.gridCompColumnArr.length;f++)if(this.gridCompColumnArr[f]!=b){if(1==d&&"none"!=a("#"+this.options.id+"_header th:eq("+f+")").css("display")){c=e;break}"none"!=a("#"+this.options.id+"_header th:eq("+f+")").css("display")&&e++}else d=!0;return c},headerFirstClassFun:function(){a("#"+this.options.id+"_grid .u-grid-header-th-first").removeClass("u-grid-header-th-first"),a("#"+this.options.id+"_grid th:eq(0)").addClass("u-grid-header-th-first")},isDblEvent:function(a,b,c,d,e){if(null!=this.currentEventName&&this.currentEventName==a)b.call(this,c),this.currentEventName=null,this.cleanCurrEventName&&clearTimeout(this.cleanCurrEventName);else{var f=this;this.cleanCurrEventName&&clearTimeout(this.cleanCurrEventName),this.currentEventName=a,this.cleanCurrEventName=setTimeout(function(){f.currentEventName=null,d.call(f,e)},500)}},dblClickFun:function(b){if("function"==typeof this.options.onDblClickFun){var c=a(b.target).closest("tr");if(c[0].id==this.options.id+"_edit_tr")return;var d=0;c.length>0&&(d=this.getTrIndex(c));var e={};e.gridObj=this,e.rowObj=this.dataSourceObj.rows[d],e.rowIndex=d,this.options.onDblClickFun(e)}},clickFun:function(b){var c=this,d=a(b.target).closest("td");if(d.length>0){var e=d.parent(),f=this.getTrIndex(e),g=c.dataSourceObj.rows[f];if(g){var h=g.childRowIndex,i=d.find(".fa-minus-square-o"),j=d.find(".fa-plus-square-o");if(i.length>0){if(i.removeClass("fa-minus-square-o").addClass("fa-plus-square-o"),h.length>0){var k=c.getAllChildRowIndex(g);a.each(k,function(){var b=a("tr:eq("+parseInt(this)+")",e.parent());b.css("display","none"),a("#"+c.options.id+"_content_multiSelect >div:nth-child("+(parseInt(this)+1)+")").css("display","none"),a(".fa-minus-square-o",b).removeClass("fa-minus-square-o").addClass("fa-plus-square-o")})}return}if(j.length>0)return j.removeClass("fa-plus-square-o").addClass("fa-minus-square-o"),void(h.length>0&&a.each(h,function(){var b=a("tr:eq("+parseInt(this)+")",e.parent());b.css("display","");a("#"+c.options.id+"_content_multiSelect >div:nth-child("+(parseInt(this)+1)+")")[0];a("#"+c.options.id+"_content_multiSelect >div:nth-child("+(parseInt(this)+1)+")").css("display","")}))}}var e=a(b.target).closest("tr");if(e[0].id!=this.options.id+"_edit_tr"&&e.length>0){var f=this.getTrIndex(e),g=c.dataSourceObj.rows[f];if(g){var h=g.childRowIndex;if(c.dataSourceObj.rows[f].focus&&c.options.cancelFocus?c.setRowUnFocus(f):c.dataSourceObj.rows[f].focus||c.setRowFocus(f),c.options.editable&&c.eidtRowIndex!=f){-1!=c.eidtRowIndex&&c.editClose();var f=this.getTrIndex(e);this.eidtRowIndex=f,c.editRow()}}}},setColumnVisibleByColumn:function(a,b){var c=this.getIndexOfColumn(a);this.setColumnVisibleByIndex(c,b)},setColumnVisibleByIndex:function(b,c){if(b>=0){var d=this.gridCompColumnArr[b],e=this.getVisibleIndexOfColumn(d);if(0==d.options.visible&&c){var f="<col";d.options.width&&(f+=' style="width:'+this.formatWidth(d.options.width)+'"'),f+=">",a("#"+this.options.id+"_header th:eq("+b+")").css("display",""),a("#"+this.options.id+"_content th:eq("+b+")").css("display",""),a("td:eq("+b+")",a("#"+this.options.id+"_content tbody tr")).css("display","");var g=this.getNextVisibleInidexOfColumn(d);if(-1==g)try{a("#"+this.options.id+"_header col:last")[0].insertAdjacentHTML("afterEnd",f),a("#"+this.options.id+"_content col:last")[0].insertAdjacentHTML("afterEnd",f)}catch(h){a("#"+this.options.id+"_header col:last").after(f),a("#"+this.options.id+"_content col:last").after(f)}else try{a("#"+this.options.id+"_header col:eq("+g+")")[0].insertAdjacentHTML("beforeBegin",f),a("#"+this.options.id+"_content col:eq("+g+")")[0].insertAdjacentHTML("beforeBegin",f)}catch(h){a("#"+this.options.id+"_header col:eq("+g+")").before(f),a("#"+this.options.id+"_content col:eq("+g+")").before(f)}var i=this.contentWidth+d.options.width}if(1==d.options.visible&&!c){a("#"+this.options.id+"_header th:eq("+b+")").css("display","none"),a("#"+this.options.id+"_header col:eq("+e+")").remove(),a("#"+this.options.id+"_content th:eq("+b+")").css("display","none"),a("#"+this.options.id+"_content col:eq("+e+")").remove(),a("td:eq("+b+")",a("#"+this.options.id+"_content tbody tr")).css("display","none");var i=this.contentWidth-d.options.width}d.options.visible=c,this.columnsVisibleFun();var j=this.contentWidthChange(i);this.lastVisibleColumn.options.width=this.lastVisibleColumnWidth,this.contentWidth=j,this.resetThVariable(),this.saveGridCompColumnArrToLocal()}},dragStart:function(a){this.dragFlag=!0,this.dragW=null,this.dragStartX=a.clientX},dragFun:function(b){if(this.dragFlag){var c=a("#"+this.options.id+"_resize_handle")[0].nowTh,d=a(c),e=d.attr("index"),f=this.gridCompColumnArr[e];if(nowVisibleThIndex=this.getVisibleIndexOfColumn(f),c&&f!=this.lastVisibleColumn){this.dragEndX=b.clientX;var g=this.dragEndX-this.dragStartX,h=c.attrWidth+g;cWidth=this.contentWidth+g,h>this.minColumnWidth&&(this.dragW=this.contentWidthChange(cWidth),a("#"+this.options.id+"_header_table col:eq("+nowVisibleThIndex+")").css("width",h+"px"),a("#"+this.options.id+"_content_table col:eq("+nowVisibleThIndex+")").css("width",h+"px"),f.options.width=h)}a("#"+this.options.id+"_top").css("display","block")}},dragEnd:function(){this.dragFlag&&(this.resetThVariable(),this.saveGridCompColumnArrToLocal()),this.lastVisibleColumn.options.width=this.lastVisibleColumnWidth,this.dragW&&(this.contentWidth=this.dragW),a("#"+this.options.id+"_resize_handle")[0].nowTh=null,this.dragFlag=!1,a("#"+this.options.id+"_top").css("display","none")},headerThDrag:function(b,c){if(!this.dragFlag&&!this.swapColumnFlag&&c&&c.gridCompColumn&&c.gridCompColumn.options.canDrag&&a("#"+this.options.id+"_resize_handle")[0].nowTh!=c){{a(c)}a("#"+this.options.id+"_resize_handle").css("left",c.attrRightTotalWidth-this.scrollLeft-4+this.leftW+this.fixedWidth),a("#"+this.options.id+"_resize_handle")[0].nowTh=c}},swapColumnStart:function(a,b){this.swapColumnEle=b,this.swapColumnStartX=a.clientX,this.swapColumnStartY=a.clientY},swapColumnFun:function(b){var c=this;if(this.swapColumnFlag){var d=this.swapColumnEle,e=a(d),f=d.gridCompColumn;if(0==a("#"+this.options.id+"_clue").length){var g=a('<div class="u-grid u-grid-header-drag-clue" id="'+this.options.id+'_clue" />').css({width:d.scrollWidth+"px",left:d.attrLeftTotalWidth-c.scrollLeft+c.leftW+c.fixedWidth+"px",top:"0px",paddingLeft:e.css("paddingLeft"),paddingRight:e.css("paddingRight"),lineHeight:e.height()+"px",paddingTop:e.css("paddingTop"),paddingBottom:e.css("paddingBottom")}).html(f.options.title||f.options.field).prepend('<span class="fa fa-ban u-grid-header-drag-status" />');a("#"+this.options.id)[0].insertAdjacentElement("afterBegin",g[0]),g.on("mousemove",function(){b.stopPropagation()})}this.swapColumnEndX=b.clientX,this.swapColumnEndY=b.clientY;var h=this.swapColumnEndX-this.swapColumnStartX,i=this.swapColumnEndY-this.swapColumnStartY;if(a("#"+this.options.id+"_clue").css({left:d.attrLeftTotalWidth+h-c.scrollLeft+c.leftW+c.fixedWidth+"px",top:i+"px"}),0==a("#"+this.options.id+"_swap_top").length){var g=a('<span class="fa fa-sort-desc u-grid-header-swap-tip-span"  id="'+this.options.id+'_swap_top"/>');g.css({top:e.height()-6+"px"});var j=a('<span class="fa fa-sort-asc u-grid-header-swap-tip-span" id="'+this.options.id+'_swap_down" />');j.css({top:"6px"}),a("#"+this.options.id)[0].insertAdjacentElement("afterBegin",g[0]),a("#"+this.options.id)[0].insertAdjacentElement("afterBegin",j[0])}this.canSwap=!1,a("#"+this.options.id+"_header_table th").each(function(d){var e=a(this).offset().left,f=e+parseInt(this.attrWidth);if(0==d&&b.clientX<e)c.swapColumnEle!=this&&(c.swapToColumnEle="LeftEle",a("#"+c.options.id+"_swap_top").css({left:-c.scrollLeft-3+c.leftW+c.fixedWidth+"px",display:"block"}),a("#"+c.options.id+"_swap_down").css({left:-c.scrollLeft-3+c.leftW+c.fixedWidth+"px",display:"block"})),c.canSwap=!0;else if(e<b.clientX&&b.clientX<f&&c.swapColumnEle!=this&&parseInt(a(this).attr("index"))+1!=parseInt(a(c.swapColumnEle).attr("index")))return c.swapToColumnEle!=this&&(c.swapToColumnEle=this,a("#"+c.options.id+"_swap_top").css({left:this.attrRightTotalWidth-c.scrollLeft-3+c.leftW+c.fixedWidth+"px",display:"block"}),a("#"+c.options.id+"_swap_down").css({left:this.attrRightTotalWidth-c.scrollLeft-3+c.leftW+c.fixedWidth+"px",display:"block"})),c.canSwap=!0,!1}),this.canSwap?a(".u-grid-header-drag-status").removeClass("fa-ban").addClass("fa-plus-circle"):(a("#"+this.options.id+"_swap_top").css("display","none"),a("#"+this.options.id+"_swap_down").css("display","none"),a(".u-grid-header-drag-status").removeClass("fa-plus-circle").addClass("fa-ban"),this.swapToColumnEle=null),a("#"+this.options.id+"_top").css("display","block")}},swapColumnEnd:function(){if(this.swapColumnFlag){if(this.swapToColumnEle){var b=this.swapColumnEle,c=this.swapToColumnEle,d=a(b).attr("index"),e=a(c).attr("index"),f=this.gridCompColumnArr[d];this.gridCompColumnArr.splice(parseInt(e)+1,0,f),e>d?this.gridCompColumnArr.splice(d,1):this.gridCompColumnArr.splice(parseInt(d)+1,1),this.saveGridCompColumnArrToLocal(),this.repaintGridDivs()}a("#"+this.options.id+"_clue").remove(),a("#"+this.options.id+"_swap_top").css("display","none"),a("#"+this.options.id+"_swap_down").css("display","none")}this.swapColumnFlag=!1,a("#"+this.options.id+"_top").css("display","none")},canSortable:function(b,c){var d=this,e=a(c),f=e.attr("field"),g=this.getColumnAttr("sortable",f);if(g){if(b.shiftKey){var h=[];a(".u-grid-header-sort-priority").each(function(b,c){var d,e=a(c),f=parseInt(e.text()),g=e.closest("th").attr("field");e.parent().hasClass("fa-angle-up")?d="asc":e.parent().hasClass("fa-angle-down")&&(d="desc"),h[f-1]={field:g,sortType:d}});var i;if((i=e.find(".fa-angle-up")).length>0){var j=parseInt(i.find(".u-grid-header-sort-priority").text());h[j-1].sortType="desc",i.removeClass("fa-angle-up").addClass("fa-angle-down")}else if((i=e.find(".fa-angle-down")).length>0){for(var j=parseInt(i.find(".u-grid-header-sort-priority").text()),k=j;k<h.length;k++){var l=a("[field="+h[k].field+"]").find(".u-grid-header-sort-priority");l.text(parseInt(l.text())-1)}h.splice(j-1,1),i.remove()}else h.push({field:f,sortType:"asc"}),e.first().append('<span class="fa fa-angle-up u-grid-header-sort-span" ><span class="u-grid-header-sort-priority">'+h.length+"</span></span>");this.dataSourceObj.sortRowsByPrio(h)}else a(".fa-angle-up").parent().parent()[0]==c?(a(".fa-angle-up").remove(),a(c.firstChild)[0].insertAdjacentHTML("beforeEnd",'<span class="fa fa-angle-down u-grid-header-sort-span" ><span class="u-grid-header-sort-priority">1</span></span>'),"function"==typeof this.options.onSortFun?this.options.onSortFun(f,"asc"):this.dataSourceObj.sortRows(f,"asc")):a(".fa-angle-down").parent().parent()[0]==c?(a(".fa-angle-down").remove(),"function"==typeof this.options.onSortFun?this.options.onSortFun():this.dataSourceObj.sortRows()):(a(".fa-angle-up").remove(),a(".fa-angle-down").remove(),a(c.firstChild)[0].insertAdjacentHTML("beforeEnd",'<span class="fa fa-angle-up u-grid-header-sort-span"><span class="u-grid-header-sort-priority">1</span></span>'),"function"==typeof this.options.onSortFun?this.options.onSortFun(f,"desc"):this.dataSourceObj.sortRows(f,"desc"));d.repairContent(),d.afterGridDivsCreate()}},editRow:function(){var b=this,c=a("#"+this.options.id+"_content_tbody tr:eq("+this.eidtRowIndex+")"),d=a("#"+this.options.id+"_content_fixed_tbody tr:eq("+this.eidtRowIndex+")"),e=this.dataSourceObj.rows[this.eidtRowIndex].value;if(this.editRowObj=this.cloneObj(e),"default"==this.options.editType){a.each(this.gridCompColumnArr,function(d){if(this.options.editable){var f=a("td:eq("+d+")",c)[0],g=this.options.field,h=a(e).attr(g);h=b.getString(h,""),b.editCell(f,h,g,this.options.editType,b.editRowObj)}}),a.each(this.gridCompColumnFixedArr,function(c){if(this.options.editable){var f=a("td:eq("+c+")",d)[0],g=this.options.field,h=a(e).attr(g);h=b.getString(h,""),b.editCell(f,h,g,this.options.editType,b.editRowObj)}}),a("#"+this.options.id+"_content_edit_menu").css("display","block"),a("#"+this.options.id+"_content_edit_menu").css("left",this.leftW+"px"),a("#"+this.options.id+"_content_edit_menu_cancel").css("marginLeft","10px");var f=a("tr:visible",c.parent()).index(c);this.rowHeight=c.height();var g=this.rowHeight*(f+1)+this.headerHeight+1;a("#"+this.options.id+"_content_edit_menu").css("top",g+"px")}else if("form"==this.options.editType)if("function"==typeof this.options.formEditRenderFun){if(this.fixedWidth>0)var h=a("#"+this.options.id+"_content_fixed_table")[0];else var h=a("#"+this.options.id+"_content_table")[0];var i=h.insertRow(this.eidtRowIndex+2);i.id=this.options.id+"_edit_tr";var j=i.insertCell();j.id=this.options.id+"_edit_td",j.style.borderBottom="0px";var k=parseInt(this.contentMinWidth)+parseInt(this.fixedWidth),l='<div id="'+this.options.id+'_edit_form" class="u-grid-edit-form" style="width:'+k+'px;">';l+="</div>",j.innerHTML=l;var m={};m.grid=gridObj,m.element=a("#"+this.options.id+"_edit_form")[0],m.editRowObj=this.editRowObj,this.options.formEditRenderFun.call(this,m);var n=a("#"+this.options.id+"_edit_td")[0].offsetHeight;if(n+=40,i.style.height=n+"px",a("#"+this.options.id+"_edit_form")[0].style.height=n+"px",this.options.multiSelect){var o=a("#"+this.options.id+"_content_multiSelect > div:eq("+this.eidtRowIndex+")"),l='<div id="'+this.options.id+'_multiSelect_edit" style="float:left;position:relative;width:'+this.multiSelectWidth+"px;height:"+n+'px;"></div>';o[0].insertAdjacentHTML("afterEnd",l)}if(this.options.showNumCol){var o=a("#"+this.options.id+"_content_numCol > div:eq("+this.eidtRowIndex+")"),l='<div id="'+this.options.id+'_numCol_edit" style="float:left;position:relative;width:'+this.numWidth+"px;height:"+n+'px;"></div>';o[0].insertAdjacentHTML("afterEnd",l)}a("#"+this.options.id+"_content_edit_menu").css("display","block"),a("#"+this.options.id+"_content_edit_menu").css("left",this.leftW+"px");var f=a("tr:visible",c.parent()).index(c);this.rowHeight=c.height();var g=this.rowHeight*(f+1)+this.headerHeight+1;if(g=g+n-40,a("#"+this.options.id+"_content_edit_menu").css("top",g+"px"),this.fixedWidth>0){var p=a("#"+this.options.id+"_content_table")[0],q=p.insertRow(this.eidtRowIndex+2);q.id=this.options.id+"_edit_tr1",q.style.height=n+"px"}}else{if(this.fixedWidth>0)var h=a("#"+this.options.id+"_content_fixed_table")[0];else var h=a("#"+this.options.id+"_content_table")[0];var i=h.insertRow(this.eidtRowIndex+2);i.id=this.options.id+"_edit_tr";var j=i.insertCell();j.id=this.options.id+"_edit_td",j.style.borderBottom="0px";var k=parseInt(this.contentMinWidth)+parseInt(this.fixedWidth),l='<div id="'+this.options.id+'_edit_form" class="u-grid-edit-form" style="width:'+k+'px;">';a.each(this.gridCompColumnFixedArr,function(){if(this.options.editable){var c=this.options.field,d=a(e).attr(c);d=b.getString(d,"");var f=this.options.title;l+=b.formEditCell(d,c,f)}}),a.each(this.gridCompColumnArr,function(){if(this.options.editable){var c=this.options.field,d=a(e).attr(c);d=b.getString(d,"");var f=this.options.title;l+=b.formEditCell(d,c,f)}}),l+="</div>",j.innerHTML=l,a.each(this.gridCompColumnFixedArr,function(){if(this.options.editable){{var c=this.options.field,d=a("#"+b.options.id+"_edit_"+c)[0],f=a(e).attr(c);this.options.title}f=b.getString(f,""),l+=b.editCell(d,f,c,this.options.editType,b.editRowObj)}}),a.each(this.gridCompColumnArr,function(){if(this.options.editable){{var c=this.options.field,d=a("#"+b.options.id+"_edit_"+c)[0],f=a(e).attr(c);this.options.title}f=b.getString(f,""),l+=b.editCell(d,f,c,this.options.editType,b.editRowObj)}});var n=a("#"+this.options.id+"_edit_td")[0].offsetHeight;if(n+=40,i.style.height=n+"px",a("#"+this.options.id+"_edit_form")[0].style.height=n+"px",this.options.multiSelect){var o=a("#"+this.options.id+"_content_multiSelect > div:eq("+this.eidtRowIndex+")"),l='<div id="'+this.options.id+'_multiSelect_edit" style="float:left;position:relative;width:'+this.multiSelectWidth+"px;height:"+n+'px;"></div>';o[0].insertAdjacentHTML("afterEnd",l)}if(this.options.showNumCol){var o=a("#"+this.options.id+"_content_numCol > div:eq("+this.eidtRowIndex+")"),l='<div id="'+this.options.id+'_numCol_edit" style="float:left;position:relative;width:'+this.numWidth+"px;height:"+n+'px;"></div>';o[0].insertAdjacentHTML("afterEnd",l)}a("#"+this.options.id+"_content_edit_menu").css("display","block"),a("#"+this.options.id+"_content_edit_menu").css("left",this.leftW+"px");var f=a("tr:visible",c.parent()).index(c);this.rowHeight=c.height();var g=this.rowHeight*(f+1)+this.headerHeight+1;if(g=g+n-40,a("#"+this.options.id+"_content_edit_menu").css("top",g+"px"),this.fixedWidth>0){var p=a("#"+this.options.id+"_content_table")[0],q=p.insertRow(this.eidtRowIndex+2);q.id=this.options.id+"_edit_tr1",q.style.height=n+"px"}}},editClose:function(){var b=a("#"+this.options.id+"_content_tbody tr:eq("+this.eidtRowIndex+")")[0],c=a("#"+this.options.id+"_content_fixed_tbody tr:eq("+this.eidtRowIndex+")")[0],d=this.dataSourceObj.rows[this.eidtRowIndex];if(d){try{this.repaintRow(b,d),this.repaintRow(c,d,"fixed")}catch(e){var f=a("#"+this.options.id+"_content_table")[0],g=a("#"+this.options.id+"_content_fixed_table")[0];f.deleteRow(this.eidtRowIndex+1),g.deleteRow(this.eidtRowIndex+1),this.createContentOneRowForIE(f,this.eidtRowIndex,d),this.createContentOneRowForIE(g,this.eidtRowIndex,d,"fixed")}a("#"+this.options.id+"_content_edit_menu").css("display","none"),this.repairSumRow(),this.noRowsShowFun(),this.eidtRowIndex=-1,"form"==this.options.editType&&(a("#"+this.options.id+"_multiSelect_edit").remove(null,!0),a("#"+this.options.id+"_numCol_edit").remove(null,!0),a("#"+this.options.id+"_edit_tr").remove(null,!0),a("#"+this.options.id+"_edit_tr1").remove(null,!0))
}},editCell:function(b,c,d,e,f){var g=this;if("text"==e)b.innerHTML="default"==this.options.editType?'<input id="'+this.options.id+"_edit_field_"+d+'" type="text" value="'+c+'" field="'+d+'" style="width:100%;margin:0px;min-height:20px;font-size:12px;color:#444">':'<input id="'+this.options.id+"_edit_field_"+d+'" type="text" value="'+c+'" field="'+d+'">',a("input",a(b)).on("blur",function(){g.editValueChange(d,this.value)});else if("function"==typeof e){var h={};h.gridObj=this,h.element=b,h.value=c,h.field=d,h.rowObj=f,e.call(this,h)}},editValueChange:function(a,b){this.updateValueAt(this.eidtRowIndex,a,b)},formEditCell:function(a,b,c){var d='<div class="u-grid-edit-whole-div"><div class="u-grid-edit-label">'+c+"</div>";return d+='<div id="'+this.options.id+"_edit_"+b+'" class="u-grid-edit-div">'+a+"</div>",d+="</div>"},getLocalData:function(){return null;var a},saveLocalData:function(){return null},clearLocalData:function(){return null},saveGridCompColumnArrToLocal:function(){return null},getGridCompColumnArrFromLocal:function(){return null},formatWidth:function(a){return a?(a+"").indexOf("%")>0?a:parseInt(a)+"px":""},swapEle:function(a,b){var c=a.next(),d=b.prev();b.insertBefore(c),a.insertAfter(d)},getString:function(a,b){return(null==a||a==d||"null"==a||"undefined"==a||""==a)&&(a=b),a+""},getInt:function(a,b){return(null==a||a==d||"null"==a||"undefined"==a||""==a||Number.isNaN(a))&&(a=b),a},getFloat:function(a,b){return(null==a||a==d||"null"==a||"undefined"==a||""==a||Number.isNaN(a))&&(a=b),a},cloneObj:function(a){var b;if("object"==typeof a)if(null===a)b=null;else if(a instanceof Array){b=[];for(var c=0,d=a.length;d>c;c++)b.push(this.cloneObj(a[c]))}else{b={};for(var e in a)b[e]=this.cloneObj(a[e])}else b=a;return b},DicimalFormater:function(a){for(var b=a.value+"",c=a.precision,d=0;d<b.length;d++)if(-1=="-0123456789.".indexOf(b.charAt(d)))return"";return this.checkDicimalInvalid(b,c)},checkDicimalInvalid:function(a,b){if(null==a||isNaN(a))return"";var c=parseFloat(a),d=(c*Math.pow(10,b)/Math.pow(10,b)).toFixed(b);return"NaN"==d?"":d},accAdd:function(a,b){var c,d,e;try{c=a.toString().split(".")[1].length}catch(f){c=0}try{d=b.toString().split(".")[1].length}catch(f){d=0}return e=Math.pow(10,Math.max(c,d)),(a*e+b*e)/e},getTrIndex:function(b){return a('tr[id!="'+this.options.id+'_edit_tr"]',b.parent()).index(b)},setDataSource:function(a){this.initDataSourceVariable(),this.options.dataSource=a,this.initDataSource(),this.repairContent(),this.afterGridDivsCreate()},setDataSourceFun1:function(b){var c={};if(b.values){var d=new Array;a.each(b.values,function(){if(b.fields){var c={},e=this;a.each(b.fields,function(b){a(c).attr(this,e[b])}),d.push(c)}})}a(c).attr("values",d),this.setDataSource(c)},addOneRow:function(b,c){var d=this,e="none",f={};f.value=b;var g,h=0,i=this.dataSourceObj.rows.length,j=!1;if("grid"==this.showType){if(-1!=this.eidtRowIndex&&this.editClose(),this.options.showTree){var k=!1,l=this.options.keyField,m=this.options.parentKeyField,n=(this.getString(a(b).attr(l),""),this.getString(a(b).attr(m),""));a.each(this.dataSourceObj.rows,function(b){var e=this.value,i=d.getString(a(e).attr(l),"");if(i==n){k=!0,g=b,h=this.childRowIndex.length;var j=this.level;f.level=j+1,c=g+1,this.allChildRowIndex=new Array}}),k||(f.level=0,c=0)}if(0!=c&&(c&&c>0?c>i&&(c=i):c=0),i==c&&(j=!0),this.dataSourceObj.rows.splice(c,0,f),k){var o=a("#"+this.options.id+"_content_div tbody tr:eq("+g+")");if(h>0){var p=a(".fa-plus-square-o",o);p.length>0||(e="block")}else{e="block";var q=a("div:visible:eq(0)",o),p=a(".fa-plus-square-o",o),r=a(".fa-minus-square-o",o),s='<span class="fa u-grid-content-tree-span fa-minus-square-o"></span>';if(q.length>0&&0==p.length&&0==r.length){q[0].insertAdjacentHTML("afterBegin",s);var t=parseInt(q[0].style.left);i=t-16,(i>0||0==i)&&(q[0].style.left=i+"px")}p.length>0&&p.removeClass("fa-plus-square-o").addClass("fa-minus-square-o")}}try{var u=this.createContentOneRow(f,"normal",e);j?a("#"+this.options.id+"_content_div tbody")[0].insertAdjacentHTML("beforeEnd",u):a("#"+this.options.id+"_content_div tbody tr:eq("+c+")")[0]?a("#"+this.options.id+"_content_div tbody tr:eq("+c+")")[0].insertAdjacentHTML("beforeBegin",u):a("#"+this.options.id+"_content_div tbody")[0]&&a("#"+this.options.id+"_content_div tbody")[0].insertAdjacentHTML("afterBegin",u);var u=this.createContentOneRow(f,"fixed",e);j?a("#"+this.options.id+"_content_fixed_div tbody")[0].insertAdjacentHTML("beforeEnd",u):a("#"+this.options.id+"_content_fixed_div tbody tr:eq("+c+")")[0]?a("#"+this.options.id+"_content_fixed_div tbody tr:eq("+c+")")[0].insertAdjacentHTML("beforeBegin",u):a("#"+this.options.id+"_content_fixed_div tbody")[0]&&a("#"+this.options.id+"_content_fixed_div tbody")[0].insertAdjacentHTML("afterBegin",u)}catch(v){var w=a("#"+this.options.id+"_content_div table")[0];w&&this.createContentOneRowForIE(w,c,f,"normal",e);var x=a("#"+this.options.id+"_content_fixed_div table")[0];x&&this.createContentOneRowForIE(x,c,f,"fixed",e)}if(this.options.multiSelect){var u=this.createContentLeftMultiSelectRow(f,e);j?a("#"+this.options.id+"_content_multiSelect")[0].insertAdjacentHTML("beforeEnd",u):a("#"+this.options.id+"_content_multiSelect div:eq("+c+")")[0]?a("#"+this.options.id+"_content_multiSelect div:eq("+c+")")[0].insertAdjacentHTML("beforeBegin",u):a("#"+this.options.id+"_content_multiSelect")[0].insertAdjacentHTML("afterBegin",u)}if(this.options.showNumCol){var u=this.createContentLeftNumColRow(i);a("#"+this.options.id+"_content_numCol")[0].insertAdjacentHTML("beforeEnd",u)}this.repairSumRow(),this.noRowsShowFun();var y={};y.begin=c,y.length=1,y.createFlag="fixed",this.renderTypeFun(y);var y={};y.begin=c,y.length=1,this.renderTypeFun(y)}var i=0;this.options.showTree?(this.dataSourceObj.options.values?i=this.dataSourceObj.options.values.length:this.dataSourceObj.options.values=new Array,this.dataSourceObj.options.values.splice(c,0,b),this.dataSourceObj.sortRows()):(this.dataSourceObj.options.values||(this.dataSourceObj.options.values=new Array),this.dataSourceObj.options.values.splice(c,0,b))},addRows:function(b,c){if(this.options.showTree)for(var d=row.length,e=d-1;e>-1;e--)this.addOneRow(b[e],c);else{-1!=this.eidtRowIndex&&this.editClose();var f="",g="",h="",i="",j=this,d=this.dataSourceObj.rows.length,k=!1;0!=c&&(c&&c>0?c>d&&(c=d):c=0),d==c&&(k=!0);var l=new Array;if(a.each(b,function(a){var b={};b.value=this,l.push(b),j.dataSourceObj.rows.splice(c+a,0,b)}),"grid"==this.showType){a.each(l,function(a){f+=j.createContentOneRow(this),i+=j.createContentOneRow(this,"fixed"),j.options.multiSelect&&(g+=j.createContentLeftMultiSelectRow(this)),j.options.showNumCol&&(h+=j.createContentLeftNumColRow(d+a))});try{k?a("#"+this.options.id+"_content_div tbody")[0].insertAdjacentHTML("beforeEnd",f):a("#"+this.options.id+"_content_div tbody tr:eq("+c+")")[0]?a("#"+this.options.id+"_content_div tbody tr:eq("+c+")")[0].insertAdjacentHTML("beforeBegin",f):a("#"+this.options.id+"_content_div tbody")[0]&&a("#"+this.options.id+"_content_div tbody")[0].insertAdjacentHTML("afterBegin",f),k?a("#"+this.options.id+"_content_fixed_div tbody")[0].insertAdjacentHTML("beforeEnd",i):a("#"+this.options.id+"_content_fixed_div tbody tr:eq("+c+")")[0]?a("#"+this.options.id+"_content_fixed_div tbody tr:eq("+c+")")[0].insertAdjacentHTML("beforeBegin",i):a("#"+this.options.id+"_content_fixed_div tbody")[0]&&a("#"+this.options.id+"_content_fixed_div tbody")[0].insertAdjacentHTML("afterBegin",i)}catch(m){var n=a("#"+this.options.id+"_content_div table")[0],o=a("#"+this.options.id+"_content_fixed_div table")[0];n&&o&&a.each(l,function(a){j.createContentOneRowForIE(n,c+a,this),j.createContentOneRowForIE(o,c+a,this,"fixed")})}this.options.multiSelect&&(k?a("#"+this.options.id+"_content_multiSelect")[0].insertAdjacentHTML("beforeEnd",g):a("#"+this.options.id+"_content_multiSelect div:eq("+c+")")[0]?a("#"+this.options.id+"_content_multiSelect div:eq("+c+")")[0].insertAdjacentHTML("beforeBegin",g):a("#"+this.options.id+"_content_multiSelect")[0].insertAdjacentHTML("afterBegin",g)),this.options.showNumCol&&a("#"+this.options.id+"_content_numCol")[0].insertAdjacentHTML("beforeEnd",h),this.repairSumRow(),this.noRowsShowFun();var p={};p.begin=c,p.length=b.length,p.createFlag="fixed",this.renderTypeFun(p);var p={};p.begin=c,p.length=b.length,this.renderTypeFun(p)}this.dataSourceObj.options.values||(this.dataSourceObj.options.values=new Array),this.dataSourceObj.options.values.splice(c,0,b)}},deleteOneRow:function(b){var c=this;b=parseInt(b);var d=this.dataSourceObj.rows[b];if(d){var e=d.value;if("grid"==this.showType&&-1!=this.eidtRowIndex&&this.editClose(),this.selectRows&&a.each(this.selectRows,function(a){this==e&&(c.selectRows.splice(a,1),c.selectRowsObj.splice(a,1),c.selectRowsIndex.splice(a,1))}),this.dataSourceObj.rows.splice(b,1),"grid"==this.showType&&(a("#"+this.options.id+"_content_div tbody tr:eq("+b+")").remove(),a("#"+this.options.id+"_content_fixed_div tbody tr:eq("+b+")").remove(),a("#"+this.options.id+"_content_multiSelect >div:eq("+b+")").remove(),a("#"+this.options.id+"_content_numCol >div:nth-child("+(this.dataSourceObj.rows.length+1)+")").remove(),this.repairSumRow(),this.noRowsShowFun()),this.dataSourceObj.options.values){var f=this.dataSourceObj.options.values.indexOf(e);this.dataSourceObj.options.values.splice(f,1)}if(this.options.showTree&&this.dataSourceObj.sortRows(),"function"==typeof this.options.onRowDelete){var g={};if(g.gridObj=this,g.index=b,!this.options.onRowDelete(b))return}}},deleteRows:function(b){var c=this,d=new Array;a.each(b,function(a){d.push(b[a])}),d.sort(function(a,b){return b-a}),a.each(d,function(){c.deleteOneRow(this)})},updateRow:function(a,b){if(this.dataSourceObj.rows[a].value=b,"grid"==this.showType){var c={};c.begin=a,c.length=1,c.createFlag="fixed",this.renderTypeFun(c);var c={};c.begin=a,c.length=1,this.renderTypeFun(c),this.repairSumRow()}},updateValueAt:function(b,c,d){var e=a(this.dataSourceObj.rows[b].value).attr(c);if(e!=d){if(a(this.dataSourceObj.rows[b].value).attr(c,d),"grid"==this.showType){var f={};f.createFlag="fixed",f.begin=b,f.length=1,this.renderTypeFun(f);var f={};f.begin=b,f.length=1,this.renderTypeFun(f),this.eidtRowIndex==b&&a("#"+this.options.id+"_edit_field_"+c).length>0&&("checkbox"==a("#"+this.options.id+"_edit_field_"+c)[0].type?a("#"+this.options.id+"_edit_field_"+c)[0].checked="Y"==d||"true"==d?!0:!1:a("#"+this.options.id+"_edit_field_"+c)[0].value=d),this.repairSumRow()}if("function"==typeof this.options.onValueChange){var f={};f.gridObj=this,f.rowIndex=b,f.field=c,f.oldValue=e,f.newValue=d,this.options.onValueChange(f)}}},setRowSelect:function(b){if(this.dataSourceObj.rows[b]){if("function"==typeof this.options.onBeforeRowSelected){var c={};if(c.gridObj=this,c.rowObj=this.dataSourceObj.rows[b],c.rowIndex=b,!this.options.onBeforeRowSelected(c))return}if(!this.dataSourceObj.rows[b].checked&&(this.options.multiSelect?a("#"+this.options.id+"_content_multiSelect input:eq("+b+")")[0].checked=!0:(this.selectRowsObj&&this.selectRowsObj.length>0&&a.each(this.selectRowsObj,function(){this.checked=!1}),this.selectRows=new Array,this.selectRowsObj=new Array,this.selectRowsIndex=new Array,a("#"+this.options.id+"_content_tbody tr").removeClass("u-grid-content-sel-row"),a("#"+this.options.id+"_content_tbody tr a").removeClass("u-grid-content-sel-row"),a("#"+this.options.id+"_content_fixed_tbody tr").removeClass("u-grid-content-sel-row"),a("#"+this.options.id+"_content_fixed_tbody tr a").removeClass("u-grid-content-sel-row")),a("#"+this.options.id+"_content_tbody tr:eq("+b+")").addClass("u-grid-content-sel-row"),a("#"+this.options.id+"_content_tbody tr:eq("+b+") a").addClass("u-grid-content-sel-row"),a("#"+this.options.id+"_content_fixed_tbody tr:eq("+b+")").addClass("u-grid-content-sel-row"),a("#"+this.options.id+"_content_fixed_tbody tr:eq("+b+") a").addClass("u-grid-content-sel-row"),this.selectRows.push(this.dataSourceObj.rows[b].value),this.selectRowsObj.push(this.dataSourceObj.rows[b]),this.selectRowsIndex.push(b),this.dataSourceObj.rows[b].checked=!0,"function"==typeof this.options.onRowSelected)){var c={};c.gridObj=this,c.rowObj=this.dataSourceObj.rows[b],c.rowIndex=b,this.options.onRowSelected(c)}}},setRowUnselect:function(b){var c=this;if(this.dataSourceObj.rows[b]){if("function"==typeof this.options.onBeforeRowUnSelected){var d={};if(d.gridObj=this,d.rowObj=this.dataSourceObj.rows[b],d.rowIndex=b,!this.options.onBeforeRowUnSelected(d))return}if(this.dataSourceObj.rows[b].checked&&(this.options.multiSelect&&(a("#"+this.options.id+"_content_multiSelect input:eq("+b+")")[0].checked=!1),a("#"+this.options.id+"_content_tbody tr:eq("+b+")").removeClass("u-grid-content-sel-row"),a("#"+this.options.id+"_content_tbody tr:eq("+b+") a").removeClass("u-grid-content-sel-row"),a("#"+this.options.id+"_content_fixed_tbody tr:eq("+b+")").removeClass("u-grid-content-sel-row"),a("#"+this.options.id+"_content_fixed_tbody tr:eq("+b+") a").removeClass("u-grid-content-sel-row"),a.each(this.selectRows,function(a){this==c.dataSourceObj.rows[b].value&&(c.selectRows.splice(a,1),c.selectRowsObj.splice(a,1),c.selectRowsIndex.splice(a,1))}),this.dataSourceObj.rows[b].checked=!1,"function"==typeof this.options.onRowUnSelected)){var d={};d.gridObj=this,d.rowObj=this.dataSourceObj.rows[b],d.rowIndex=b,this.options.onRowUnSelected(d)}}},setAllRowSelect:function(){if("function"==typeof this.options.onBeforeAllRowSelected){var a={};if(a.gridObj=this,a.rowObjs=this.dataSourceObj.rows,!this.options.onBeforeAllRowSelected(a))return}for(var b=0;b<this.dataSourceObj.rows.length;b++)this.setRowSelect(b);if("function"==typeof this.options.onAllRowSelected){var a={};a.gridObj=this,a.rowObjs=this.dataSourceObj.rows,this.options.onAllRowSelected(a)}},setAllRowUnSelect:function(){if("function"==typeof this.options.onBeforeAllRowUnSelected){var a={};if(a.gridObj=this,a.rowObjs=this.dataSourceObj.rows,!this.options.onBeforeAllRowUnSelected(a))return}for(var b=0;b<this.dataSourceObj.rows.length;b++)this.setRowUnselect(b);if("function"==typeof this.options.onAllRowUnSelected){var a={};a.gridObj=this,a.rowObjs=this.dataSourceObj.rows,this.options.onAllRowUnSelected(a)}},getSelectRows:function(){return this.selectRows},getSelectRowsIndex:function(){return this.selectRowsIndex},setRowFocus:function(b){if(this.dataSourceObj.rows[b]){if("function"==typeof this.options.onBeforeRowFocus){var c={};if(c.gridObj=this,c.rowObj=this.dataSourceObj.rows[b],c.rowIndex=b,!this.options.onBeforeRowFocus(c))return}if(!this.dataSourceObj.rows[b].focus){if(a("#"+this.options.id+"_content_tbody tr").removeClass("u-grid-content-focus-row"),a("#"+this.options.id+"_content_tbody tr a").removeClass("u-grid-content-focus-row"),a("#"+this.options.id+"_content_fixed_tbody tr").removeClass("u-grid-content-focus-row"),a("#"+this.options.id+"_content_fixed_tbody tr a").removeClass("u-grid-content-focus-row"),this.focusRowObj&&(this.focusRowObj.focus=!1),a("#"+this.options.id+"_content_tbody tr:eq("+b+")").addClass("u-grid-content-focus-row"),a("#"+this.options.id+"_content_tbody tr:eq("+b+") a").addClass("u-grid-content-focus-row"),a("#"+this.options.id+"_content_fixed_tbody tr:eq("+b+")").addClass("u-grid-content-focus-row"),a("#"+this.options.id+"_content_fixed_tbody tr:eq("+b+") a").addClass("u-grid-content-focus-row"),this.focusRow=this.dataSourceObj.rows[b].value,this.focusRowObj=this.dataSourceObj.rows[b],this.focusRowIndex=b,this.dataSourceObj.rows[b].focus=!0,"function"==typeof this.options.onRowFocus){var c={};c.gridObj=this,c.rowObj=this.dataSourceObj.rows[b],c.rowIndex=b,this.options.onRowFocus(c)}this.options.multiSelect||this.setRowSelect(b)}}},setRowUnFocus:function(b){if(this.dataSourceObj.rows[b]){if("function"==typeof this.options.onBeforeRowUnFocus){var c={};if(c.gridObj=this,c.rowObj=this.dataSourceObj.rows[b],c.rowIndex=b,!this.options.onBeforeRowUnFocus(c))return}if(this.dataSourceObj.rows[b].focus){if(a("#"+this.options.id+"_content_tbody tr:eq("+b+")").removeClass("u-grid-content-focus-row"),a("#"+this.options.id+"_content_tbody tr:eq("+b+") a").removeClass("u-grid-content-focus-row"),a("#"+this.options.id+"_content_fixed_tbody tr:eq("+b+")").removeClass("u-grid-content-focus-row"),a("#"+this.options.id+"_content_fixed_tbody tr:eq("+b+") a").removeClass("u-grid-content-focus-row"),this.dataSourceObj.rows[b].focus=!1,this.focusRow=null,this.focusRowObj=null,this.focusRowIndex=null,"function"==typeof this.options.onRowUnFocus){var c={};c.gridObj=this,c.rowObj=this.dataSourceObj.rows[b],c.rowIndex=b,this.options.onRowUnFocus(c)}this.options.multiSelect||this.setRowUnselect(b)}}},getFocusRow:function(){return this.focusRow},getFocusRowIndex:function(){return this.focusRowIndex},getAllRows:function(){var b=this;return this.allRows=new Array,this.dataSourceObj.rows&&a.each(this.dataSourceObj.rows,function(){b.allRows.push(this.value)}),this.allRows},getRowByIndex:function(a){return this.dataSourceObj.rows[a]},getRowIndexByValue:function(b,c){var d=-1;return a.each(this.dataSourceObj.rows,function(e){var f=a(this.value).attr(b);f==c&&(d=e)}),d},getAllChildRow:function(a){return a.allChildRow&&a.allChildRow.length>0?a.allChildRow:(a.allChildRow=new Array,this.getAllChildRowFun(a,a.allChildRow),a.allChildRow)},getAllChildRowIndex:function(a){return a.allChildRowIndex&&a.allChildRowIndex.length>0?a.allChildRowIndex:(a.allChildRowIndex=new Array,this.getAllChildRowIndexFun(a,a.allChildRowIndex),a.allChildRowIndex)},getAllChildRowFun:function(b,c){var d=this;b.childRow.length>0&&(Array.prototype.push.apply(c,b.childRow),a.each(b.childRow,function(){d.getAllChildRowFun(this,c)}))},getAllChildRowIndexFun:function(b,c){var d=this;b.childRowIndex.length>0&&(Array.prototype.push.apply(c,b.childRowIndex),a.each(b.childRow,function(){d.getAllChildRowIndexFun(this,c)}))},setRenderType:function(a,b){var c=this.getColumnByField(a);c.options.renderType=b;var d=this.getIndexOfColumn(c);this.renderTypeByColumn(c,d)},setEditType:function(a,b){var c=this.getColumnByField(a);c.options.editType=b},setEditable:function(a){this.options.editable=a},setColumnPrecision:function(a,b){var c=this.getColumnByField(a);c.options.precision=b;var d={};d.createFlag="fixed",this.renderTypeFun(d);var d={};this.renderTypeFun(d),this.options.showSumRow&&this.repairSumRow()},setMultiSelect:function(a){var b=this.options.multiSelect;b!=a&&(this.options.multiSelect=a,this.initGrid())},setShowNumCol:function(a){var b=this.options.showNumCol;b!=a&&(this.options.showNumCol=a,this.initGrid())}},e.prototype={sortRows:function(a,b){this.gridComp.options.showTree?this.treeSortRows(a,b):this.basicSortRows(a,b)},basicSortRows:function(b,c){var d=this,e="";b&&(e=this.gridComp.getColumnByField(b).options.dataType),"asc"==c?this.rows.sort(function(c,f){var g=a(f.value).attr(b),h=a(c.value).attr(b);if("Float"==e)return g=parseFloat(g),h=parseFloat(h),g!=g?1:h!=h?-1:g-h;if("Int"==e)return g=parseInt(g),h=parseInt(h),g!=g?1:h!=h?-1:g-h;g=d.gridComp.getString(g,""),h=d.gridComp.getString(h,"");try{return g.localeCompare(h)}catch(i){return 0}}):"desc"==c?this.rows.sort(function(c,f){var g=a(c.value).attr(b),h=a(f.value).attr(b);if("Float"==e)return g=parseFloat(g),h=parseFloat(h),g!=g?1:h!=h?-1:g-h;if("Int"==e)return g=parseInt(g),h=parseInt(h),g!=g?1:h!=h?-1:g-h;g=d.gridComp.getString(g,""),h=d.gridComp.getString(h,"");try{return g.localeCompare(h)}catch(i){return 0}}):(this.rows=new Array,this.options.values&&a.each(this.options.values,function(){var a={};a.value=this,d.rows.push(a)}))},treeSortRows:function(){var b=this;if(this.rows=new Array,this.hasParentRows=new Array,this.nothasParentRows=new Array,this.options.values){a.each(this.options.values,function(){var c={},d=a(this),e=b.gridComp.options.keyField,f=b.gridComp.options.parentKeyField,g=b.gridComp.getString(d.attr(e),""),h=b.gridComp.getString(d.attr(f),"");c.value=this,c.keyValue=g,c.parentKeyValue=h,""==h?b.nothasParentRows.push(c):b.hasParentRows.push(c),b.rows.push(c)}),a.each(this.hasParentRows,function(c){var d=this.parentKeyValue,e=!1;a.each(b.rows,function(){this.keyValue==d&&(e=!0)}),e||(b.hasParentRows.splice(c,0),b.nothasParentRows.push(this))}),b.rows=new Array;var c=0;a.each(this.nothasParentRows,function(){this.level=c,b.rows.push(this),b.pushChildRows(this,c)})}},pushChildRows:function(b,c){var d=b.keyValue,e=this,f=parseInt(c)+1,g=!1,h=new Array,i=new Array;a.each(this.hasParentRows,function(a){if(this&&this.parentKeyValue==d){g=!0,this.level=f,e.rows.push(this),h.push(this);var b=parseInt(e.rows.length-1);i.push(b),e.hasParentRows.splice(a,0),e.pushChildRows(this,f)}}),b.hasChild=g,b.childRow=h,b.childRowIndex=i},getSumValue:function(b,c,e){var f=null;if(c.options.sumCol&&a.each(this.rows,function(){var d=a(this.value).attr(b);"Int"==c.options.dataType?(d=e.getInt(d,0),f+=parseInt(d)):(d=e.getFloat(d,0),f=e.accAdd(f,parseFloat(d)))}),"Float"==c.options.dataType&&c.options.precision){var g={};g.value=f,g.precision=c.options.precision,f=e.DicimalFormater(g)}return null!=f&&f!=d&&"null"!=f&&"undefined"!=f?f+"":""}};var h=a.fn.grid;a.fn.grid=function(b){var c=a(this).data("gridComp");return c||a(this).data("gridComp",c=new g(this,b)),c},a.fn.grid.noConflict=function(){return a.fn.grid=h,this}}(jQuery,window,document),function($){var settings={},roots={},caches={},_consts={className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch"},event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error",REMOVE:"ztree_remove",SELECTED:"ztree_selected",UNSELECTED:"ztree_unselected"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_setting={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0,txtSelectedEnable:!1},data:{key:{children:"children",name:"name",title:"",url:"url"},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},_initRoot=function(a){var b=data.getRoot(a);b||(b={},data.setRoot(a,b)),b[a.data.key.children]=[],b.expandTriggerFlag=!1,b.curSelectedList=[],b.noSelection=!0,b.createdNodes=[],b.zId=0,b._ver=(new Date).getTime()},_initCache=function(a){var b=data.getCache(a);b||(b={},data.setCache(a,b)),b.nodes=[],b.doms=[]},_bindEvent=function(a){var b=a.treeObj,c=consts.event;b.bind(c.NODECREATED,function(b,c,d){tools.apply(a.callback.onNodeCreated,[b,c,d])}),b.bind(c.CLICK,function(b,c,d,e,f){tools.apply(a.callback.onClick,[c,d,e,f])}),b.bind(c.EXPAND,function(b,c,d){tools.apply(a.callback.onExpand,[b,c,d])}),b.bind(c.COLLAPSE,function(b,c,d){tools.apply(a.callback.onCollapse,[b,c,d])}),b.bind(c.ASYNC_SUCCESS,function(b,c,d,e){tools.apply(a.callback.onAsyncSuccess,[b,c,d,e])}),b.bind(c.ASYNC_ERROR,function(b,c,d,e,f,g){tools.apply(a.callback.onAsyncError,[b,c,d,e,f,g])}),b.bind(c.REMOVE,function(b,c,d){tools.apply(a.callback.onRemove,[b,c,d])}),b.bind(c.SELECTED,function(b,c,d,e){tools.apply(a.callback.onSelected,[c,d,e])}),b.bind(c.UNSELECTED,function(b,c,d,e){tools.apply(a.callback.onUnSelected,[c,d,e])})},_unbindEvent=function(a){var b=a.treeObj,c=consts.event;b.unbind(c.NODECREATED).unbind(c.CLICK).unbind(c.EXPAND).unbind(c.COLLAPSE).unbind(c.ASYNC_SUCCESS).unbind(c.ASYNC_ERROR).unbind(c.REMOVE).unbind(c.SELECTED).unbind(c.UNSELECTED)},_eventProxy=function(a){var b=a.target,c=data.getSetting(a.data.treeId),d="",e=null,f="",g="",h=null,i=null,j=null;if(tools.eqs(a.type,"mousedown")?g="mousedown":tools.eqs(a.type,"mouseup")?g="mouseup":tools.eqs(a.type,"contextmenu")?g="contextmenu":tools.eqs(a.type,"click")?tools.eqs(b.tagName,"span")&&null!==b.getAttribute("treeNode"+consts.id.SWITCH)?(d=tools.getNodeMainDom(b).id,f="switchNode"):(j=tools.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+consts.id.A}]),j&&(d=tools.getNodeMainDom(j).id,f="clickNode")):tools.eqs(a.type,"dblclick")&&(g="dblclick",j=tools.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+consts.id.A}]),j&&(d=tools.getNodeMainDom(j).id,f="switchNode")),g.length>0&&0==d.length&&(j=tools.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+consts.id.A}]),j&&(d=tools.getNodeMainDom(j).id)),d.length>0)switch(e=data.getNodeCache(c,d),f){case"switchNode":e.isParent&&(tools.eqs(a.type,"click")||tools.eqs(a.type,"dblclick")&&tools.apply(c.view.dblClickExpand,[c.treeId,e],c.view.dblClickExpand))?h=handler.onSwitchNode:f="";break;case"clickNode":h=handler.onClickNode}switch(g){case"mousedown":i=handler.onZTreeMousedown;break;case"mouseup":i=handler.onZTreeMouseup;break;case"dblclick":i=handler.onZTreeDblclick;break;case"contextmenu":i=handler.onZTreeContextmenu}var k={stop:!1,node:e,nodeEventType:f,nodeEventCallback:h,treeEventType:g,treeEventCallback:i};return k},_initNode=function(a,b,c,d,e,f){if(c){var g=data.getRoot(a),h=a.data.key.children;c.level=b,c.tId=a.treeId+"_"+ ++g.zId,c.parentTId=d?d.tId:null,c.open="string"==typeof c.open?tools.eqs(c.open,"true"):!!c.open,c[h]&&c[h].length>0?(c.isParent=!0,c.zAsync=!0):(c.isParent="string"==typeof c.isParent?tools.eqs(c.isParent,"true"):!!c.isParent,c.open=c.isParent&&!a.async.enable?c.open:!1,c.zAsync=!c.isParent),c.isFirstNode=e,c.isLastNode=f,c.getParentNode=function(){return data.getNodeCache(a,c.parentTId)},c.getPreNode=function(){return data.getPreNode(a,c)},c.getNextNode=function(){return data.getNextNode(a,c)},c.isAjaxing=!1,data.fixPIdKeyValue(a,c)}},_init={bind:[_bindEvent],unbind:[_unbindEvent],caches:[_initCache],nodes:[_initNode],proxys:[_eventProxy],roots:[_initRoot],beforeA:[],afterA:[],innerBeforeA:[],innerAfterA:[],zTreeTools:[]},data={addNodeCache:function(a,b){data.getCache(a).nodes[data.getNodeCacheId(b.tId)]=b},getNodeCacheId:function(a){return a.substring(a.lastIndexOf("_")+1)},addAfterA:function(a){_init.afterA.push(a)},addBeforeA:function(a){_init.beforeA.push(a)},addInnerAfterA:function(a){_init.innerAfterA.push(a)},addInnerBeforeA:function(a){_init.innerBeforeA.push(a)},addInitBind:function(a){_init.bind.push(a)},addInitUnBind:function(a){_init.unbind.push(a)},addInitCache:function(a){_init.caches.push(a)},addInitNode:function(a){_init.nodes.push(a)},addInitProxy:function(a,b){b?_init.proxys.splice(0,0,a):_init.proxys.push(a)},addInitRoot:function(a){_init.roots.push(a)},addNodesData:function(a,b,c){var d=a.data.key.children;b[d]||(b[d]=[]),b[d].length>0&&(b[d][b[d].length-1].isLastNode=!1,view.setNodeLineIcos(a,b[d][b[d].length-1])),b.isParent=!0,b[d]=b[d].concat(c)},addSelectedNode:function(a,b){var c=data.getRoot(a);data.isSelectedNode(a,b)||c.curSelectedList.push(b)},addCreatedNode:function(a,b){if(a.callback.onNodeCreated||a.view.addDiyDom){var c=data.getRoot(a);c.createdNodes.push(b)}},addZTreeTools:function(a){_init.zTreeTools.push(a)},exSetting:function(a){$.extend(!0,_setting,a)},fixPIdKeyValue:function(a,b){a.data.simpleData.enable&&(b[a.data.simpleData.pIdKey]=b.parentTId?b.getParentNode()[a.data.simpleData.idKey]:a.data.simpleData.rootPId)},getAfterA:function(){for(var a=0,b=_init.afterA.length;b>a;a++)_init.afterA[a].apply(this,arguments)},getBeforeA:function(){for(var a=0,b=_init.beforeA.length;b>a;a++)_init.beforeA[a].apply(this,arguments)},getInnerAfterA:function(){for(var a=0,b=_init.innerAfterA.length;b>a;a++)_init.innerAfterA[a].apply(this,arguments)},getInnerBeforeA:function(){for(var a=0,b=_init.innerBeforeA.length;b>a;a++)_init.innerBeforeA[a].apply(this,arguments)},getCache:function(a){return caches[a.treeId]},getNextNode:function(a,b){if(!b)return null;for(var c=a.data.key.children,d=b.parentTId?b.getParentNode():data.getRoot(a),e=0,f=d[c].length-1;f>=e;e++)if(d[c][e]===b)return e==f?null:d[c][e+1];return null},getNodeByParam:function(a,b,c,d){if(!b||!c)return null;for(var e=a.data.key.children,f=0,g=b.length;g>f;f++){if(b[f][c]==d)return b[f];var h=data.getNodeByParam(a,b[f][e],c,d);if(h)return h}return null},getNodeCache:function(a,b){if(!b)return null;var c=caches[a.treeId].nodes[data.getNodeCacheId(b)];return c?c:null},getNodeName:function(a,b){var c=a.data.key.name;return""+b[c]},getNodeTitle:function(a,b){var c=""===a.data.key.title?a.data.key.name:a.data.key.title;return""+b[c]},getNodes:function(a){return data.getRoot(a)[a.data.key.children]},getNodesByParam:function(a,b,c,d){if(!b||!c)return[];for(var e=a.data.key.children,f=[],g=0,h=b.length;h>g;g++)b[g][c]==d&&f.push(b[g]),f=f.concat(data.getNodesByParam(a,b[g][e],c,d));return f},getNodesByParamFuzzy:function(a,b,c,d){if(!b||!c)return[];var e=a.data.key.children,f=[];d=d.toLowerCase();for(var g=0,h=b.length;h>g;g++)"string"==typeof b[g][c]&&b[g][c].toLowerCase().indexOf(d)>-1&&f.push(b[g]),f=f.concat(data.getNodesByParamFuzzy(a,b[g][e],c,d));return f},getNodesByFilter:function(a,b,c,d,e){if(!b)return d?null:[];for(var f=a.data.key.children,g=d?null:[],h=0,i=b.length;i>h;h++){if(tools.apply(c,[b[h],e],!1)){if(d)return b[h];g.push(b[h])}var j=data.getNodesByFilter(a,b[h][f],c,d,e);if(d&&j)return j;g=d?j:g.concat(j)}return g},getPreNode:function(a,b){if(!b)return null;for(var c=a.data.key.children,d=b.parentTId?b.getParentNode():data.getRoot(a),e=0,f=d[c].length;f>e;e++)if(d[c][e]===b)return 0==e?null:d[c][e-1];return null},getRoot:function(a){return a?roots[a.treeId]:null},getRoots:function(){return roots},getSetting:function(a){return settings[a]},getSettings:function(){return settings},getZTreeTools:function(a){var b=this.getRoot(this.getSetting(a));return b?b.treeTools:null},initCache:function(){for(var a=0,b=_init.caches.length;b>a;a++)_init.caches[a].apply(this,arguments)},initNode:function(){for(var a=0,b=_init.nodes.length;b>a;a++)_init.nodes[a].apply(this,arguments)},initRoot:function(){for(var a=0,b=_init.roots.length;b>a;a++)_init.roots[a].apply(this,arguments)},isSelectedNode:function(a,b){for(var c=data.getRoot(a),d=0,e=c.curSelectedList.length;e>d;d++)if(b===c.curSelectedList[d])return!0;return!1},removeNodeCache:function(a,b){var c=a.data.key.children;if(b[c])for(var d=0,e=b[c].length;e>d;d++)arguments.callee(a,b[c][d]);data.getCache(a).nodes[data.getNodeCacheId(b.tId)]=null},removeSelectedNode:function(a,b){for(var c=data.getRoot(a),d=0,e=c.curSelectedList.length;e>d;d++)b!==c.curSelectedList[d]&&data.getNodeCache(a,c.curSelectedList[d].tId)||(c.curSelectedList.splice(d,1),d--,e--)},setCache:function(a,b){caches[a.treeId]=b},setRoot:function(a,b){roots[a.treeId]=b},setZTreeTools:function(){for(var a=0,b=_init.zTreeTools.length;b>a;a++)_init.zTreeTools[a].apply(this,arguments)},transformToArrayFormat:function(a,b){if(!b)return[];var c=a.data.key.children,d=[];if(tools.isArray(b))for(var e=0,f=b.length;f>e;e++)d.push(b[e]),b[e][c]&&(d=d.concat(data.transformToArrayFormat(a,b[e][c])));else d.push(b),b[c]&&(d=d.concat(data.transformToArrayFormat(a,b[c])));return d},transformTozTreeFormat:function(a,b){var c,d,e=a.data.simpleData.idKey,f=a.data.simpleData.pIdKey,g=a.data.key.children;if(!e||""==e||!b)return[];if(tools.isArray(b)){var h=[],i=[];for(c=0,d=b.length;d>c;c++)i[b[c][e]]=b[c];for(c=0,d=b.length;d>c;c++)i[b[c][f]]&&b[c][e]!=b[c][f]?(i[b[c][f]][g]||(i[b[c][f]][g]=[]),i[b[c][f]][g].push(b[c])):h.push(b[c]);return h}return[b]}},event={bindEvent:function(){for(var a=0,b=_init.bind.length;b>a;a++)_init.bind[a].apply(this,arguments)},unbindEvent:function(){for(var a=0,b=_init.unbind.length;b>a;a++)_init.unbind[a].apply(this,arguments)
},bindTree:function(a){var b={treeId:a.treeId},c=a.treeObj;a.view.txtSelectedEnable||c.bind("selectstart",function(a){var b=a.originalEvent.srcElement.nodeName.toLowerCase();return"input"===b||"textarea"===b}).css({"-moz-user-select":"-moz-none"}),c.bind("click",b,event.proxy),c.bind("dblclick",b,event.proxy),c.bind("mouseover",b,event.proxy),c.bind("mouseout",b,event.proxy),c.bind("mousedown",b,event.proxy),c.bind("mouseup",b,event.proxy),c.bind("contextmenu",b,event.proxy)},unbindTree:function(a){var b=a.treeObj;b.unbind("click",event.proxy).unbind("dblclick",event.proxy).unbind("mouseover",event.proxy).unbind("mouseout",event.proxy).unbind("mousedown",event.proxy).unbind("mouseup",event.proxy).unbind("contextmenu",event.proxy)},doProxy:function(){for(var a=[],b=0,c=_init.proxys.length;c>b;b++){var d=_init.proxys[b].apply(this,arguments);if(a.push(d),d.stop)break}return a},proxy:function(a){var b=data.getSetting(a.data.treeId);if(!tools.uCanDo(b,a))return!0;for(var c=event.doProxy(a),d=!0,e=!1,f=0,g=c.length;g>f;f++){var h=c[f];h.nodeEventCallback&&(e=!0,d=h.nodeEventCallback.apply(h,[a,h.node])&&d),h.treeEventCallback&&(e=!0,d=h.treeEventCallback.apply(h,[a,h.node])&&d)}return d}},handler={onSwitchNode:function(a,b){var c=data.getSetting(a.data.treeId);if(b.open){if(0==tools.apply(c.callback.beforeCollapse,[c.treeId,b],!0))return!0;data.getRoot(c).expandTriggerFlag=!0,view.switchNode(c,b)}else{if(0==tools.apply(c.callback.beforeExpand,[c.treeId,b],!0))return!0;data.getRoot(c).expandTriggerFlag=!0,view.switchNode(c,b)}return!0},onClickNode:function(a,b){var c=data.getSetting(a.data.treeId),d=c.view.autoCancelSelected&&(a.ctrlKey||a.metaKey)&&data.isSelectedNode(c,b)?0:c.view.autoCancelSelected&&(a.ctrlKey||a.metaKey)&&c.view.selectedMulti?2:1;return 0==tools.apply(c.callback.beforeClick,[c.treeId,b,d],!0)?!0:(0===d?view.cancelPreSelectedNode(c,b):view.selectNode(c,b,2===d),c.treeObj.trigger(consts.event.CLICK,[a,c.treeId,b,d]),!0)},onZTreeMousedown:function(a,b){var c=data.getSetting(a.data.treeId);return tools.apply(c.callback.beforeMouseDown,[c.treeId,b],!0)&&tools.apply(c.callback.onMouseDown,[a,c.treeId,b]),!0},onZTreeMouseup:function(a,b){var c=data.getSetting(a.data.treeId);return tools.apply(c.callback.beforeMouseUp,[c.treeId,b],!0)&&tools.apply(c.callback.onMouseUp,[a,c.treeId,b]),!0},onZTreeDblclick:function(a,b){var c=data.getSetting(a.data.treeId);return tools.apply(c.callback.beforeDblClick,[c.treeId,b],!0)&&tools.apply(c.callback.onDblClick,[a,c.treeId,b]),!0},onZTreeContextmenu:function(a,b){var c=data.getSetting(a.data.treeId);return tools.apply(c.callback.beforeRightClick,[c.treeId,b],!0)&&tools.apply(c.callback.onRightClick,[a,c.treeId,b]),"function"!=typeof c.callback.onRightClick}},tools={apply:function(a,b,c){return"function"==typeof a?a.apply(zt,b?b:[]):c},canAsync:function(a,b){var c=a.data.key.children;return a.async.enable&&b&&b.isParent&&!(b.zAsync||b[c]&&b[c].length>0)},clone:function(a){if(null===a)return null;var b=tools.isArray(a)?[]:{};for(var c in a)b[c]=a[c]instanceof Date?new Date(a[c].getTime()):"object"==typeof a[c]?arguments.callee(a[c]):a[c];return b},eqs:function(a,b){return a.toLowerCase()===b.toLowerCase()},isArray:function(a){return"[object Array]"===Object.prototype.toString.apply(a)},$:function(a,b,c){return b&&"string"!=typeof b&&(c=b,b=""),"string"==typeof a?$(a,c?c.treeObj.get(0).ownerDocument:null):$("#"+a.tId+b,c?c.treeObj:null)},getMDom:function(a,b,c){if(!b)return null;for(;b&&b.id!==a.treeId;){for(var d=0,e=c.length;b.tagName&&e>d;d++)if(tools.eqs(b.tagName,c[d].tagName)&&null!==b.getAttribute(c[d].attrName))return b;b=b.parentNode}return null},getNodeMainDom:function(a){return $(a).parent("li").get(0)||$(a).parentsUntil("li").parent().get(0)},isChildOrSelf:function(a,b){return $(a).closest("#"+b).length>0},uCanDo:function(){return!0}},view={addNodes:function(a,b,c,d){if(!a.data.keep.leaf||!b||b.isParent)if(tools.isArray(c)||(c=[c]),a.data.simpleData.enable&&(c=data.transformTozTreeFormat(a,c)),b){var e=$$(b,consts.id.SWITCH,a),f=$$(b,consts.id.ICON,a),g=$$(b,consts.id.UL,a);b.open||(view.replaceSwitchClass(b,e,consts.folder.CLOSE),view.replaceIcoClass(b,f,consts.folder.CLOSE),b.open=!1,g.css({display:"none"})),data.addNodesData(a,b,c),view.createNodes(a,b.level+1,c,b),d||view.expandCollapseParentNode(a,b,!0)}else data.addNodesData(a,data.getRoot(a),c),view.createNodes(a,0,c,null)},appendNodes:function(a,b,c,d,e,f){if(!c)return[];for(var g=[],h=a.data.key.children,i=0,j=c.length;j>i;i++){var k=c[i];if(e){var l=d?d:data.getRoot(a),m=l[h],n=m.length==c.length&&0==i,o=i==c.length-1;data.initNode(a,b,k,d,n,o,f),data.addNodeCache(a,k)}var p=[];k[h]&&k[h].length>0&&(p=view.appendNodes(a,b+1,k[h],k,e,f&&k.open)),f&&(view.makeDOMNodeMainBefore(g,a,k),view.makeDOMNodeLine(g,a,k),data.getBeforeA(a,k,g),view.makeDOMNodeNameBefore(g,a,k),data.getInnerBeforeA(a,k,g),view.makeDOMNodeIcon(g,a,k),data.getInnerAfterA(a,k,g),view.makeDOMNodeNameAfter(g,a,k),data.getAfterA(a,k,g),k.isParent&&k.open&&view.makeUlHtml(a,k,g,p.join("")),view.makeDOMNodeMainAfter(g,a,k),data.addCreatedNode(a,k))}return g},appendParentULDom:function(a,b){var c=[],d=$$(b,a);!d.get(0)&&b.parentTId&&(view.appendParentULDom(a,b.getParentNode()),d=$$(b,a));var e=$$(b,consts.id.UL,a);e.get(0)&&e.remove();var f=a.data.key.children,g=view.appendNodes(a,b.level+1,b[f],b,!1,!0);view.makeUlHtml(a,b,c,g.join("")),d.append(c.join(""))},asyncNode:function(setting,node,isSilent,callback){var i,l;if(node&&!node.isParent)return tools.apply(callback),!1;if(node&&node.isAjaxing)return!1;if(0==tools.apply(setting.callback.beforeAsync,[setting.treeId,node],!0))return tools.apply(callback),!1;if(node){node.isAjaxing=!0;var icoObj=$$(node,consts.id.ICON,setting);icoObj.attr({style:"","class":consts.className.BUTTON+" "+consts.className.ICO_LOADING})}var tmpParam={};for(i=0,l=setting.async.autoParam.length;node&&l>i;i++){var pKey=setting.async.autoParam[i].split("="),spKey=pKey;pKey.length>1&&(spKey=pKey[1],pKey=pKey[0]),tmpParam[spKey]=node[pKey]}if(tools.isArray(setting.async.otherParam))for(i=0,l=setting.async.otherParam.length;l>i;i+=2)tmpParam[setting.async.otherParam[i]]=setting.async.otherParam[i+1];else for(var p in setting.async.otherParam)tmpParam[p]=setting.async.otherParam[p];var _tmpV=data.getRoot(setting)._ver;return $.ajax({contentType:setting.async.contentType,cache:!1,type:setting.async.type,url:tools.apply(setting.async.url,[setting.treeId,node],setting.async.url),data:tmpParam,dataType:setting.async.dataType,success:function(msg){if(_tmpV==data.getRoot(setting)._ver){var newNodes=[];try{newNodes=msg&&0!=msg.length?"string"==typeof msg?eval("("+msg+")"):msg:[]}catch(err){newNodes=msg}node&&(node.isAjaxing=null,node.zAsync=!0),view.setNodeLineIcos(setting,node),newNodes&&""!==newNodes?(newNodes=tools.apply(setting.async.dataFilter,[setting.treeId,node,newNodes],newNodes),view.addNodes(setting,node,newNodes?tools.clone(newNodes):[],!!isSilent)):view.addNodes(setting,node,[],!!isSilent),setting.treeObj.trigger(consts.event.ASYNC_SUCCESS,[setting.treeId,node,msg]),tools.apply(callback)}},error:function(a,b,c){_tmpV==data.getRoot(setting)._ver&&(node&&(node.isAjaxing=null),view.setNodeLineIcos(setting,node),setting.treeObj.trigger(consts.event.ASYNC_ERROR,[setting.treeId,node,a,b,c]))}}),!0},cancelPreSelectedNode:function(a,b,c){var d,e,f=data.getRoot(a).curSelectedList;for(d=f.length-1;d>=0;d--)if(e=f[d],b===e||!b&&(!c||c!==e)){if($$(e,consts.id.A,a).removeClass(consts.node.CURSELECTED),b){data.removeSelectedNode(a,b),a.treeObj.trigger(consts.event.UNSELECTED,[event,a.treeId,e]);break}f.splice(d,1),a.treeObj.trigger(consts.event.UNSELECTED,[event,a.treeId,e])}},createNodeCallback:function(a){if(a.callback.onNodeCreated||a.view.addDiyDom)for(var b=data.getRoot(a);b.createdNodes.length>0;){var c=b.createdNodes.shift();tools.apply(a.view.addDiyDom,[a.treeId,c]),a.callback.onNodeCreated&&a.treeObj.trigger(consts.event.NODECREATED,[a.treeId,c])}},createNodes:function(a,b,c,d){if(c&&0!=c.length){var e=data.getRoot(a),f=a.data.key.children,g=!d||d.open||!!$$(d[f][0],a).get(0);e.createdNodes=[];var h=view.appendNodes(a,b,c,d,!0,g);if(d){var i=$$(d,consts.id.UL,a);i.get(0)&&i.append(h.join(""))}else a.treeObj.append(h.join(""));view.createNodeCallback(a)}},destroy:function(a){a&&(data.initCache(a),data.initRoot(a),event.unbindTree(a),event.unbindEvent(a),a.treeObj.empty(),delete settings[a.treeId])},expandCollapseNode:function(a,b,c,d,e){var f=data.getRoot(a),g=a.data.key.children;if(!b)return void tools.apply(e,[]);if(f.expandTriggerFlag){var h=e;e=function(){h&&h(),b.open?a.treeObj.trigger(consts.event.EXPAND,[a.treeId,b]):a.treeObj.trigger(consts.event.COLLAPSE,[a.treeId,b])},f.expandTriggerFlag=!1}if(!b.open&&b.isParent&&(!$$(b,consts.id.UL,a).get(0)||b[g]&&b[g].length>0&&!$$(b[g][0],a).get(0))&&(view.appendParentULDom(a,b),view.createNodeCallback(a)),b.open==c)return void tools.apply(e,[]);var i=$$(b,consts.id.UL,a),j=$$(b,consts.id.SWITCH,a),k=$$(b,consts.id.ICON,a);b.isParent?(b.open=!b.open,b.iconOpen&&b.iconClose&&k.attr("style",view.makeNodeIcoStyle(a,b)),b.open?(view.replaceSwitchClass(b,j,consts.folder.OPEN),view.replaceIcoClass(b,k,consts.folder.OPEN),0==d||""==a.view.expandSpeed?(i.show(),tools.apply(e,[])):b[g]&&b[g].length>0?i.slideDown(a.view.expandSpeed,e):(i.show(),tools.apply(e,[]))):(view.replaceSwitchClass(b,j,consts.folder.CLOSE),view.replaceIcoClass(b,k,consts.folder.CLOSE),0!=d&&""!=a.view.expandSpeed&&b[g]&&b[g].length>0?i.slideUp(a.view.expandSpeed,e):(i.hide(),tools.apply(e,[])))):tools.apply(e,[])},expandCollapseParentNode:function(a,b,c,d,e){if(b){if(!b.parentTId)return void view.expandCollapseNode(a,b,c,d,e);view.expandCollapseNode(a,b,c,d),b.parentTId&&view.expandCollapseParentNode(a,b.getParentNode(),c,d,e)}},expandCollapseSonNode:function(a,b,c,d,e){var f=data.getRoot(a),g=a.data.key.children,h=b?b[g]:f[g],i=b?!1:d,j=data.getRoot(a).expandTriggerFlag;if(data.getRoot(a).expandTriggerFlag=!1,h)for(var k=0,l=h.length;l>k;k++)h[k]&&view.expandCollapseSonNode(a,h[k],c,i);data.getRoot(a).expandTriggerFlag=j,view.expandCollapseNode(a,b,c,d,e)},isSelectedNode:function(a,b){if(!b)return!1;var c,d=data.getRoot(a).curSelectedList;for(c=d.length-1;c>=0;c--)if(b===d[c])return!0;return!1},makeDOMNodeIcon:function(a,b,c){var d=data.getNodeName(b,c),e=b.view.nameIsHTML?d:d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");a.push("<span id='",c.tId,consts.id.ICON,"' title='' treeNode",consts.id.ICON," class='",view.makeNodeIcoClass(b,c),"' style='",view.makeNodeIcoStyle(b,c),"'></span><span id='",c.tId,consts.id.SPAN,"'>",e,"</span>")},makeDOMNodeLine:function(a,b,c){a.push("<span id='",c.tId,consts.id.SWITCH,"' title='' class='",view.makeNodeLineClass(b,c),"' treeNode",consts.id.SWITCH,"></span>")},makeDOMNodeMainAfter:function(a){a.push("</li>")},makeDOMNodeMainBefore:function(a,b,c){a.push("<li id='",c.tId,"' class='",consts.className.LEVEL,c.level,"' tabindex='0' hidefocus='true' treenode>")},makeDOMNodeNameAfter:function(a){a.push("</a>")},makeDOMNodeNameBefore:function(a,b,c){var d=data.getNodeTitle(b,c),e=view.makeNodeUrl(b,c),f=view.makeNodeFontCss(b,c),g=[];for(var h in f)g.push(h,":",f[h],";");a.push("<a id='",c.tId,consts.id.A,"' class='",consts.className.LEVEL,c.level,"' treeNode",consts.id.A,' onclick="',c.click||"",'" ',null!=e&&e.length>0?"href='"+e+"'":""," target='",view.makeNodeTarget(c),"' style='",g.join(""),"'"),tools.apply(b.view.showTitle,[b.treeId,c],b.view.showTitle)&&d&&a.push("title='",d.replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'"),a.push(">")},makeNodeFontCss:function(a,b){var c=tools.apply(a.view.fontCss,[a.treeId,b],a.view.fontCss);return c&&"function"!=typeof c?c:{}},makeNodeIcoClass:function(a,b){var c=["ico"];return b.isAjaxing||(c[0]=(b.iconSkin?b.iconSkin+"_":"")+c[0],c.push(b.isParent?b.open?consts.folder.OPEN:consts.folder.CLOSE:consts.folder.DOCU)),consts.className.BUTTON+" "+c.join("_")},makeNodeIcoStyle:function(a,b){var c=[];if(!b.isAjaxing){var d=b.isParent&&b.iconOpen&&b.iconClose?b.open?b.iconOpen:b.iconClose:b.icon;d&&c.push("background:url(",d,") 0 0 no-repeat;"),0!=a.view.showIcon&&tools.apply(a.view.showIcon,[a.treeId,b],!0)||c.push("width:0px;height:0px;")}return c.join("")},makeNodeLineClass:function(a,b){var c=[];return c.push(a.view.showLine?0==b.level&&b.isFirstNode&&b.isLastNode?consts.line.ROOT:0==b.level&&b.isFirstNode?consts.line.ROOTS:b.isLastNode?consts.line.BOTTOM:consts.line.CENTER:consts.line.NOLINE),c.push(b.isParent?b.open?consts.folder.OPEN:consts.folder.CLOSE:consts.folder.DOCU),view.makeNodeLineClassEx(b)+c.join("_")},makeNodeLineClassEx:function(a){return consts.className.BUTTON+" "+consts.className.LEVEL+a.level+" "+consts.className.SWITCH+" "},makeNodeTarget:function(a){return a.target||"_blank"},makeNodeUrl:function(a,b){var c=a.data.key.url;return b[c]?b[c]:null},makeUlHtml:function(a,b,c,d){c.push("<ul id='",b.tId,consts.id.UL,"' class='",consts.className.LEVEL,b.level," ",view.makeUlLineClass(a,b),"' style='display:",b.open?"block":"none","'>"),c.push(d),c.push("</ul>")},makeUlLineClass:function(a,b){return a.view.showLine&&!b.isLastNode?consts.line.LINE:""},removeChildNodes:function(a,b){if(b){var c=a.data.key.children,d=b[c];if(d){for(var e=0,f=d.length;f>e;e++)data.removeNodeCache(a,d[e]);if(data.removeSelectedNode(a),delete b[c],a.data.keep.parent)$$(b,consts.id.UL,a).empty();else{b.isParent=!1,b.open=!1;var g=$$(b,consts.id.SWITCH,a),h=$$(b,consts.id.ICON,a);view.replaceSwitchClass(b,g,consts.folder.DOCU),view.replaceIcoClass(b,h,consts.folder.DOCU),$$(b,consts.id.UL,a).remove()}}}},setFirstNode:function(a,b){var c=a.data.key.children,d=b[c].length;d>0&&(b[c][0].isFirstNode=!0)},setLastNode:function(a,b){var c=a.data.key.children,d=b[c].length;d>0&&(b[c][d-1].isLastNode=!0)},removeNode:function(a,b){var c=data.getRoot(a),d=a.data.key.children,e=b.parentTId?b.getParentNode():c;if(b.isFirstNode=!1,b.isLastNode=!1,b.getPreNode=function(){return null},b.getNextNode=function(){return null},data.getNodeCache(a,b.tId)){$$(b,a).remove(),data.removeNodeCache(a,b),data.removeSelectedNode(a,b);for(var f=0,g=e[d].length;g>f;f++)if(e[d][f].tId==b.tId){e[d].splice(f,1);break}view.setFirstNode(a,e),view.setLastNode(a,e);var h,i,j,k=e[d].length;if(a.data.keep.parent||0!=k){if(a.view.showLine&&k>0){var l=e[d][k-1];if(h=$$(l,consts.id.UL,a),i=$$(l,consts.id.SWITCH,a),j=$$(l,consts.id.ICON,a),e==c)if(1==e[d].length)view.replaceSwitchClass(l,i,consts.line.ROOT);else{var m=$$(e[d][0],consts.id.SWITCH,a);view.replaceSwitchClass(e[d][0],m,consts.line.ROOTS),view.replaceSwitchClass(l,i,consts.line.BOTTOM)}else view.replaceSwitchClass(l,i,consts.line.BOTTOM);h.removeClass(consts.line.LINE)}}else e.isParent=!1,e.open=!1,h=$$(e,consts.id.UL,a),i=$$(e,consts.id.SWITCH,a),j=$$(e,consts.id.ICON,a),view.replaceSwitchClass(e,i,consts.folder.DOCU),view.replaceIcoClass(e,j,consts.folder.DOCU),h.css("display","none")}},replaceIcoClass:function(a,b,c){if(b&&!a.isAjaxing){var d=b.attr("class");if(void 0!=d){var e=d.split("_");switch(c){case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:e[e.length-1]=c}b.attr("class",e.join("_"))}}},replaceSwitchClass:function(a,b,c){if(b){var d=b.attr("class");if(void 0!=d){var e=d.split("_");switch(c){case consts.line.ROOT:case consts.line.ROOTS:case consts.line.CENTER:case consts.line.BOTTOM:case consts.line.NOLINE:e[0]=view.makeNodeLineClassEx(a)+c;break;case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:e[1]=c}b.attr("class",e.join("_")),c!==consts.folder.DOCU?b.removeAttr("disabled"):b.attr("disabled","disabled")}}},selectNode:function(a,b,c){c||view.cancelPreSelectedNode(a,null,b),$$(b,consts.id.A,a).addClass(consts.node.CURSELECTED),data.addSelectedNode(a,b),a.treeObj.trigger(consts.event.SELECTED,[event,a.treeId,b])},setNodeFontCss:function(a,b){var c=$$(b,consts.id.A,a),d=view.makeNodeFontCss(a,b);d&&c.css(d)},setNodeLineIcos:function(a,b){if(b){var c=$$(b,consts.id.SWITCH,a),d=$$(b,consts.id.UL,a),e=$$(b,consts.id.ICON,a),f=view.makeUlLineClass(a,b);0==f.length?d.removeClass(consts.line.LINE):d.addClass(f),c.attr("class",view.makeNodeLineClass(a,b)),b.isParent?c.removeAttr("disabled"):c.attr("disabled","disabled"),e.removeAttr("style"),e.attr("style",view.makeNodeIcoStyle(a,b)),e.attr("class",view.makeNodeIcoClass(a,b))}},setNodeName:function(a,b){var c=data.getNodeTitle(a,b),d=$$(b,consts.id.SPAN,a);if(d.empty(),a.view.nameIsHTML?d.html(data.getNodeName(a,b)):d.text(data.getNodeName(a,b)),tools.apply(a.view.showTitle,[a.treeId,b],a.view.showTitle)){var e=$$(b,consts.id.A,a);e.attr("title",c?c:"")}},setNodeTarget:function(a,b){var c=$$(b,consts.id.A,a);c.attr("target",view.makeNodeTarget(b))},setNodeUrl:function(a,b){var c=$$(b,consts.id.A,a),d=view.makeNodeUrl(a,b);null==d||0==d.length?c.removeAttr("href"):c.attr("href",d)},switchNode:function(a,b){if(b.open||!tools.canAsync(a,b))view.expandCollapseNode(a,b,!b.open);else if(a.async.enable){if(!view.asyncNode(a,b))return void view.expandCollapseNode(a,b,!b.open)}else b&&view.expandCollapseNode(a,b,!b.open)}};$.fn.zTree={consts:_consts,_z:{tools:tools,view:view,event:event,data:data},getZTreeObj:function(a){var b=data.getZTreeTools(a);return b?b:null},destroy:function(a){if(a&&a.length>0)view.destroy(data.getSetting(a));else for(var b in settings)view.destroy(settings[b])},init:function(a,b,c){var d=tools.clone(_setting);$.extend(!0,d,b),d.treeId=a.attr("id"),d.treeObj=a,d.treeObj.empty(),settings[d.treeId]=d,"undefined"==typeof document.body.style.maxHeight&&(d.view.expandSpeed=""),data.initRoot(d);var e=data.getRoot(d),f=d.data.key.children;c=c?tools.clone(tools.isArray(c)?c:[c]):[],e[f]=d.data.simpleData.enable?data.transformTozTreeFormat(d,c):c,data.initCache(d),event.unbindTree(d),event.bindTree(d),event.unbindEvent(d),event.bindEvent(d);var g={setting:d,addNodes:function(a,b,c){function e(){view.addNodes(d,a,f,1==c)}if(!b)return null;if(a||(a=null),a&&!a.isParent&&d.data.keep.leaf)return null;var f=tools.clone(tools.isArray(b)?b:[b]);return tools.canAsync(d,a)?view.asyncNode(d,a,c,e):e(),f},cancelSelectedNode:function(a){view.cancelPreSelectedNode(d,a)},destroy:function(){view.destroy(d)},expandAll:function(a){return a=!!a,view.expandCollapseSonNode(d,null,a,!0),a},expandNode:function(a,b,c,e,f){if(!a||!a.isParent)return null;if(b!==!0&&b!==!1&&(b=!a.open),f=!!f,f&&b&&0==tools.apply(d.callback.beforeExpand,[d.treeId,a],!0))return null;if(f&&!b&&0==tools.apply(d.callback.beforeCollapse,[d.treeId,a],!0))return null;if(b&&a.parentTId&&view.expandCollapseParentNode(d,a.getParentNode(),b,!1),b===a.open&&!c)return null;if(data.getRoot(d).expandTriggerFlag=f,!tools.canAsync(d,a)&&c)view.expandCollapseSonNode(d,a,b,!0,function(){if(e!==!1)try{$$(a,d).focus().blur()}catch(b){}});else if(a.open=!b,view.switchNode(this.setting,a),e!==!1)try{$$(a,d).focus().blur()}catch(g){}return b},getNodes:function(){return data.getNodes(d)},getNodeByParam:function(a,b,c){return a?data.getNodeByParam(d,c?c[d.data.key.children]:data.getNodes(d),a,b):null},getNodeByTId:function(a){return data.getNodeCache(d,a)},getNodesByParam:function(a,b,c){return a?data.getNodesByParam(d,c?c[d.data.key.children]:data.getNodes(d),a,b):null},getNodesByParamFuzzy:function(a,b,c){return a?data.getNodesByParamFuzzy(d,c?c[d.data.key.children]:data.getNodes(d),a,b):null},getNodesByFilter:function(a,b,c,e){return b=!!b,a&&"function"==typeof a?data.getNodesByFilter(d,c?c[d.data.key.children]:data.getNodes(d),a,b,e):b?null:[]},getNodeIndex:function(a){if(!a)return null;for(var b=d.data.key.children,c=a.parentTId?a.getParentNode():data.getRoot(d),e=0,f=c[b].length;f>e;e++)if(c[b][e]==a)return e;return-1},getSelectedNodes:function(){for(var a=[],b=data.getRoot(d).curSelectedList,c=0,e=b.length;e>c;c++)a.push(b[c]);return a},isSelectedNode:function(a){return data.isSelectedNode(d,a)},reAsyncChildNodes:function(a,b,c){if(this.setting.async.enable){var e=!a;if(e&&(a=data.getRoot(d)),"refresh"==b){for(var f=this.setting.data.key.children,g=0,h=a[f]?a[f].length:0;h>g;g++)data.removeNodeCache(d,a[f][g]);if(data.removeSelectedNode(d),a[f]=[],e)this.setting.treeObj.empty();else{var i=$$(a,consts.id.UL,d);i.empty()}}view.asyncNode(this.setting,e?null:a,!!c)}},refresh:function(){this.setting.treeObj.empty();var a=data.getRoot(d),b=a[d.data.key.children];data.initRoot(d),a[d.data.key.children]=b,data.initCache(d),view.createNodes(d,0,a[d.data.key.children])},removeChildNodes:function(a){if(!a)return null;var b=d.data.key.children,c=a[b];return view.removeChildNodes(d,a),c?c:null},removeNode:function(a,b){a&&(b=!!b,b&&0==tools.apply(d.callback.beforeRemove,[d.treeId,a],!0)||(view.removeNode(d,a),b&&this.setting.treeObj.trigger(consts.event.REMOVE,[d.treeId,a])))},selectNode:function(a,b){if(a&&tools.uCanDo(d)){if(b=d.view.selectedMulti&&b,a.parentTId)view.expandCollapseParentNode(d,a.getParentNode(),!0,!1,function(){try{$$(a,d).focus().blur()}catch(b){}});else try{$$(a,d).focus().blur()}catch(c){}view.selectNode(d,a,b)}},transformTozTreeNodes:function(a){return data.transformTozTreeFormat(d,a)},transformToArray:function(a){return data.transformToArrayFormat(d,a)},updateNode:function(a){if(a){var b=$$(a,d);b.get(0)&&tools.uCanDo(d)&&(view.setNodeName(d,a),view.setNodeTarget(d,a),view.setNodeUrl(d,a),view.setNodeLineIcos(d,a),view.setNodeFontCss(d,a))}}};return e.treeTools=g,data.setZTreeTools(d,g),e[f]&&e[f].length>0?view.createNodes(d,0,e[f]):d.async.enable&&d.async.url&&""!==d.async.url&&view.asyncNode(d),g}};var zt=$.fn.zTree,$$=tools.$,consts=zt.consts}(jQuery),function(a){var b={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},c={check:{enable:!1,autoCheckTrigger:!1,chkStyle:b.checkbox.STYLE,nocheckInherit:!1,chkDisabledInherit:!1,radioType:b.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}},d=function(a){var b=v.getRoot(a);b.radioCheckedList=[]},e=function(){},f=function(a){var b=a.treeObj,c=t.event;b.bind(c.CHECK,function(b,c,d,e){b.srcEvent=c,s.apply(a.callback.onCheck,[b,d,e])})},g=function(a){var b=a.treeObj,c=t.event;b.unbind(c.CHECK)},h=function(a){var b=a.target,c=v.getSetting(a.data.treeId),d="",e=null,f="",g="",h=null,i=null;if(s.eqs(a.type,"mouseover")?c.check.enable&&s.eqs(b.tagName,"span")&&null!==b.getAttribute("treeNode"+t.id.CHECK)&&(d=s.getNodeMainDom(b).id,f="mouseoverCheck"):s.eqs(a.type,"mouseout")?c.check.enable&&s.eqs(b.tagName,"span")&&null!==b.getAttribute("treeNode"+t.id.CHECK)&&(d=s.getNodeMainDom(b).id,f="mouseoutCheck"):s.eqs(a.type,"click")&&c.check.enable&&s.eqs(b.tagName,"span")&&null!==b.getAttribute("treeNode"+t.id.CHECK)&&(d=s.getNodeMainDom(b).id,f="checkNode"),d.length>0)switch(e=v.getNodeCache(c,d),f){case"checkNode":h=n.onCheckNode;break;case"mouseoverCheck":h=n.onMouseoverCheck;break;case"mouseoutCheck":h=n.onMouseoutCheck}var j={stop:"checkNode"===f,node:e,nodeEventType:f,nodeEventCallback:h,treeEventType:g,treeEventCallback:i};return j},i=function(a,b,c,d){if(c){var e=a.data.key.checked;if("string"==typeof c[e]&&(c[e]=s.eqs(c[e],"true")),c[e]=!!c[e],c.checkedOld=c[e],"string"==typeof c.nocheck&&(c.nocheck=s.eqs(c.nocheck,"true")),c.nocheck=!!c.nocheck||a.check.nocheckInherit&&d&&!!d.nocheck,"string"==typeof c.chkDisabled&&(c.chkDisabled=s.eqs(c.chkDisabled,"true")),c.chkDisabled=!!c.chkDisabled||a.check.chkDisabledInherit&&d&&!!d.chkDisabled,"string"==typeof c.halfCheck&&(c.halfCheck=s.eqs(c.halfCheck,"true")),c.halfCheck=!!c.halfCheck,c.check_Child_State=-1,c.check_Focus=!1,c.getCheckStatus=function(){return v.getCheckStatus(a,c)},a.check.chkStyle==t.radio.STYLE&&a.check.radioType==t.radio.TYPE_ALL&&c[e]){var f=v.getRoot(a);f.radioCheckedList.push(c)}}},j=function(a,b,c){a.data.key.checked;a.check.enable&&(v.makeChkFlag(a,b),c.push("<span ID='",b.tId,t.id.CHECK,"' class='",u.makeChkClass(a,b),"' treeNode",t.id.CHECK,b.nocheck===!0?" style='display:none;'":"","></span>"))},k=function(a,b){b.checkNode=function(a,b,c,d){var e=this.setting.data.key.checked;if(a.chkDisabled!==!0&&(b!==!0&&b!==!1&&(b=!a[e]),d=!!d,(a[e]!==b||c)&&(!d||0!=s.apply(this.setting.callback.beforeCheck,[this.setting.treeId,a],!0))&&s.uCanDo(this.setting)&&this.setting.check.enable&&a.nocheck!==!0)){a[e]=b;var f=w(a,t.id.CHECK,this.setting);(c||this.setting.check.chkStyle===t.radio.STYLE)&&u.checkNodeRelation(this.setting,a),u.setChkClass(this.setting,f,a),u.repairParentChkClassWithSelf(this.setting,a),d&&this.setting.treeObj.trigger(t.event.CHECK,[null,this.setting.treeId,a])}},b.checkAllNodes=function(a){u.repairAllChk(this.setting,!!a)},b.getCheckedNodes=function(a){var b=this.setting.data.key.children;return a=a!==!1,v.getTreeCheckedNodes(this.setting,v.getRoot(this.setting)[b],a)},b.getChangeCheckedNodes=function(){var a=this.setting.data.key.children;return v.getTreeChangeCheckedNodes(this.setting,v.getRoot(this.setting)[a])},b.setChkDisabled=function(a,b,c,d){b=!!b,c=!!c,d=!!d,u.repairSonChkDisabled(this.setting,a,b,d),u.repairParentChkDisabled(this.setting,a.getParentNode(),b,c)};var c=b.updateNode;b.updateNode=function(a,d){if(c&&c.apply(b,arguments),a&&this.setting.check.enable){var e=w(a,this.setting);if(e.get(0)&&s.uCanDo(this.setting)){var f=w(a,t.id.CHECK,this.setting);(1==d||this.setting.check.chkStyle===t.radio.STYLE)&&u.checkNodeRelation(this.setting,a),u.setChkClass(this.setting,f,a),u.repairParentChkClassWithSelf(this.setting,a)}}}},l={getRadioCheckedList:function(a){for(var b=v.getRoot(a).radioCheckedList,c=0,d=b.length;d>c;c++)v.getNodeCache(a,b[c].tId)||(b.splice(c,1),c--,d--);return b},getCheckStatus:function(a,b){if(!a.check.enable||b.nocheck||b.chkDisabled)return null;var c=a.data.key.checked,d={checked:b[c],half:b.halfCheck?b.halfCheck:a.check.chkStyle==t.radio.STYLE?2===b.check_Child_State:b[c]?b.check_Child_State>-1&&b.check_Child_State<2:b.check_Child_State>0};return d},getTreeCheckedNodes:function(a,b,c,d){if(!b)return[];var e=a.data.key.children,f=a.data.key.checked,g=c&&a.check.chkStyle==t.radio.STYLE&&a.check.radioType==t.radio.TYPE_ALL;d=d?d:[];for(var h=0,i=b.length;i>h&&(b[h].nocheck===!0||b[h].chkDisabled===!0||b[h][f]!=c||(d.push(b[h]),!g))&&(v.getTreeCheckedNodes(a,b[h][e],c,d),!(g&&d.length>0));h++);return d},getTreeChangeCheckedNodes:function(a,b,c){if(!b)return[];var d=a.data.key.children,e=a.data.key.checked;c=c?c:[];for(var f=0,g=b.length;g>f;f++)b[f].nocheck!==!0&&b[f].chkDisabled!==!0&&b[f][e]!=b[f].checkedOld&&c.push(b[f]),v.getTreeChangeCheckedNodes(a,b[f][d],c);return c},makeChkFlag:function(a,b){if(b){var c=a.data.key.children,d=a.data.key.checked,e=-1;if(b[c])for(var f=0,g=b[c].length;g>f;f++){var h=b[c][f],i=-1;if(a.check.chkStyle==t.radio.STYLE){if(i=h.nocheck===!0||h.chkDisabled===!0?h.check_Child_State:h.halfCheck===!0?2:h[d]?2:h.check_Child_State>0?2:0,2==i){e=2;break}0==i&&(e=0)}else if(a.check.chkStyle==t.checkbox.STYLE){if(i=h.nocheck===!0||h.chkDisabled===!0?h.check_Child_State:h.halfCheck===!0?1:h[d]?-1===h.check_Child_State||2===h.check_Child_State?2:1:h.check_Child_State>0?1:0,1===i){e=1;break}if(2===i&&e>-1&&f>0&&i!==e){e=1;break}if(2===e&&i>-1&&2>i){e=1;break}i>-1&&(e=i)}}b.check_Child_State=e}}},m={},n={onCheckNode:function(a,b){if(b.chkDisabled===!0)return!1;var c=v.getSetting(a.data.treeId),d=c.data.key.checked;if(0==s.apply(c.callback.beforeCheck,[c.treeId,b],!0))return!0;b[d]=!b[d],u.checkNodeRelation(c,b);var e=w(b,t.id.CHECK,c);return u.setChkClass(c,e,b),u.repairParentChkClassWithSelf(c,b),c.treeObj.trigger(t.event.CHECK,[a,c.treeId,b]),!0},onMouseoverCheck:function(a,b){if(b.chkDisabled===!0)return!1;var c=v.getSetting(a.data.treeId),d=w(b,t.id.CHECK,c);return b.check_Focus=!0,u.setChkClass(c,d,b),!0},onMouseoutCheck:function(a,b){if(b.chkDisabled===!0)return!1;var c=v.getSetting(a.data.treeId),d=w(b,t.id.CHECK,c);return b.check_Focus=!1,u.setChkClass(c,d,b),!0}},o={},p={checkNodeRelation:function(a,b){var c,d,e,f=a.data.key.children,g=a.data.key.checked,h=t.radio;if(a.check.chkStyle==h.STYLE){var i=v.getRadioCheckedList(a);if(b[g])if(a.check.radioType==h.TYPE_ALL){for(d=i.length-1;d>=0;d--)c=i[d],c[g]&&c!=b&&(c[g]=!1,i.splice(d,1),u.setChkClass(a,w(c,t.id.CHECK,a),c),c.parentTId!=b.parentTId&&u.repairParentChkClassWithSelf(a,c));i.push(b)}else{var j=b.parentTId?b.getParentNode():v.getRoot(a);for(d=0,e=j[f].length;e>d;d++)c=j[f][d],c[g]&&c!=b&&(c[g]=!1,u.setChkClass(a,w(c,t.id.CHECK,a),c))}else if(a.check.radioType==h.TYPE_ALL)for(d=0,e=i.length;e>d;d++)if(b==i[d]){i.splice(d,1);break}}else b[g]&&(!b[f]||0==b[f].length||a.check.chkboxType.Y.indexOf("s")>-1)&&u.setSonNodeCheckBox(a,b,!0),b[g]||b[f]&&0!=b[f].length&&!(a.check.chkboxType.N.indexOf("s")>-1)||u.setSonNodeCheckBox(a,b,!1),b[g]&&a.check.chkboxType.Y.indexOf("p")>-1&&u.setParentNodeCheckBox(a,b,!0),!b[g]&&a.check.chkboxType.N.indexOf("p")>-1&&u.setParentNodeCheckBox(a,b,!1)},makeChkClass:function(a,b){var c=a.data.key.checked,d=t.checkbox,e=t.radio,f="";f=b.chkDisabled===!0?d.DISABLED:b.halfCheck?d.PART:a.check.chkStyle==e.STYLE?b.check_Child_State<1?d.FULL:d.PART:b[c]?2===b.check_Child_State||-1===b.check_Child_State?d.FULL:d.PART:b.check_Child_State<1?d.FULL:d.PART;var g=a.check.chkStyle+"_"+(b[c]?d.TRUE:d.FALSE)+"_"+f;return g=b.check_Focus&&b.chkDisabled!==!0?g+"_"+d.FOCUS:g,t.className.BUTTON+" "+d.DEFAULT+" "+g},repairAllChk:function(a,b){if(a.check.enable&&a.check.chkStyle===t.checkbox.STYLE)for(var c=a.data.key.checked,d=a.data.key.children,e=v.getRoot(a),f=0,g=e[d].length;g>f;f++){var h=e[d][f];h.nocheck!==!0&&h.chkDisabled!==!0&&(h[c]=b),u.setSonNodeCheckBox(a,h,b)}},repairChkClass:function(a,b){if(b&&(v.makeChkFlag(a,b),b.nocheck!==!0)){var c=w(b,t.id.CHECK,a);u.setChkClass(a,c,b)}},repairParentChkClass:function(a,b){if(b&&b.parentTId){var c=b.getParentNode();u.repairChkClass(a,c),u.repairParentChkClass(a,c)}},repairParentChkClassWithSelf:function(a,b){if(b){var c=a.data.key.children;b[c]&&b[c].length>0?u.repairParentChkClass(a,b[c][0]):u.repairParentChkClass(a,b)}},repairSonChkDisabled:function(a,b,c,d){if(b){var e=a.data.key.children;if(b.chkDisabled!=c&&(b.chkDisabled=c),u.repairChkClass(a,b),b[e]&&d)for(var f=0,g=b[e].length;g>f;f++){var h=b[e][f];u.repairSonChkDisabled(a,h,c,d)}}},repairParentChkDisabled:function(a,b,c,d){b&&(b.chkDisabled!=c&&d&&(b.chkDisabled=c),u.repairChkClass(a,b),u.repairParentChkDisabled(a,b.getParentNode(),c,d))},setChkClass:function(a,b,c){b&&(c.nocheck===!0?b.hide():b.show(),b.attr("class",u.makeChkClass(a,c)))},setParentNodeCheckBox:function(a,b,c,d){var e=a.data.key.children,f=a.data.key.checked,g=w(b,t.id.CHECK,a);if(d||(d=b),v.makeChkFlag(a,b),b.nocheck!==!0&&b.chkDisabled!==!0&&(b[f]=c,u.setChkClass(a,g,b),a.check.autoCheckTrigger&&b!=d&&a.treeObj.trigger(t.event.CHECK,[null,a.treeId,b])),b.parentTId){var h=!0;if(!c)for(var i=b.getParentNode()[e],j=0,k=i.length;k>j;j++)if(i[j].nocheck!==!0&&i[j].chkDisabled!==!0&&i[j][f]||(i[j].nocheck===!0||i[j].chkDisabled===!0)&&i[j].check_Child_State>0){h=!1;break}h&&u.setParentNodeCheckBox(a,b.getParentNode(),c,d)}},setSonNodeCheckBox:function(a,b,c,d){if(b){var e=a.data.key.children,f=a.data.key.checked,g=w(b,t.id.CHECK,a);d||(d=b);var h=!1;if(b[e])for(var i=0,j=b[e].length;j>i&&b.chkDisabled!==!0;i++){var k=b[e][i];u.setSonNodeCheckBox(a,k,c,d),k.chkDisabled===!0&&(h=!0)}b!=v.getRoot(a)&&b.chkDisabled!==!0&&(h&&b.nocheck!==!0&&v.makeChkFlag(a,b),b.nocheck!==!0&&b.chkDisabled!==!0?(b[f]=c,h||(b.check_Child_State=b[e]&&b[e].length>0?c?2:0:-1)):b.check_Child_State=-1,u.setChkClass(a,g,b),a.check.autoCheckTrigger&&b!=d&&b.nocheck!==!0&&b.chkDisabled!==!0&&a.treeObj.trigger(t.event.CHECK,[null,a.treeId,b]))}}},q={tools:o,view:p,event:m,data:l};a.extend(!0,a.fn.zTree.consts,b),a.extend(!0,a.fn.zTree._z,q);var r=a.fn.zTree,s=r._z.tools,t=r.consts,u=r._z.view,v=r._z.data,w=(r._z.event,s.$);
v.exSetting(c),v.addInitBind(f),v.addInitUnBind(g),v.addInitCache(e),v.addInitNode(i),v.addInitProxy(h,!0),v.addInitRoot(d),v.addBeforeA(j),v.addZTreeTools(k);var x=u.createNodes;u.createNodes=function(a,b,c,d){x&&x.apply(u,arguments),c&&u.repairParentChkClassWithSelf(a,d)};var y=u.removeNode;u.removeNode=function(a,b){var c=b.getParentNode();y&&y.apply(u,arguments),b&&c&&(u.repairChkClass(a,c),u.repairParentChkClass(a,c))};var z=u.appendNodes;u.appendNodes=function(a,b,c,d){var e="";return z&&(e=z.apply(u,arguments)),d&&v.makeChkFlag(a,d),e}}(jQuery),function(a){var b={event:{DRAG:"ztree_drag",DROP:"ztree_drop",RENAME:"ztree_rename",DRAGMOVE:"ztree_dragmove"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},c={edit:{enable:!1,editNameSelectAll:!1,showRemoveBtn:!0,showRenameBtn:!0,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:!1,isCopy:!0,isMove:!0,prev:!0,next:!0,inner:!0,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDragMove:null,onDrop:null,onRename:null}},d=function(a){var b=u.getRoot(a),c=u.getRoots();b.curEditNode=null,b.curEditInput=null,b.curHoverNode=null,b.dragFlag=0,b.dragNodeShowBefore=[],b.dragMaskList=new Array,c.showHoverDom=!0},e=function(){},f=function(a){var b=a.treeObj,c=s.event;b.bind(c.RENAME,function(b,c,d,e){r.apply(a.callback.onRename,[b,c,d,e])}),b.bind(c.DRAG,function(b,c,d,e){r.apply(a.callback.onDrag,[c,d,e])}),b.bind(c.DRAGMOVE,function(b,c,d,e){r.apply(a.callback.onDragMove,[c,d,e])}),b.bind(c.DROP,function(b,c,d,e,f,g,h){r.apply(a.callback.onDrop,[c,d,e,f,g,h])})},g=function(a){var b=a.treeObj,c=s.event;b.unbind(c.RENAME),b.unbind(c.DRAG),b.unbind(c.DRAGMOVE),b.unbind(c.DROP)},h=function(a){var b=a.target,c=u.getSetting(a.data.treeId),d=a.relatedTarget,e="",f=null,g="",h="",i=null,j=null,k=null;if(r.eqs(a.type,"mouseover")?(k=r.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+s.id.A}]),k&&(e=r.getNodeMainDom(k).id,g="hoverOverNode")):r.eqs(a.type,"mouseout")?(k=r.getMDom(c,d,[{tagName:"a",attrName:"treeNode"+s.id.A}]),k||(e="remove",g="hoverOutNode")):r.eqs(a.type,"mousedown")&&(k=r.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+s.id.A}]),k&&(e=r.getNodeMainDom(k).id,g="mousedownNode")),e.length>0)switch(f=u.getNodeCache(c,e),g){case"mousedownNode":i=m.onMousedownNode;break;case"hoverOverNode":i=m.onHoverOverNode;break;case"hoverOutNode":i=m.onHoverOutNode}var l={stop:!1,node:f,nodeEventType:g,nodeEventCallback:i,treeEventType:h,treeEventCallback:j};return l},i=function(a,b,c){c&&(c.isHover=!1,c.editNameFlag=!1)},j=function(a,b){b.cancelEditName=function(a){var b=u.getRoot(this.setting);b.curEditNode&&t.cancelCurEditNode(this.setting,a?a:null,!0)},b.copyNode=function(a,b,c,d){function e(){t.addNodes(f.setting,a,[g],d)}if(!b)return null;if(a&&!a.isParent&&this.setting.data.keep.leaf&&c===s.move.TYPE_INNER)return null;var f=this,g=r.clone(b);return a||(a=null,c=s.move.TYPE_INNER),c==s.move.TYPE_INNER?r.canAsync(this.setting,a)?t.asyncNode(this.setting,a,d,e):e():(t.addNodes(this.setting,a.parentNode,[g],d),t.moveNode(this.setting,a,g,c,!1,d)),g},b.editName=function(a){a&&a.tId&&a===u.getNodeCache(this.setting,a.tId)&&(a.parentTId&&t.expandCollapseParentNode(this.setting,a.getParentNode(),!0),t.editNode(this.setting,a))},b.moveNode=function(a,b,c,d){function e(){t.moveNode(f.setting,a,b,c,!1,d)}if(!b)return b;if(a&&!a.isParent&&this.setting.data.keep.leaf&&c===s.move.TYPE_INNER)return null;if(a&&(b.parentTId==a.tId&&c==s.move.TYPE_INNER||v(b,this.setting).find("#"+a.tId).length>0))return null;a||(a=null);var f=this;return r.canAsync(this.setting,a)&&c===s.move.TYPE_INNER?t.asyncNode(this.setting,a,d,e):e(),b},b.setEditable=function(a){return this.setting.edit.enable=a,this.refresh()}},k={setSonNodeLevel:function(a,b,c){if(c){var d=a.data.key.children;if(c.level=b?b.level+1:0,c[d])for(var e=0,f=c[d].length;f>e;e++)c[d][e]&&u.setSonNodeLevel(a,c,c[d][e])}}},l={},m={onHoverOverNode:function(a,b){var c=u.getSetting(a.data.treeId),d=u.getRoot(c);d.curHoverNode!=b&&m.onHoverOutNode(a),d.curHoverNode=b,t.addHoverDom(c,b)},onHoverOutNode:function(a){var b=u.getSetting(a.data.treeId),c=u.getRoot(b);c.curHoverNode&&!u.isSelectedNode(b,c.curHoverNode)&&(t.removeTreeDom(b,c.curHoverNode),c.curHoverNode=null)},onMousedownNode:function(c,d){function e(c){if(0==k.dragFlag&&Math.abs(I-c.clientX)<j.edit.drag.minMoveSize&&Math.abs(J-c.clientY)<j.edit.drag.minMoveSize)return!0;var d,e,g,h,i,m=j.data.key.children;if(A.css("cursor","pointer"),0==k.dragFlag){if(0==r.apply(j.callback.beforeDrag,[j.treeId,o],!0))return f(c),!0;for(d=0,e=o.length;e>d;d++)0==d&&(k.dragNodeShowBefore=[]),g=o[d],g.isParent&&g.open?(t.expandCollapseNode(j,g,!g.open),k.dragNodeShowBefore[g.tId]=!0):k.dragNodeShowBefore[g.tId]=!1;k.dragFlag=1,l.showHoverDom=!1,r.showIfameMask(j,!0);var n=!0,D=-1;if(o.length>1){var L=o[0].parentTId?o[0].getParentNode()[m]:u.getNodes(j);for(i=[],d=0,e=L.length;e>d;d++)if(void 0!==k.dragNodeShowBefore[L[d].tId]&&(n&&D>-1&&D+1!==d&&(n=!1),i.push(L[d]),D=d),o.length===i.length){o=i;break}}for(n&&(x=o[0].getPreNode(),y=o[o.length-1].getNextNode()),p=v("<ul class='zTreeDragUL'></ul>",j),d=0,e=o.length;e>d;d++)g=o[d],g.editNameFlag=!1,t.selectNode(j,g,d>0),t.removeTreeDom(j,g),d>j.edit.drag.maxShowNodeNum-1||(h=v("<li id='"+g.tId+"_tmp'></li>",j),h.append(v(g,s.id.A,j).clone()),h.css("padding","0"),h.children("#"+g.tId+s.id.A).removeClass(s.node.CURSELECTED),p.append(h),d==j.edit.drag.maxShowNodeNum-1&&(h=v("<li id='"+g.tId+"_moretmp'><a>  ...  </a></li>",j),p.append(h)));p.attr("id",o[0].tId+s.id.UL+"_tmp"),p.addClass(j.treeObj.attr("class")),p.appendTo(A),q=v("<span class='tmpzTreeMove_arrow'></span>",j),q.attr("id","zTreeMove_arrow_tmp"),q.appendTo(A),j.treeObj.trigger(s.event.DRAG,[c,j.treeId,o])}if(1==k.dragFlag){if(w&&q.attr("id")==c.target.id&&G&&c.clientX+z.scrollLeft()+2>a("#"+G+s.id.A,w).offset().left){var M=a("#"+G+s.id.A,w);c.target=M.length>0?M.get(0):c.target}else w&&(w.removeClass(s.node.TMPTARGET_TREE),G&&a("#"+G+s.id.A,w).removeClass(s.node.TMPTARGET_NODE+"_"+s.move.TYPE_PREV).removeClass(s.node.TMPTARGET_NODE+"_"+b.move.TYPE_NEXT).removeClass(s.node.TMPTARGET_NODE+"_"+b.move.TYPE_INNER));w=null,G=null,B=!1,C=j;var N=u.getSettings();for(var O in N)N[O].treeId&&N[O].edit.enable&&N[O].treeId!=j.treeId&&(c.target.id==N[O].treeId||a(c.target).parents("#"+N[O].treeId).length>0)&&(B=!0,C=N[O]);var P=z.scrollTop(),Q=z.scrollLeft(),R=C.treeObj.offset(),S=C.treeObj.get(0).scrollHeight,T=C.treeObj.get(0).scrollWidth,U=c.clientY+P-R.top,V=C.treeObj.height()+R.top-c.clientY-P,W=c.clientX+Q-R.left,X=C.treeObj.width()+R.left-c.clientX-Q,Y=U<j.edit.drag.borderMax&&U>j.edit.drag.borderMin,Z=V<j.edit.drag.borderMax&&V>j.edit.drag.borderMin,$=W<j.edit.drag.borderMax&&W>j.edit.drag.borderMin,_=X<j.edit.drag.borderMax&&X>j.edit.drag.borderMin,ab=U>j.edit.drag.borderMin&&V>j.edit.drag.borderMin&&W>j.edit.drag.borderMin&&X>j.edit.drag.borderMin,bb=Y&&C.treeObj.scrollTop()<=0,cb=Z&&C.treeObj.scrollTop()+C.treeObj.height()+10>=S,db=$&&C.treeObj.scrollLeft()<=0,eb=_&&C.treeObj.scrollLeft()+C.treeObj.width()+10>=T;if(c.target&&r.isChildOrSelf(c.target,C.treeId)){for(var fb=c.target;fb&&fb.tagName&&!r.eqs(fb.tagName,"li")&&fb.id!=C.treeId;)fb=fb.parentNode;var gb=!0;for(d=0,e=o.length;e>d;d++){if(g=o[d],fb.id===g.tId){gb=!1;break}if(v(g,j).find("#"+fb.id).length>0){gb=!1;break}}gb&&c.target&&r.isChildOrSelf(c.target,fb.id+s.id.A)&&(w=a(fb),G=fb.id)}g=o[0],ab&&r.isChildOrSelf(c.target,C.treeId)&&(!w&&(c.target.id==C.treeId||bb||cb||db||eb)&&(B||!B&&g.parentTId)&&(w=C.treeObj),Y?C.treeObj.scrollTop(C.treeObj.scrollTop()-10):Z&&C.treeObj.scrollTop(C.treeObj.scrollTop()+10),$?C.treeObj.scrollLeft(C.treeObj.scrollLeft()-10):_&&C.treeObj.scrollLeft(C.treeObj.scrollLeft()+10),w&&w!=C.treeObj&&w.offset().left<C.treeObj.offset().left&&C.treeObj.scrollLeft(C.treeObj.scrollLeft()+w.offset().left-C.treeObj.offset().left)),p.css({top:c.clientY+P+3+"px",left:c.clientX+Q+3+"px"});var hb=0,ib=0;if(w&&w.attr("id")!=C.treeId){var jb=null==G?null:u.getNodeCache(C,G),kb=(c.ctrlKey||c.metaKey)&&j.edit.drag.isMove&&j.edit.drag.isCopy||!j.edit.drag.isMove&&j.edit.drag.isCopy,lb=!(!x||G!==x.tId),mb=!(!y||G!==y.tId),nb=g.parentTId&&g.parentTId==G,ob=(kb||!mb)&&r.apply(C.edit.drag.prev,[C.treeId,o,jb],!!C.edit.drag.prev),pb=(kb||!lb)&&r.apply(C.edit.drag.next,[C.treeId,o,jb],!!C.edit.drag.next),qb=!(!kb&&nb||C.data.keep.leaf&&!jb.isParent||!r.apply(C.edit.drag.inner,[C.treeId,o,jb],!!C.edit.drag.inner));if(ob||pb||qb){var rb=a("#"+G+s.id.A,w),sb=jb.isLastNode?null:a("#"+jb.getNextNode().tId+s.id.A,w.next()),tb=rb.offset().top,ub=rb.offset().left,vb=ob?qb?.25:pb?.5:1:-1,wb=pb?qb?.75:ob?.5:0:-1,xb=(c.clientY+P-tb)/rb.height();if((1==vb||vb>=xb&&xb>=-.2)&&ob?(hb=1-q.width(),ib=tb-q.height()/2,H=s.move.TYPE_PREV):(0==wb||xb>=wb&&1.2>=xb)&&pb?(hb=1-q.width(),ib=null==sb||jb.isParent&&jb.open?tb+rb.height()-q.height()/2:sb.offset().top-q.height()/2,H=s.move.TYPE_NEXT):(hb=5-q.width(),ib=tb,H=s.move.TYPE_INNER),q.css({display:"block",top:ib+"px",left:ub+hb+"px"}),rb.addClass(s.node.TMPTARGET_NODE+"_"+H),(E!=G||F!=H)&&(K=(new Date).getTime()),jb&&jb.isParent&&H==s.move.TYPE_INNER){var yb=!0;window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==jb.tId?(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null):window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===jb.tId&&(yb=!1),yb&&(window.zTreeMoveTimer=setTimeout(function(){H==s.move.TYPE_INNER&&jb&&jb.isParent&&!jb.open&&(new Date).getTime()-K>C.edit.drag.autoOpenTime&&r.apply(C.callback.beforeDragOpen,[C.treeId,jb],!0)&&(t.switchNode(C,jb),C.edit.drag.autoExpandTrigger&&C.treeObj.trigger(s.event.EXPAND,[C.treeId,jb]))},C.edit.drag.autoOpenTime+50),window.zTreeMoveTargetNodeTId=jb.tId)}}else w=null,G="",H=s.move.TYPE_INNER,q.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null)}else H=s.move.TYPE_INNER,w&&r.apply(C.edit.drag.inner,[C.treeId,o,null],!!C.edit.drag.inner)?w.addClass(s.node.TMPTARGET_TREE):w=null,q.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null);E=G,F=H,j.treeObj.trigger(s.event.DRAGMOVE,[c,j.treeId,o])}return!1}function f(c){function d(){if(B){if(!n)for(var a=0,b=o.length;b>a;a++)t.removeNode(j,o[a]);if(H==s.move.TYPE_INNER)t.addNodes(C,x,y);else if(t.addNodes(C,x.getParentNode(),y),H==s.move.TYPE_PREV)for(a=0,b=y.length;b>a;a++)t.moveNode(C,x,y[a],H,!1);else for(a=-1,b=y.length-1;b>a;b--)t.moveNode(C,x,y[b],H,!1)}else if(n&&H==s.move.TYPE_INNER)t.addNodes(C,x,y);else if(n&&t.addNodes(C,x.getParentNode(),y),H!=s.move.TYPE_NEXT)for(a=0,b=y.length;b>a;a++)t.moveNode(C,x,y[a],H,!1);else for(a=-1,b=y.length-1;b>a;b--)t.moveNode(C,x,y[b],H,!1);t.selectNodes(C,y),v(y[0],j).focus().blur(),j.treeObj.trigger(s.event.DROP,[c,C.treeId,y,x,H,n])}if(window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null),E=null,F=null,z.unbind("mousemove",e),z.unbind("mouseup",f),z.unbind("selectstart",g),A.css("cursor","auto"),w&&(w.removeClass(s.node.TMPTARGET_TREE),G&&a("#"+G+s.id.A,w).removeClass(s.node.TMPTARGET_NODE+"_"+s.move.TYPE_PREV).removeClass(s.node.TMPTARGET_NODE+"_"+b.move.TYPE_NEXT).removeClass(s.node.TMPTARGET_NODE+"_"+b.move.TYPE_INNER)),r.showIfameMask(j,!1),l.showHoverDom=!0,0!=k.dragFlag){k.dragFlag=0;var h,i,m;for(h=0,i=o.length;i>h;h++)m=o[h],m.isParent&&k.dragNodeShowBefore[m.tId]&&!m.open&&(t.expandCollapseNode(j,m,!m.open),delete k.dragNodeShowBefore[m.tId]);p&&p.remove(),q&&q.remove();var n=(c.ctrlKey||c.metaKey)&&j.edit.drag.isMove&&j.edit.drag.isCopy||!j.edit.drag.isMove&&j.edit.drag.isCopy;if(!n&&w&&G&&o[0].parentTId&&G==o[0].parentTId&&H==s.move.TYPE_INNER&&(w=null),w){var x=null==G?null:u.getNodeCache(C,G);if(0==r.apply(j.callback.beforeDrop,[C.treeId,o,x,H,n],!0))return void t.selectNodes(D,o);var y=n?r.clone(o):o;H==s.move.TYPE_INNER&&r.canAsync(C,x)?t.asyncNode(C,x,!1,d):d()}else t.selectNodes(D,o),j.treeObj.trigger(s.event.DROP,[c,j.treeId,o,null,null,null])}}function g(){return!1}var h,i,j=u.getSetting(c.data.treeId),k=u.getRoot(j),l=u.getRoots();if(2==c.button||!j.edit.enable||!j.edit.drag.isCopy&&!j.edit.drag.isMove)return!0;var m=c.target,n=u.getRoot(j).curSelectedList,o=[];if(u.isSelectedNode(j,d))for(h=0,i=n.length;i>h;h++){if(n[h].editNameFlag&&r.eqs(m.tagName,"input")&&null!==m.getAttribute("treeNode"+s.id.INPUT))return!0;if(o.push(n[h]),o[0].parentTId!==n[h].parentTId){o=[d];break}}else o=[d];t.editNodeBlur=!0,t.cancelCurEditNode(j);var p,q,w,x,y,z=a(j.treeObj.get(0).ownerDocument),A=a(j.treeObj.get(0).ownerDocument.body),B=!1,C=j,D=j,E=null,F=null,G=null,H=s.move.TYPE_INNER,I=c.clientX,J=c.clientY,K=(new Date).getTime();return r.uCanDo(j)&&z.bind("mousemove",e),z.bind("mouseup",f),z.bind("selectstart",g),c.preventDefault&&c.preventDefault(),!0}},n={getAbs:function(a){var b=a.getBoundingClientRect(),c=document.body.scrollTop+document.documentElement.scrollTop,d=document.body.scrollLeft+document.documentElement.scrollLeft;return[b.left+d,b.top+c]},inputFocus:function(a){a.get(0)&&(a.focus(),r.setCursorPosition(a.get(0),a.val().length))},inputSelect:function(a){a.get(0)&&(a.focus(),a.select())},setCursorPosition:function(a,b){if(a.setSelectionRange)a.focus(),a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select()}},showIfameMask:function(a,b){for(var c=u.getRoot(a);c.dragMaskList.length>0;)c.dragMaskList[0].remove(),c.dragMaskList.shift();if(b)for(var d=v("iframe",a),e=0,f=d.length;f>e;e++){var g=d.get(e),h=r.getAbs(g),i=v("<div id='zTreeMask_"+e+"' class='zTreeMask' style='top:"+h[1]+"px; left:"+h[0]+"px; width:"+g.offsetWidth+"px; height:"+g.offsetHeight+"px;'></div>",a);i.appendTo(v("body",a)),c.dragMaskList.push(i)}}},o={addEditBtn:function(a,b){if(!(b.editNameFlag||v(b,s.id.EDIT,a).length>0)&&r.apply(a.edit.showRenameBtn,[a.treeId,b],a.edit.showRenameBtn)){var c=v(b,s.id.A,a),d="<span class='"+s.className.BUTTON+" edit' id='"+b.tId+s.id.EDIT+"' title='"+r.apply(a.edit.renameTitle,[a.treeId,b],a.edit.renameTitle)+"' treeNode"+s.id.EDIT+" style='display:none;'></span>";c.append(d),v(b,s.id.EDIT,a).bind("click",function(){return r.uCanDo(a)&&0!=r.apply(a.callback.beforeEditName,[a.treeId,b],!0)?(t.editNode(a,b),!1):!1}).show()}},addRemoveBtn:function(a,b){if(!(b.editNameFlag||v(b,s.id.REMOVE,a).length>0)&&r.apply(a.edit.showRemoveBtn,[a.treeId,b],a.edit.showRemoveBtn)){var c=v(b,s.id.A,a),d="<span class='"+s.className.BUTTON+" remove' id='"+b.tId+s.id.REMOVE+"' title='"+r.apply(a.edit.removeTitle,[a.treeId,b],a.edit.removeTitle)+"' treeNode"+s.id.REMOVE+" style='display:none;'></span>";c.append(d),v(b,s.id.REMOVE,a).bind("click",function(){return r.uCanDo(a)&&0!=r.apply(a.callback.beforeRemove,[a.treeId,b],!0)?(t.removeNode(a,b),a.treeObj.trigger(s.event.REMOVE,[a.treeId,b]),!1):!1}).bind("mousedown",function(){return!0}).show()}},addHoverDom:function(a,b){u.getRoots().showHoverDom&&(b.isHover=!0,a.edit.enable&&(t.addEditBtn(a,b),t.addRemoveBtn(a,b)),r.apply(a.view.addHoverDom,[a.treeId,b]))},cancelCurEditNode:function(a,b,c){var d=u.getRoot(a),e=a.data.key.name,f=d.curEditNode;if(f){var g=d.curEditInput,h=b?b:c?f[e]:g.val();if(r.apply(a.callback.beforeRename,[a.treeId,f,h,c],!0)===!1)return!1;f[e]=h;var i=v(f,s.id.A,a);i.removeClass(s.node.CURSELECTED_EDIT),g.unbind(),t.setNodeName(a,f),f.editNameFlag=!1,d.curEditNode=null,d.curEditInput=null,t.selectNode(a,f,!1),a.treeObj.trigger(s.event.RENAME,[a.treeId,f,c])}return d.noSelection=!0,!0},editNode:function(a,b){var c=u.getRoot(a);if(t.editNodeBlur=!1,u.isSelectedNode(a,b)&&c.curEditNode==b&&b.editNameFlag)return void setTimeout(function(){r.inputFocus(c.curEditInput)},0);var d=a.data.key.name;b.editNameFlag=!0,t.removeTreeDom(a,b),t.cancelCurEditNode(a),t.selectNode(a,b,!1),v(b,s.id.SPAN,a).html("<input type=text class='rename' id='"+b.tId+s.id.INPUT+"' treeNode"+s.id.INPUT+" >");var e=v(b,s.id.INPUT,a);e.attr("value",b[d]),a.edit.editNameSelectAll?r.inputSelect(e):r.inputFocus(e),e.bind("blur",function(){t.editNodeBlur||t.cancelCurEditNode(a)}).bind("keydown",function(b){"13"==b.keyCode?(t.editNodeBlur=!0,t.cancelCurEditNode(a)):"27"==b.keyCode&&t.cancelCurEditNode(a,null,!0)}).bind("click",function(){return!1}).bind("dblclick",function(){return!1}),v(b,s.id.A,a).addClass(s.node.CURSELECTED_EDIT),c.curEditInput=e,c.noSelection=!1,c.curEditNode=b},moveNode:function(a,b,c,d,e,f){var g=u.getRoot(a),h=a.data.key.children;if(b!=c&&(!a.data.keep.leaf||!b||b.isParent||d!=s.move.TYPE_INNER)){var i=c.parentTId?c.getParentNode():g,j=null===b||b==g;j&&null===b&&(b=g),j&&(d=s.move.TYPE_INNER);var k=b.parentTId?b.getParentNode():g;d!=s.move.TYPE_PREV&&d!=s.move.TYPE_NEXT&&(d=s.move.TYPE_INNER),d==s.move.TYPE_INNER&&(j?c.parentTId=null:(b.isParent||(b.isParent=!0,b.open=!!b.open,t.setNodeLineIcos(a,b)),c.parentTId=b.tId));var l,m;if(j)l=a.treeObj,m=l;else{if(f||d!=s.move.TYPE_INNER?f||t.expandCollapseNode(a,b.getParentNode(),!0,!1):t.expandCollapseNode(a,b,!0,!1),l=v(b,a),m=v(b,s.id.UL,a),l.get(0)&&!m.get(0)){var n=[];t.makeUlHtml(a,b,n,""),l.append(n.join(""))}m=v(b,s.id.UL,a)}var o=v(c,a);o.get(0)?l.get(0)||o.remove():o=t.appendNodes(a,c.level,[c],null,!1,!0).join(""),m.get(0)&&d==s.move.TYPE_INNER?m.append(o):l.get(0)&&d==s.move.TYPE_PREV?l.before(o):l.get(0)&&d==s.move.TYPE_NEXT&&l.after(o);var p,q,r=-1,w=0,x=null,y=null,z=c.level;if(c.isFirstNode)r=0,i[h].length>1&&(x=i[h][1],x.isFirstNode=!0);else if(c.isLastNode)r=i[h].length-1,x=i[h][r-1],x.isLastNode=!0;else for(p=0,q=i[h].length;q>p;p++)if(i[h][p].tId==c.tId){r=p;break}if(r>=0&&i[h].splice(r,1),d!=s.move.TYPE_INNER)for(p=0,q=k[h].length;q>p;p++)k[h][p].tId==b.tId&&(w=p);if(d==s.move.TYPE_INNER?(b[h]||(b[h]=new Array),b[h].length>0&&(y=b[h][b[h].length-1],y.isLastNode=!1),b[h].splice(b[h].length,0,c),c.isLastNode=!0,c.isFirstNode=1==b[h].length):b.isFirstNode&&d==s.move.TYPE_PREV?(k[h].splice(w,0,c),y=b,y.isFirstNode=!1,c.parentTId=b.parentTId,c.isFirstNode=!0,c.isLastNode=!1):b.isLastNode&&d==s.move.TYPE_NEXT?(k[h].splice(w+1,0,c),y=b,y.isLastNode=!1,c.parentTId=b.parentTId,c.isFirstNode=!1,c.isLastNode=!0):(d==s.move.TYPE_PREV?k[h].splice(w,0,c):k[h].splice(w+1,0,c),c.parentTId=b.parentTId,c.isFirstNode=!1,c.isLastNode=!1),u.fixPIdKeyValue(a,c),u.setSonNodeLevel(a,c.getParentNode(),c),t.setNodeLineIcos(a,c),t.repairNodeLevelClass(a,c,z),!a.data.keep.parent&&i[h].length<1){i.isParent=!1,i.open=!1;var A=v(i,s.id.UL,a),B=v(i,s.id.SWITCH,a),C=v(i,s.id.ICON,a);t.replaceSwitchClass(i,B,s.folder.DOCU),t.replaceIcoClass(i,C,s.folder.DOCU),A.css("display","none")}else x&&t.setNodeLineIcos(a,x);y&&t.setNodeLineIcos(a,y),a.check&&a.check.enable&&t.repairChkClass&&(t.repairChkClass(a,i),t.repairParentChkClassWithSelf(a,i),i!=c.parent&&t.repairParentChkClassWithSelf(a,c)),f||t.expandCollapseParentNode(a,c.getParentNode(),!0,e)}},removeEditBtn:function(a,b){v(b,s.id.EDIT,a).unbind().remove()},removeRemoveBtn:function(a,b){v(b,s.id.REMOVE,a).unbind().remove()},removeTreeDom:function(a,b){b.isHover=!1,t.removeEditBtn(a,b),t.removeRemoveBtn(a,b),r.apply(a.view.removeHoverDom,[a.treeId,b])},repairNodeLevelClass:function(a,b,c){if(c!==b.level){var d=v(b,a),e=v(b,s.id.A,a),f=v(b,s.id.UL,a),g=s.className.LEVEL+c,h=s.className.LEVEL+b.level;d.removeClass(g),d.addClass(h),e.removeClass(g),e.addClass(h),f.removeClass(g),f.addClass(h)}},selectNodes:function(a,b){for(var c=0,d=b.length;d>c;c++)t.selectNode(a,b[c],c>0)}},p={tools:n,view:o,event:l,data:k};a.extend(!0,a.fn.zTree.consts,b),a.extend(!0,a.fn.zTree._z,p);var q=a.fn.zTree,r=q._z.tools,s=q.consts,t=q._z.view,u=q._z.data,v=(q._z.event,r.$);u.exSetting(c),u.addInitBind(f),u.addInitUnBind(g),u.addInitCache(e),u.addInitNode(i),u.addInitProxy(h),u.addInitRoot(d),u.addZTreeTools(j);var w=t.cancelPreSelectedNode;t.cancelPreSelectedNode=function(a,b){for(var c=u.getRoot(a).curSelectedList,d=0,e=c.length;e>d&&(b&&b!==c[d]||(t.removeTreeDom(a,c[d]),!b));d++);w&&w.apply(t,arguments)};var x=t.createNodes;t.createNodes=function(a,b,c,d){x&&x.apply(t,arguments),c&&t.repairParentChkClassWithSelf&&t.repairParentChkClassWithSelf(a,d)};var y=t.makeNodeUrl;t.makeNodeUrl=function(a){return a.edit.enable?null:y.apply(t,arguments)};var z=t.removeNode;t.removeNode=function(a,b){var c=u.getRoot(a);c.curEditNode===b&&(c.curEditNode=null),z&&z.apply(t,arguments)};var A=t.selectNode;t.selectNode=function(a,b){var c=u.getRoot(a);return u.isSelectedNode(a,b)&&c.curEditNode==b&&b.editNameFlag?!1:(A&&A.apply(t,arguments),t.addHoverDom(a,b),!0)};var B=r.uCanDo;r.uCanDo=function(a,b){var c=u.getRoot(a);return b&&(r.eqs(b.type,"mouseover")||r.eqs(b.type,"mouseout")||r.eqs(b.type,"mousedown")||r.eqs(b.type,"mouseup"))?!0:(c.curEditNode&&(t.editNodeBlur=!1,c.curEditInput.focus()),!c.curEditNode&&(B?B.apply(t,arguments):!0))}}(jQuery),+function(){$.extend({showLoading:function(a){if(!a)var a={};var b="<div class='loading_shade'></div>";a.shadecss&&(b="<div class='loading_shade "+a.shadecss+"'></div>"),a.loadingpic&&(b+="<div class='loading_pic'></div>"),a.parentel?$(a.parentel).append(b):$("body").append(b)},hideLoadding:function(){$(".loading_shade").remove(),$(".loading_pic").remove()}})}($),function(a){var b=function(b,c){var b=a(b),d=this,e='li:has([data-toggle="tab"])',f=[],g=a.extend({},a.fn.bootstrapWizard.defaults,c),h=null,i=null;this.rebindClick=function(a,b){a.unbind("click",b).bind("click",b)},this.fixNavigationButtons=function(){return h.length||(i.find("a:first").tab("show"),h=i.find(e+":first")),a(g.previousSelector,b).toggleClass("disabled",d.firstIndex()>=d.currentIndex()),a(g.nextSelector,b).toggleClass("disabled",d.currentIndex()>=d.navigationLength()),a(g.nextSelector,b).toggleClass("hidden",d.currentIndex()>=d.navigationLength()&&a(g.finishSelector,b).length>0),a(g.lastSelector,b).toggleClass("hidden",d.currentIndex()>=d.navigationLength()&&a(g.finishSelector,b).length>0),a(g.finishSelector,b).toggleClass("hidden",d.currentIndex()<d.navigationLength()),a(g.backSelector,b).toggleClass("disabled",0==f.length),a(g.backSelector,b).toggleClass("hidden",d.currentIndex()>=d.navigationLength()&&a(g.finishSelector,b).length>0),d.rebindClick(a(g.nextSelector,b),d.next),d.rebindClick(a(g.previousSelector,b),d.previous),d.rebindClick(a(g.lastSelector,b),d.last),d.rebindClick(a(g.firstSelector,b),d.first),d.rebindClick(a(g.finishSelector,b),d.finish),d.rebindClick(a(g.backSelector,b),d.back),g.onTabShow&&"function"==typeof g.onTabShow&&g.onTabShow(h,i,d.currentIndex())===!1?!1:void 0},this.next=function(){if(b.hasClass("last"))return!1;if(g.onNext&&"function"==typeof g.onNext&&g.onNext(h,i,d.nextIndex())===!1)return!1;var a=d.currentIndex();$index=d.nextIndex(),$index>d.navigationLength()||(f.push(a),i.find(e+":eq("+$index+") a").tab("show"))},this.previous=function(){if(b.hasClass("first"))return!1;if(g.onPrevious&&"function"==typeof g.onPrevious&&g.onPrevious(h,i,d.previousIndex())===!1)return!1;var a=d.currentIndex();$index=d.previousIndex(),$index<0||(f.push(a),i.find(e+":eq("+$index+") a").tab("show"))},this.first=function(){return g.onFirst&&"function"==typeof g.onFirst&&g.onFirst(h,i,d.firstIndex())===!1?!1:b.hasClass("disabled")?!1:(f.push(d.currentIndex()),void i.find(e+":eq(0) a").tab("show"))},this.last=function(){return g.onLast&&"function"==typeof g.onLast&&g.onLast(h,i,d.lastIndex())===!1?!1:b.hasClass("disabled")?!1:(f.push(d.currentIndex()),void i.find(e+":eq("+d.navigationLength()+") a").tab("show"))},this.finish=function(){g.onFinish&&"function"==typeof g.onFinish&&g.onFinish(h,i,d.lastIndex())},this.back=function(){if(0==f.length)return null;var a=f.pop();return g.onBack&&"function"==typeof g.onBack&&g.onBack(h,i,a)===!1?(f.push(a),!1):void b.find(e+":eq("+a+") a").tab("show")},this.currentIndex=function(){return i.find(e).index(h)},this.firstIndex=function(){return 0},this.lastIndex=function(){return d.navigationLength()},this.getIndex=function(a){return i.find(e).index(a)},this.nextIndex=function(){return i.find(e).index(h)+1},this.previousIndex=function(){return i.find(e).index(h)-1},this.navigationLength=function(){return i.find(e).length-1},this.activeTab=function(){return h},this.nextTab=function(){return i.find(e+":eq("+(d.currentIndex()+1)+")").length?i.find(e+":eq("+(d.currentIndex()+1)+")"):null},this.previousTab=function(){return d.currentIndex()<=0?null:i.find(e+":eq("+parseInt(d.currentIndex()-1)+")")},this.show=function(a){var c=b.find(isNaN(a)?e+" a[href=#"+a+"]":e+":eq("+a+") a");c.length>0&&(f.push(d.currentIndex()),c.tab("show"))},this.disable=function(a){i.find(e+":eq("+a+")").addClass("disabled")},this.enable=function(a){i.find(e+":eq("+a+")").removeClass("disabled")},this.hide=function(a){i.find(e+":eq("+a+")").hide()},this.display=function(a){i.find(e+":eq("+a+")").show()},this.remove=function(b){var c=b[0],d="undefined"!=typeof b[1]?b[1]:!1,f=i.find(e+":eq("+c+")");if(d){var g=f.find("a").attr("href");a(g).remove()}f.remove()};var j=function(b){var c=i.find(e),f=c.index(a(b.currentTarget).parent(e)),j=a(c[f]);return g.onTabClick&&"function"==typeof g.onTabClick&&g.onTabClick(h,i,d.currentIndex(),f,j)===!1?!1:void 0},k=function(b){$element=a(b.target).parent();var c=i.find(e).index($element);return $element.hasClass("disabled")?!1:g.onTabChange&&"function"==typeof g.onTabChange&&g.onTabChange(h,i,d.currentIndex(),c)===!1?!1:(h=$element,void d.fixNavigationButtons())};this.resetWizard=function(){a('a[data-toggle="tab"]',i).off("click",j),a('a[data-toggle="tab"]',i).off("shown shown.bs.tab",k),i=b.find("ul:first",b),h=i.find(e+".active",b),a('a[data-toggle="tab"]',i).on("click",j),a('a[data-toggle="tab"]',i).on("shown shown.bs.tab",k),d.fixNavigationButtons()},i=b.find("ul:first",b),h=i.find(e+".active",b),i.hasClass(g.tabClass)||i.addClass(g.tabClass),g.onInit&&"function"==typeof g.onInit&&g.onInit(h,i,0),g.onShow&&"function"==typeof g.onShow&&g.onShow(h,i,d.nextIndex()),a('a[data-toggle="tab"]',i).on("click",j),a('a[data-toggle="tab"]',i).on("shown shown.bs.tab",k)};a.fn.bootstrapWizard=function(c){if("string"==typeof c){var d=Array.prototype.slice.call(arguments,1);return 1===d.length&&d.toString(),this.data("bootstrapWizard")[c](d)}return this.each(function(){var d=a(this);if(!d.data("bootstrapWizard")){var e=new b(d,c);d.data("bootstrapWizard",e),e.fixNavigationButtons()}})},a.fn.bootstrapWizard.defaults={tabClass:"nav nav-pills",nextSelector:".wizard li.next",previousSelector:".wizard li.previous",firstSelector:".wizard li.first",lastSelector:".wizard li.last",finishSelector:".wizard li.finish",backSelector:".wizard li.back",onShow:null,onInit:null,onNext:null,onPrevious:null,onLast:null,onFirst:null,onFinish:null,onBack:null,onTabChange:null,onTabClick:null,onTabShow:null}}(jQuery),+function(a){"use strict";function b(a){var b=e,c=b.biDivideByRadixPower(a,this.k-1),d=b.biMultiply(c,this.mu),f=b.biDivideByRadixPower(d,this.k+1),g=b.biModuloByRadixPower(a,this.k+1),h=b.biMultiply(f,this.modulus),i=b.biModuloByRadixPower(h,this.k+1),j=b.biSubtract(g,i);j.isNeg&&(j=b.biAdd(j,this.bkplus1));for(var k=b.biCompare(j,this.modulus)>=0;k;)j=b.biSubtract(j,this.modulus),k=b.biCompare(j,this.modulus)>=0;return j}function c(a,b){var c=e.biMultiply(a,b);return this.modulo(c)}function d(a,b){var c=new r;c.digits[0]=1;for(var d=a,f=b;;){if(0!=(1&f.digits[0])&&(c=this.multiplyMod(c,d)),f=e.biShiftRight(f,1),0==f.digits[0]&&0==e.biHighIndex(f))break;d=this.multiplyMod(d,d)}return c}if("undefined"==typeof a.RSAUtils)var e=a.RSAUtils={};var f,g,h,k,l=16,m=l,n=65536,o=n>>>1,p=n*n,q=n-1,r=a.BigInt=function(a){this.digits="boolean"==typeof a&&1==a?null:g.slice(0),this.isNeg=!1};e.setMaxDigits=function(a){f=a,g=new Array(f);for(var b=0;b<g.length;b++)g[b]=0;h=new r,k=new r,k.digits[0]=1},e.setMaxDigits(20);var s=15;e.biFromNumber=function(a){var b=new r;b.isNeg=0>a,a=Math.abs(a);for(var c=0;a>0;)b.digits[c++]=a&q,a=Math.floor(a/n);return b};var t=e.biFromNumber(1e15);e.biFromDecimal=function(a){for(var b,c="-"==a.charAt(0),d=c?1:0;d<a.length&&"0"==a.charAt(d);)++d;if(d==a.length)b=new r;else{var f=a.length-d,g=f%s;for(0==g&&(g=s),b=e.biFromNumber(Number(a.substr(d,g))),d+=g;d<a.length;)b=e.biAdd(e.biMultiply(b,t),e.biFromNumber(Number(a.substr(d,s)))),d+=s;b.isNeg=c}return b},e.biCopy=function(a){var b=new r(!0);return b.digits=a.digits.slice(0),b.isNeg=a.isNeg,b},e.reverseStr=function(a){for(var b="",c=a.length-1;c>-1;--c)b+=a.charAt(c);return b};var u=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];e.biToString=function(a,b){var c=new r;c.digits[0]=b;for(var d=e.biDivideModulo(a,c),f=u[d[1].digits[0]];1==e.biCompare(d[0],h);)d=e.biDivideModulo(d[0],c),digit=d[1].digits[0],f+=u[d[1].digits[0]];return(a.isNeg?"-":"")+e.reverseStr(f)},e.biToDecimal=function(a){var b=new r;b.digits[0]=10;for(var c=e.biDivideModulo(a,b),d=String(c[1].digits[0]);1==e.biCompare(c[0],h);)c=e.biDivideModulo(c[0],b),d+=String(c[1].digits[0]);return(a.isNeg?"-":"")+e.reverseStr(d)};var v=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];e.digitToHex=function(a){var b=15,c="";for(i=0;i<4;++i)c+=v[a&b],a>>>=4;return e.reverseStr(c)},e.biToHex=function(a){for(var b="",c=(e.biHighIndex(a),e.biHighIndex(a));c>-1;--c)b+=e.digitToHex(a.digits[c]);return b},e.charToHex=function(a){var b,c=48,d=c+9,e=97,f=e+25,g=65,h=90;return b=a>=c&&d>=a?a-c:a>=g&&h>=a?10+a-g:a>=e&&f>=a?10+a-e:0},e.hexToDigit=function(a){for(var b=0,c=Math.min(a.length,4),d=0;c>d;++d)b<<=4,b|=e.charToHex(a.charCodeAt(d));return b},e.biFromHex=function(a){for(var b=new r,c=a.length,d=c,f=0;d>0;d-=4,++f)b.digits[f]=e.hexToDigit(a.substr(Math.max(d-4,0),Math.min(d,4)));return b},e.biFromString=function(a,b){var c="-"==a.charAt(0),d=c?1:0,f=new r,g=new r;g.digits[0]=1;for(var h=a.length-1;h>=d;h--){var i=a.charCodeAt(h),j=e.charToHex(i),k=e.biMultiplyDigit(g,j);f=e.biAdd(f,k),g=e.biMultiplyDigit(g,b)}return f.isNeg=c,f},e.biDump=function(a){return(a.isNeg?"-":"")+a.digits.join(" ")},e.biAdd=function(a,b){var c;if(a.isNeg!=b.isNeg)b.isNeg=!b.isNeg,c=e.biSubtract(a,b),b.isNeg=!b.isNeg;else{c=new r;for(var d,f=0,g=0;g<a.digits.length;++g)d=a.digits[g]+b.digits[g]+f,c.digits[g]=d%n,f=Number(d>=n);c.isNeg=a.isNeg}return c},e.biSubtract=function(a,b){var c;if(a.isNeg!=b.isNeg)b.isNeg=!b.isNeg,c=e.biAdd(a,b),b.isNeg=!b.isNeg;else{c=new r;var d,f;f=0;for(var g=0;g<a.digits.length;++g)d=a.digits[g]-b.digits[g]+f,c.digits[g]=d%n,c.digits[g]<0&&(c.digits[g]+=n),f=0-Number(0>d);if(-1==f){f=0;for(var g=0;g<a.digits.length;++g)d=0-c.digits[g]+f,c.digits[g]=d%n,c.digits[g]<0&&(c.digits[g]+=n),f=0-Number(0>d);c.isNeg=!a.isNeg}else c.isNeg=a.isNeg}return c},e.biHighIndex=function(a){for(var b=a.digits.length-1;b>0&&0==a.digits[b];)--b;return b},e.biNumBits=function(a){var b,c=e.biHighIndex(a),d=a.digits[c],f=(c+1)*m;for(b=f;b>f-m&&0==(32768&d);--b)d<<=1;return b},e.biMultiply=function(a,b){for(var c,d,f,g=new r,h=e.biHighIndex(a),i=e.biHighIndex(b),k=0;i>=k;++k){for(c=0,f=k,j=0;j<=h;++j,++f)d=g.digits[f]+a.digits[j]*b.digits[k]+c,g.digits[f]=d&q,c=d>>>l;g.digits[k+h+1]=c}return g.isNeg=a.isNeg!=b.isNeg,g},e.biMultiplyDigit=function(a,b){var c,d,f;result=new r,c=e.biHighIndex(a),d=0;for(var g=0;c>=g;++g)f=result.digits[g]+a.digits[g]*b+d,result.digits[g]=f&q,d=f>>>l;return result.digits[1+c]=d,result},e.arrayCopy=function(a,b,c,d,e){for(var f=Math.min(b+e,a.length),g=b,h=d;f>g;++g,++h)c[h]=a[g]};var w=[0,32768,49152,57344,61440,63488,64512,65024,65280,65408,65472,65504,65520,65528,65532,65534,65535];e.biShiftLeft=function(a,b){var c=Math.floor(b/m),d=new r;
e.arrayCopy(a.digits,0,d.digits,c,d.digits.length-c);for(var f=b%m,g=m-f,h=d.digits.length-1,i=h-1;h>0;--h,--i)d.digits[h]=d.digits[h]<<f&q|(d.digits[i]&w[f])>>>g;return d.digits[0]=d.digits[h]<<f&q,d.isNeg=a.isNeg,d};var x=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];e.biShiftRight=function(a,b){var c=Math.floor(b/m),d=new r;e.arrayCopy(a.digits,c,d.digits,0,a.digits.length-c);for(var f=b%m,g=m-f,h=0,i=h+1;h<d.digits.length-1;++h,++i)d.digits[h]=d.digits[h]>>>f|(d.digits[i]&x[f])<<g;return d.digits[d.digits.length-1]>>>=f,d.isNeg=a.isNeg,d},e.biMultiplyByRadixPower=function(a,b){var c=new r;return e.arrayCopy(a.digits,0,c.digits,b,c.digits.length-b),c},e.biDivideByRadixPower=function(a,b){var c=new r;return e.arrayCopy(a.digits,b,c.digits,0,c.digits.length-b),c},e.biModuloByRadixPower=function(a,b){var c=new r;return e.arrayCopy(a.digits,0,c.digits,0,b),c},e.biCompare=function(a,b){if(a.isNeg!=b.isNeg)return 1-2*Number(a.isNeg);for(var c=a.digits.length-1;c>=0;--c)if(a.digits[c]!=b.digits[c])return a.isNeg?1-2*Number(a.digits[c]>b.digits[c]):1-2*Number(a.digits[c]<b.digits[c]);return 0},e.biDivideModulo=function(a,b){var c,d,f=e.biNumBits(a),g=e.biNumBits(b),h=b.isNeg;if(g>f)return a.isNeg?(c=e.biCopy(k),c.isNeg=!b.isNeg,a.isNeg=!1,b.isNeg=!1,d=biSubtract(b,a),a.isNeg=!0,b.isNeg=h):(c=new r,d=e.biCopy(a)),[c,d];c=new r,d=a;for(var i=Math.ceil(g/m)-1,j=0;b.digits[i]<o;)b=e.biShiftLeft(b,1),++j,++g,i=Math.ceil(g/m)-1;d=e.biShiftLeft(d,j),f+=j;for(var l=Math.ceil(f/m)-1,s=e.biMultiplyByRadixPower(b,l-i);-1!=e.biCompare(d,s);)++c.digits[l-i],d=e.biSubtract(d,s);for(var t=l;t>i;--t){var u=t>=d.digits.length?0:d.digits[t],v=t-1>=d.digits.length?0:d.digits[t-1],w=t-2>=d.digits.length?0:d.digits[t-2],x=i>=b.digits.length?0:b.digits[i],y=i-1>=b.digits.length?0:b.digits[i-1];c.digits[t-i-1]=u==x?q:Math.floor((u*n+v)/x);for(var z=c.digits[t-i-1]*(x*n+y),A=u*p+(v*n+w);z>A;)--c.digits[t-i-1],z=c.digits[t-i-1]*(x*n|y),A=u*n*n+(v*n+w);s=e.biMultiplyByRadixPower(b,t-i-1),d=e.biSubtract(d,e.biMultiplyDigit(s,c.digits[t-i-1])),d.isNeg&&(d=e.biAdd(d,s),--c.digits[t-i-1])}return d=e.biShiftRight(d,j),c.isNeg=a.isNeg!=h,a.isNeg&&(c=h?e.biAdd(c,k):e.biSubtract(c,k),b=e.biShiftRight(b,j),d=e.biSubtract(b,d)),0==d.digits[0]&&0==e.biHighIndex(d)&&(d.isNeg=!1),[c,d]},e.biDivide=function(a,b){return e.biDivideModulo(a,b)[0]},e.biModulo=function(a,b){return e.biDivideModulo(a,b)[1]},e.biMultiplyMod=function(a,b,c){return e.biModulo(e.biMultiply(a,b),c)},e.biPow=function(a,b){for(var c=k,d=a;;){if(0!=(1&b)&&(c=e.biMultiply(c,d)),b>>=1,0==b)break;d=e.biMultiply(d,d)}return c},e.biPowMod=function(a,b,c){for(var d=k,f=a,g=b;;){if(0!=(1&g.digits[0])&&(d=e.biMultiplyMod(d,f,c)),g=e.biShiftRight(g,1),0==g.digits[0]&&0==e.biHighIndex(g))break;f=e.biMultiplyMod(f,f,c)}return d},a.BarrettMu=function(a){this.modulus=e.biCopy(a),this.k=e.biHighIndex(this.modulus)+1;var f=new r;f.digits[2*this.k]=1,this.mu=e.biDivide(f,this.modulus),this.bkplus1=new r,this.bkplus1.digits[this.k+1]=1,this.modulo=b,this.multiplyMod=c,this.powMod=d};var y=function(b,c,d){var f=e;this.e=f.biFromHex(b),this.d=f.biFromHex(c),this.m=f.biFromHex(d),this.chunkSize=2*f.biHighIndex(this.m),this.radix=16,this.barrett=new a.BarrettMu(this.m)};e.getKeyPair=function(a,b,c){return new y(a,b,c)},"undefined"==typeof a.twoDigit&&(a.twoDigit=function(a){return(10>a?"0":"")+String(a)}),e._encryptedString=function(a,b){for(var c=[],d=b.length,f=0;d>f;)c[f]=b.charCodeAt(f),f++;for(;c.length%a.chunkSize!=0;)c[f++]=0;var g,h,i,j=c.length,k="";for(f=0;j>f;f+=a.chunkSize){for(i=new r,g=0,h=f;h<f+a.chunkSize;++g)i.digits[g]=c[h++],i.digits[g]+=c[h++]<<8;var l=a.barrett.powMod(i,a.e),m=16==a.radix?e.biToHex(l):e.biToString(l,a.radix);k+=m+" "}return k.substring(0,k.length-1)},e._decryptedString=function(a,b){var c,d,f,g=b.split(" "),h="";for(c=0;c<g.length;++c){var i;for(i=16==a.radix?e.biFromHex(g[c]):e.biFromString(g[c],a.radix),f=a.barrett.powMod(i,a.d),d=0;d<=e.biHighIndex(f);++d)h+=String.fromCharCode(255&f.digits[d],f.digits[d]>>8)}return 0==h.charCodeAt(h.length-1)&&(h=h.substring(0,h.length-1)),h},e.setMaxDigits(130),e.encryptedString=function(a){var b=a.text;if(a.exponent&&a.modulus){var c=e.getKeyPair(a.exponent,"",a.modulus);b=e._encryptedString(c,a.text)}return b},e.decryptedString=function(a){var b=a.text;if(a.exponent&&a.modulus){var c=e.getKeyPair("",a.exponent,a.modulus);b=e._decryptedString(c,a.text)}return b}}(window.jQuery),!function(){var a=function(a,b){var c=this,a=$(a),b=$.extend(!0,{},c.propress_default,b);b.tmpbox=$('<div class="progress"></div>'),b.tmpbar=$('<div class="progress-bar" style="width:50%"></div>'),b.render=function(a,b,c){b.tmpbar.addClass(b.type),b.animate&&b.tmpbox.addClass("active"),b.striped&&b.tmpbox.addClass("progress-striped"),b.tmpbox.css({height:b.height,width:b.width}),b.tmpbar.css({"line-height":b.tmpbox.css("height"),width:b.value+"%"}).text(b.value+"%"),b.propess=b.tmpbox.append(b.tmpbar),c?a.data("propress",b):a.html("").append(b.propess).data("propress",b)},b.render(a,b),b.update=function(a,c){a=$(a),b=$.extend(!0,{},b,c),b.render(a,b,!0)}};a.prototype={propress_default:{value:0,type:" ",height:20,width:"100%",animate:!1,striped:!1}},$.fn.propress=function(b){$.each(this,function(c,d){var e=$(d).data("propress");e?e.update(d,b):new a(d,b)})}}(),!function(){var a=function(a,b){var c=this,a=$(a),b=$.extend(!0,{},c.slider_default,b),d={};b.parent_box.css("height",b.height),a.wrap(b.parent_box);var e=$("<div class='slider_box'></div>"),f=b.height/a.height(),g=$("<div class='slider_button'></div>"),h=$("<div class='u_slider_box'></div>");e.append(g),h.append(e),g.css("height",100*f+"%"),a.parent().after(h),d.box_height=e.height(),d.button_height=g.height(),d.ele_height=a.height(),d.con_height=b.height,g.on({mousedown:function(a){b.button_move=!0,d.b_clientY=a.clientY},mouseleave:function(){b.button_move=!1},mouseup:function(){b.button_move=!1}}),e.on({mousemove:function(c){if(b.button_move){var e,e=g.position().top+(c.clientY-d.b_clientY),f=a.parent(".u_slider_con");if(3>e)return g.css("top",3),f.scrollTop(0),g.trigger("mouseup"),!1;if(e+d.button_height>d.box_height-3)return g.css("top",d.box_height-d.button_height-3),f.scrollTop(a.height()),g.trigger("mouseup"),!1;g.css("top",e);var e=(d.ele_height-d.con_height)*e/(d.box_height-d.button_height);return f.scrollTop(e),d.b_clientY=c.clientY,c.stopPropagation(),!1}},mouseup:function(a){return b.button_move=!1,a.stopPropagation(),!1}})};a.prototype={slider_default:{parent_box:$("<div class='u_slider'><div class='u_slider_con' style='position:relative'></div></div>"),height:400,button_move:!1}},$.fn.slider=function(b){$.each(this,function(c,d){new a(d,b)})}}(),+function(a){function b(a){this.options=a||{},this.init(a)}b.prototype={init:function(a){this.render(a.container),this.uploaderInit(a),this.eventBind()},render:function(b){var c='<div class="picker">éæ©æä»¶</div><button class="ctlBtn btn btn-default">å¼å§ä¸ä¼ </button>';a("#thelist").length||a("body").append('<div class="file_wrap"><h3>æ­£å¨ä¸ä¼ ï¼<strong id="suc">0</strong>/<strong id="count"></strong><img class="close_all" src="images/close.png" alt="å³é­" /></h3><div id="thelist" class="uploader-list"></div></div>'),b.append(c)},uploaderInit:function(){this.uploader=WebUploader.create({swf:"./swf/Uploader.swf?v="+Math.random(),server:"/upload",pick:".picker",chunked:!0,chunkSize:5242880,threads:20})},addBtn:function(a,b){this.uploader.addButton({id:"#"+a,innerHTML:b})},eventBind:function(){this.fileQueued(),this.btnClick()},uploadBeforeSend:function(){var a=function(a,b,c){c["Access-Control-Allow-Origin"]="*",c["Access-Control-Request-Headers"]="content-type",c["Access-Control-Request-Method"]="POST"};this.uploader.on("uploadBeforeSend ",a)},fileQueued:function(){var b=this.uploader,c=this;b.on("fileQueued",function(d){var e=a("#thelist");a(".file_wrap").css({display:"block"}),e.append('<div id="'+d.id+'" class="item"><h4 class="info">'+d.name+"</h4><span>"+(d.size/1048576).toFixed(2)+'M</span><p class="state">ç­å¾ä¸ä¼ ...</p><img class="close_item" src="images/itemcancel.png" alt="å³é­" /></div>'),c.closeRelative(),a("#count").html(b.getFiles().length)})},uploadProgress:function(){var b=this.uploader;b.on("uploadProgress",function(b,c){var d=a("#"+b.id),e=d.find(".progress .progress-bar");e.length||(e=a('<div class="progress progress-striped active"><div class="progress-bar" role="progressbar" style="width: 0%"></div></div>').appendTo(d).find(".progress-bar")),d.find("p.state").text("ä¸ä¼ ä¸­"),e.css("width",100*c+"%")})},sucCount:0,handle:function(){var b=this.uploader,c=this;b.on("uploadSuccess",function(b){a("#"+b.id).find("p.state").text("å·²ä¸ä¼ "),a("#suc").html(++c.sucCount)}),b.on("uploadError",function(b){a("#"+b.id).find("p.state").text("ä¸ä¼ åºé")}),b.on("uploadComplete",function(b){a("#"+b.id).find(".progress").fadeOut()})},btnClick:function(){var b=this;a(".ctlBtn").on("click",function(){b.uploader.upload()}),this.uploadProgress(),this.handle()},closeRelative:function(){var b=a(".close_all"),c=a(".close_item"),d=a(".file_wrap");b.on("click",function(){d.css({display:"none"})});for(var e=0;e<c.length;e++)a(c[e]).on("click",function(){a(this).parent().remove()})}},a.Uploader=b}($);
//# sourceMappingURL=u.min.map